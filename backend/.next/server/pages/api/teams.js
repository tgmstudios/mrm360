"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/teams";
exports.ids = ["pages/api/teams"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "bullmq":
/*!*************************!*\
  !*** external "bullmq" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bullmq");

/***/ }),

/***/ "ioredis":
/*!**************************!*\
  !*** external "ioredis" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("ioredis");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteams&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fteams%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteams&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fteams%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_teams_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/teams/index.ts */ \"(api)/./src/pages/api/teams/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_teams_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_teams_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_teams_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_teams_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/teams\",\n        pathname: \"/api/teams\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_teams_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnRlYW1zJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZ0ZWFtcyUyRmluZGV4LnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzJEO0FBQzNEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQywwREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsMERBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvP2NhZGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvdGVhbXMvaW5kZXgudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90ZWFtc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3RlYW1zXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteams&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fteams%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/managers/backgroundTaskManager.ts":
/*!***********************************************!*\
  !*** ./src/managers/backgroundTaskManager.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BackgroundTaskManager: () => (/* binding */ BackgroundTaskManager)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/logger */ \"(api)/./src/utils/logger.ts\");\n\n\nclass BackgroundTaskManager {\n    constructor(prisma){\n        this.prisma = prisma;\n    }\n    async createTask(params) {\n        const { name, description, entityType, entityId, subtaskNames = [] } = params;\n        try {\n            const task = await this.prisma.backgroundTask.create({\n                data: {\n                    name,\n                    description,\n                    entityType,\n                    entityId,\n                    status: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.PENDING,\n                    progress: 0,\n                    subtasks: {\n                        create: subtaskNames.map((n, idx)=>({\n                                name: n,\n                                stepIndex: idx,\n                                status: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.PENDING,\n                                progress: 0\n                            }))\n                    }\n                },\n                include: {\n                    subtasks: true\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(\"Background task created\", {\n                taskId: task.id,\n                name\n            });\n            return task;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Failed to create background task\", {\n                error,\n                name\n            });\n            throw error;\n        }\n    }\n    async markTaskRunning(taskId) {\n        await this.prisma.backgroundTask.update({\n            where: {\n                id: taskId\n            },\n            data: {\n                status: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.RUNNING,\n                startedAt: new Date()\n            }\n        });\n    }\n    async updateTaskProgress(taskId, progress) {\n        await this.prisma.backgroundTask.update({\n            where: {\n                id: taskId\n            },\n            data: {\n                progress\n            }\n        });\n    }\n    async markTaskCompleted(taskId, result) {\n        await this.prisma.backgroundTask.update({\n            where: {\n                id: taskId\n            },\n            data: {\n                status: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.COMPLETED,\n                finishedAt: new Date(),\n                progress: 100,\n                result\n            }\n        });\n    }\n    async markTaskFailed(taskId, errorMessage) {\n        await this.prisma.backgroundTask.update({\n            where: {\n                id: taskId\n            },\n            data: {\n                status: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.FAILED,\n                finishedAt: new Date(),\n                error: errorMessage\n            }\n        });\n    }\n    async markSubtaskRunning(taskId, stepIndex) {\n        const subtask = await this.prisma.backgroundSubtask.update({\n            where: {\n                id: await this.getSubtaskId(taskId, stepIndex)\n            },\n            data: {\n                status: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.RUNNING,\n                startedAt: new Date(),\n                progress: 0\n            }\n        });\n        return subtask;\n    }\n    async updateSubtaskProgress(taskId, stepIndex, progress) {\n        await this.prisma.backgroundSubtask.update({\n            where: {\n                id: await this.getSubtaskId(taskId, stepIndex)\n            },\n            data: {\n                progress\n            }\n        });\n    }\n    async markSubtaskCompleted(taskId, stepIndex, result) {\n        await this.prisma.backgroundSubtask.update({\n            where: {\n                id: await this.getSubtaskId(taskId, stepIndex)\n            },\n            data: {\n                status: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.COMPLETED,\n                finishedAt: new Date(),\n                progress: 100,\n                result\n            }\n        });\n    }\n    async markSubtaskFailed(taskId, stepIndex, errorMessage) {\n        await this.prisma.backgroundSubtask.update({\n            where: {\n                id: await this.getSubtaskId(taskId, stepIndex)\n            },\n            data: {\n                status: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.FAILED,\n                finishedAt: new Date(),\n                error: errorMessage\n            }\n        });\n    }\n    async getTask(taskId) {\n        return this.prisma.backgroundTask.findUnique({\n            where: {\n                id: taskId\n            },\n            include: {\n                subtasks: true\n            }\n        });\n    }\n    async listTasks(params = {}) {\n        const page = params.page || 1;\n        const limit = params.limit || 20;\n        const skip = (page - 1) * limit;\n        const where = {};\n        if (params.entityType) where.entityType = params.entityType;\n        if (params.entityId) where.entityId = params.entityId;\n        const [total, tasks] = await Promise.all([\n            this.prisma.backgroundTask.count({\n                where\n            }),\n            this.prisma.backgroundTask.findMany({\n                where,\n                orderBy: {\n                    createdAt: \"desc\"\n                },\n                skip,\n                take: limit,\n                include: {\n                    subtasks: true\n                }\n            })\n        ]);\n        return {\n            data: tasks,\n            pagination: {\n                page,\n                limit,\n                total,\n                totalPages: Math.ceil(total / limit)\n            }\n        };\n    }\n    async getSubtaskId(taskId, stepIndex) {\n        const subtask = await this.prisma.backgroundSubtask.findFirst({\n            where: {\n                taskId,\n                stepIndex\n            }\n        });\n        if (!subtask) {\n            throw new Error(`Subtask not found for task ${taskId} at step ${stepIndex}`);\n        }\n        return subtask.id;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbWFuYWdlcnMvYmFja2dyb3VuZFRhc2tNYW5hZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNkY7QUFDckQ7QUFFakMsTUFBTUU7SUFHWEMsWUFBWUMsTUFBb0IsQ0FBRTtRQUNoQyxJQUFJLENBQUNBLE1BQU0sR0FBR0E7SUFDaEI7SUFFQSxNQUFNQyxXQUFXQyxNQU1oQixFQUErRDtRQUM5RCxNQUFNLEVBQUVDLElBQUksRUFBRUMsV0FBVyxFQUFFQyxVQUFVLEVBQUVDLFFBQVEsRUFBRUMsZUFBZSxFQUFFLEVBQUUsR0FBR0w7UUFDdkUsSUFBSTtZQUNGLE1BQU1NLE9BQU8sTUFBTSxJQUFJLENBQUNSLE1BQU0sQ0FBQ1MsY0FBYyxDQUFDQyxNQUFNLENBQUM7Z0JBQ25EQyxNQUFNO29CQUNKUjtvQkFDQUM7b0JBQ0FDO29CQUNBQztvQkFDQU0sUUFBUWhCLHNEQUFVQSxDQUFDaUIsT0FBTztvQkFDMUJDLFVBQVU7b0JBQ1ZDLFVBQVU7d0JBQ1JMLFFBQVFILGFBQWFTLEdBQUcsQ0FBQyxDQUFDQyxHQUFHQyxNQUFTO2dDQUFFZixNQUFNYztnQ0FBR0UsV0FBV0Q7Z0NBQUtOLFFBQVFoQixzREFBVUEsQ0FBQ2lCLE9BQU87Z0NBQUVDLFVBQVU7NEJBQUU7b0JBQzNHO2dCQUNGO2dCQUNBTSxTQUFTO29CQUFFTCxVQUFVO2dCQUFLO1lBQzVCO1lBQ0FsQixpREFBTUEsQ0FBQ3dCLElBQUksQ0FBQywyQkFBMkI7Z0JBQUVDLFFBQVFkLEtBQUtlLEVBQUU7Z0JBQUVwQjtZQUFLO1lBQy9ELE9BQU9LO1FBQ1QsRUFBRSxPQUFPZ0IsT0FBTztZQUNkM0IsaURBQU1BLENBQUMyQixLQUFLLENBQUMsb0NBQW9DO2dCQUFFQTtnQkFBT3JCO1lBQUs7WUFDL0QsTUFBTXFCO1FBQ1I7SUFDRjtJQUVBLE1BQU1DLGdCQUFnQkgsTUFBYyxFQUFpQjtRQUNuRCxNQUFNLElBQUksQ0FBQ3RCLE1BQU0sQ0FBQ1MsY0FBYyxDQUFDaUIsTUFBTSxDQUFD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T0FBTztnQkFBRUw7Z0JBQVFIO1lBQVU7UUFBRTtRQUM3RixJQUFJLENBQUNxQixTQUFTO1lBQ1osTUFBTSxJQUFJMEIsTUFBTSxDQUFDLDJCQUEyQixFQUFFNUMsT0FBTyxTQUFTLEVBQUVILFVBQVUsQ0FBQztRQUM3RTtRQUNBLE9BQU9xQixRQUFRakIsRUFBRTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvLi9zcmMvbWFuYWdlcnMvYmFja2dyb3VuZFRhc2tNYW5hZ2VyLnRzPzEwODQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50LCBUYXNrU3RhdHVzLCBCYWNrZ3JvdW5kVGFzaywgQmFja2dyb3VuZFN1YnRhc2sgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL3V0aWxzL2xvZ2dlcic7XG5cbmV4cG9ydCBjbGFzcyBCYWNrZ3JvdW5kVGFza01hbmFnZXIge1xuICBwcml2YXRlIHByaXNtYTogUHJpc21hQ2xpZW50O1xuXG4gIGNvbnN0cnVjdG9yKHByaXNtYTogUHJpc21hQ2xpZW50KSB7XG4gICAgdGhpcy5wcmlzbWEgPSBwcmlzbWE7XG4gIH1cblxuICBhc3luYyBjcmVhdGVUYXNrKHBhcmFtczoge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgICBlbnRpdHlUeXBlPzogc3RyaW5nO1xuICAgIGVudGl0eUlkPzogc3RyaW5nO1xuICAgIHN1YnRhc2tOYW1lcz86IHN0cmluZ1tdO1xuICB9KTogUHJvbWlzZTxCYWNrZ3JvdW5kVGFzayAmIHsgc3VidGFza3M6IEJhY2tncm91bmRTdWJ0YXNrW10gfT4ge1xuICAgIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24sIGVudGl0eVR5cGUsIGVudGl0eUlkLCBzdWJ0YXNrTmFtZXMgPSBbXSB9ID0gcGFyYW1zO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0YXNrID0gYXdhaXQgdGhpcy5wcmlzbWEuYmFja2dyb3VuZFRhc2suY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgZW50aXR5VHlwZSxcbiAgICAgICAgICBlbnRpdHlJZCxcbiAgICAgICAgICBzdGF0dXM6IFRhc2tTdGF0dXMuUEVORElORyxcbiAgICAgICAgICBwcm9ncmVzczogMCxcbiAgICAgICAgICBzdWJ0YXNrczoge1xuICAgICAgICAgICAgY3JlYXRlOiBzdWJ0YXNrTmFtZXMubWFwKChuLCBpZHgpID0+ICh7IG5hbWU6IG4sIHN0ZXBJbmRleDogaWR4LCBzdGF0dXM6IFRhc2tTdGF0dXMuUEVORElORywgcHJvZ3Jlc3M6IDAgfSkpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7IHN1YnRhc2tzOiB0cnVlIH1cbiAgICAgIH0pO1xuICAgICAgbG9nZ2VyLmluZm8oJ0JhY2tncm91bmQgdGFzayBjcmVhdGVkJywgeyB0YXNrSWQ6IHRhc2suaWQsIG5hbWUgfSk7XG4gICAgICByZXR1cm4gdGFzaztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGJhY2tncm91bmQgdGFzaycsIHsgZXJyb3IsIG5hbWUgfSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBtYXJrVGFza1J1bm5pbmcodGFza0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnByaXNtYS5iYWNrZ3JvdW5kVGFzay51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHRhc2tJZCB9LFxuICAgICAgZGF0YTogeyBzdGF0dXM6IFRhc2tTdGF0dXMuUlVOTklORywgc3RhcnRlZEF0OiBuZXcgRGF0ZSgpIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVRhc2tQcm9ncmVzcyh0YXNrSWQ6IHN0cmluZywgcHJvZ3Jlc3M6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMucHJpc21hLmJhY2tncm91bmRUYXNrLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogdGFza0lkIH0sXG4gICAgICBkYXRhOiB7IHByb2dyZXNzIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIG1hcmtUYXNrQ29tcGxldGVkKHRhc2tJZDogc3RyaW5nLCByZXN1bHQ/OiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnByaXNtYS5iYWNrZ3JvdW5kVGFzay51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHRhc2tJZCB9LFxuICAgICAgZGF0YTogeyBzdGF0dXM6IFRhc2tTdGF0dXMuQ09NUExFVEVELCBmaW5pc2hlZEF0OiBuZXcgRGF0ZSgpLCBwcm9ncmVzczogMTAwLCByZXN1bHQgfVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgbWFya1Rhc2tGYWlsZWQodGFza0lkOiBzdHJpbmcsIGVycm9yTWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5wcmlzbWEuYmFja2dyb3VuZFRhc2sudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB0YXNrSWQgfSxcbiAgICAgIGRhdGE6IHsgc3RhdHVzOiBUYXNrU3RhdHVzLkZBSUxFRCwgZmluaXNoZWRBdDogbmV3IERhdGUoKSwgZXJyb3I6IGVycm9yTWVzc2FnZSB9XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBtYXJrU3VidGFza1J1bm5pbmcodGFza0lkOiBzdHJpbmcsIHN0ZXBJbmRleDogbnVtYmVyKTogUHJvbWlzZTxCYWNrZ3JvdW5kU3VidGFzaz4ge1xuICAgIGNvbnN0IHN1YnRhc2sgPSBhd2FpdCB0aGlzLnByaXNtYS5iYWNrZ3JvdW5kU3VidGFzay51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGF3YWl0IHRoaXMuZ2V0U3VidGFza0lkKHRhc2tJZCwgc3RlcEluZGV4KSB9LFxuICAgICAgZGF0YTogeyBzdGF0dXM6IFRhc2tTdGF0dXMuUlVOTklORywgc3RhcnRlZEF0OiBuZXcgRGF0ZSgpLCBwcm9ncmVzczogMCB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHN1YnRhc2s7XG4gIH1cblxuICBhc3luYyB1cGRhdGVTdWJ0YXNrUHJvZ3Jlc3ModGFza0lkOiBzdHJpbmcsIHN0ZXBJbmRleDogbnVtYmVyLCBwcm9ncmVzczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5wcmlzbWEuYmFja2dyb3VuZFN1YnRhc2sudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBhd2FpdCB0aGlzLmdldFN1YnRhc2tJZCh0YXNrSWQsIHN0ZXBJbmRleCkgfSxcbiAgICAgIGRhdGE6IHsgcHJvZ3Jlc3MgfVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgbWFya1N1YnRhc2tDb21wbGV0ZWQodGFza0lkOiBzdHJpbmcsIHN0ZXBJbmRleDogbnVtYmVyLCByZXN1bHQ/OiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnByaXNtYS5iYWNrZ3JvdW5kU3VidGFzay51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGF3YWl0IHRoaXMuZ2V0U3VidGFza0lkKHRhc2tJZCwgc3RlcEluZGV4KSB9LFxuICAgICAgZGF0YTogeyBzdGF0dXM6IFRhc2tTdGF0dXMuQ09NUExFVEVELCBmaW5pc2hlZEF0OiBuZXcgRGF0ZSgpLCBwcm9ncmVzczogMTAwLCByZXN1bHQgfVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgbWFya1N1YnRhc2tGYWlsZWQodGFza0lkOiBzdHJpbmcsIHN0ZXBJbmRleDogbnVtYmVyLCBlcnJvck1lc3NhZ2U6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMucHJpc21hLmJhY2tncm91bmRTdWJ0YXNrLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogYXdhaXQgdGhpcy5nZXRTdWJ0YXNrSWQodGFza0lkLCBzdGVwSW5kZXgpIH0sXG4gICAgICBkYXRhOiB7IHN0YXR1czogVGFza1N0YXR1cy5GQUlMRUQsIGZpbmlzaGVkQXQ6IG5ldyBEYXRlKCksIGVycm9yOiBlcnJvck1lc3NhZ2UgfVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0VGFzayh0YXNrSWQ6IHN0cmluZyk6IFByb21pc2U8KEJhY2tncm91bmRUYXNrICYgeyBzdWJ0YXNrczogQmFja2dyb3VuZFN1YnRhc2tbXSB9KSB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5wcmlzbWEuYmFja2dyb3VuZFRhc2suZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiB0YXNrSWQgfSwgaW5jbHVkZTogeyBzdWJ0YXNrczogdHJ1ZSB9IH0pO1xuICB9XG5cbiAgYXN5bmMgbGlzdFRhc2tzKHBhcmFtczogeyBwYWdlPzogbnVtYmVyOyBsaW1pdD86IG51bWJlcjsgZW50aXR5VHlwZT86IHN0cmluZzsgZW50aXR5SWQ/OiBzdHJpbmcgfSA9IHt9KSB7XG4gICAgY29uc3QgcGFnZSA9IHBhcmFtcy5wYWdlIHx8IDE7XG4gICAgY29uc3QgbGltaXQgPSBwYXJhbXMubGltaXQgfHwgMjA7XG4gICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcbiAgICBjb25zdCB3aGVyZTogYW55ID0ge307XG4gICAgaWYgKHBhcmFtcy5lbnRpdHlUeXBlKSB3aGVyZS5lbnRpdHlUeXBlID0gcGFyYW1zLmVudGl0eVR5cGU7XG4gICAgaWYgKHBhcmFtcy5lbnRpdHlJZCkgd2hlcmUuZW50aXR5SWQgPSBwYXJhbXMuZW50aXR5SWQ7XG4gICAgY29uc3QgW3RvdGFsLCB0YXNrc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLnByaXNtYS5iYWNrZ3JvdW5kVGFzay5jb3VudCh7IHdoZXJlIH0pLFxuICAgICAgdGhpcy5wcmlzbWEuYmFja2dyb3VuZFRhc2suZmluZE1hbnkoe1xuICAgICAgICB3aGVyZSxcbiAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICBza2lwLFxuICAgICAgICB0YWtlOiBsaW1pdCxcbiAgICAgICAgaW5jbHVkZTogeyBzdWJ0YXNrczogdHJ1ZSB9XG4gICAgICB9KVxuICAgIF0pO1xuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiB0YXNrcyxcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgcGFnZSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHRvdGFsLFxuICAgICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdClcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRTdWJ0YXNrSWQodGFza0lkOiBzdHJpbmcsIHN0ZXBJbmRleDogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBzdWJ0YXNrID0gYXdhaXQgdGhpcy5wcmlzbWEuYmFja2dyb3VuZFN1YnRhc2suZmluZEZpcnN0KHsgd2hlcmU6IHsgdGFza0lkLCBzdGVwSW5kZXggfSB9KTtcbiAgICBpZiAoIXN1YnRhc2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU3VidGFzayBub3QgZm91bmQgZm9yIHRhc2sgJHt0YXNrSWR9IGF0IHN0ZXAgJHtzdGVwSW5kZXh9YCk7XG4gICAgfVxuICAgIHJldHVybiBzdWJ0YXNrLmlkO1xuICB9XG59XG5cblxuIl0sIm5hbWVzIjpbIlRhc2tTdGF0dXMiLCJsb2dnZXIiLCJCYWNrZ3JvdW5kVGFza01hbmFnZXIiLCJjb25zdHJ1Y3RvciIsInByaXNtYSIsImNyZWF0ZVRhc2siLCJwYXJhbXMiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJlbnRpdHlUeXBlIiwiZW50aXR5SWQiLCJzdWJ0YXNrTmFtZXMiLCJ0YXNrIiwiYmFja2dyb3VuZFRhc2siLCJjcmVhdGUiLCJkYXRhIiwic3RhdHVzIiwiUEVORElORyIsInByb2dyZXNzIiwic3VidGFza3MiLCJtYXAiLCJuIiwiaWR4Iiwic3RlcEluZGV4IiwiaW5jbHVkZSIsImluZm8iLCJ0YXNrSWQiLCJpZCIsImVycm9yIiwibWFya1Rhc2tSdW5uaW5nIiwidXBkYXRlIiwid2hlcmUiLCJSVU5OSU5HIiwic3RhcnRlZEF0IiwiRGF0ZSIsInVwZGF0ZVRhc2tQcm9ncmVzcyIsIm1hcmtUYXNrQ29tcGxldGVkIiwicmVzdWx0IiwiQ09NUExFVEVEIiwiZmluaXNoZWRBdCIsIm1hcmtUYXNrRmFpbGVkIiwiZXJyb3JNZXNzYWdlIiwiRkFJTEVEIiwibWFya1N1YnRhc2tSdW5uaW5nIiwic3VidGFzayIsImJhY2tncm91bmRTdWJ0YXNrIiwiZ2V0U3VidGFza0lkIiwidXBkYXRlU3VidGFza1Byb2dyZXNzIiwibWFya1N1YnRhc2tDb21wbGV0ZWQiLCJtYXJrU3VidGFza0ZhaWxlZCIsImdldFRhc2siLCJmaW5kVW5pcXVlIiwibGlzdFRhc2tzIiwicGFnZSIsImxpbWl0Iiwic2tpcCIsInRvdGFsIiwidGFza3MiLCJQcm9taXNlIiwiYWxsIiwiY291bnQiLCJmaW5kTWFueSIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJ0YWtlIiwicGFnaW5hdGlvbiIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsImZpbmRGaXJzdCIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/managers/backgroundTaskManager.ts\n");

/***/ }),

/***/ "(api)/./src/managers/taskManager.ts":
/*!*************************************!*\
  !*** ./src/managers/taskManager.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TaskManager: () => (/* binding */ TaskManager)\n/* harmony export */ });\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/logger */ \"(api)/./src/utils/logger.ts\");\n/* harmony import */ var _tasks_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tasks/queue */ \"(api)/./src/tasks/queue.ts\");\n/* harmony import */ var _models_prismaClient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/models/prismaClient */ \"(api)/./src/models/prismaClient.ts\");\n/* harmony import */ var _backgroundTaskManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./backgroundTaskManager */ \"(api)/./src/managers/backgroundTaskManager.ts\");\n\n\n\n\nclass TaskManager {\n    constructor(){\n        this.emailQueue = _tasks_queue__WEBPACK_IMPORTED_MODULE_1__.emailQueue;\n        this.qrCodeQueue = _tasks_queue__WEBPACK_IMPORTED_MODULE_1__.qrCodeQueue;\n        this.syncGroupsQueue = _tasks_queue__WEBPACK_IMPORTED_MODULE_1__.syncGroupsQueue;\n        this.provisionQueue = _tasks_queue__WEBPACK_IMPORTED_MODULE_1__.provisionQueue;\n    }\n    async enqueueEmailJob(data, options) {\n        try {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Enqueueing email job\", {\n                to: data.to,\n                subject: data.subject\n            });\n            const job = await this.emailQueue.add(\"send-email\", data, {\n                delay: options?.delay || 0,\n                priority: options?.priority || 0,\n                attempts: options?.attempts || 3,\n                backoff: {\n                    type: \"exponential\",\n                    delay: 2000\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Email job enqueued successfully\", {\n                jobId: job.id\n            });\n            return job.id;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to enqueue email job\", {\n                error,\n                data\n            });\n            throw error;\n        }\n    }\n    // High-level provisioning tasks that create DB task + enqueue provision job\n    async enqueueProvisionTask(params) {\n        const backgroundTaskManager = new _backgroundTaskManager__WEBPACK_IMPORTED_MODULE_3__.BackgroundTaskManager(_models_prismaClient__WEBPACK_IMPORTED_MODULE_2__.prisma);\n        const backgroundTask = await backgroundTaskManager.createTask({\n            name: params.name,\n            description: params.description,\n            entityType: params.entityType,\n            entityId: params.entityId,\n            subtaskNames: params.subtaskNames\n        });\n        const job = await this.provisionQueue.add(\"provision\", {\n            backgroundTaskId: backgroundTask.id,\n            provisionType: params.provisionType,\n            payload: params.payload\n        });\n        return {\n            jobId: job.id,\n            backgroundTaskId: backgroundTask.id\n        };\n    }\n    async enqueueQRCodeJob(data, options) {\n        try {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Enqueueing QR code generation job\", {\n                userId: data.userId\n            });\n            const job = await this.qrCodeQueue.add(\"generate-qr-code\", data, {\n                delay: options?.delay || 0,\n                priority: options?.priority || 0,\n                attempts: options?.attempts || 3,\n                backoff: {\n                    type: \"exponential\",\n                    delay: 2000\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"QR code job enqueued successfully\", {\n                jobId: job.id\n            });\n            return job.id;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to enqueue QR code job\", {\n                error,\n                data\n            });\n            throw error;\n        }\n    }\n    async enqueueSyncGroupsJob(data, options) {\n        try {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Enqueueing sync groups job\", {\n                userId: data.userId,\n                force: data.force\n            });\n            const job = await this.syncGroupsQueue.add(\"sync-groups\", data, {\n                delay: options?.delay || 0,\n                priority: options?.priority || 0,\n                attempts: options?.attempts || 3,\n                backoff: {\n                    type: \"exponential\",\n                    delay: 5000\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Sync groups job enqueued successfully\", {\n                jobId: job.id\n            });\n            return job.id;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to enqueue sync groups job\", {\n                error,\n                data\n            });\n            throw error;\n        }\n    }\n    async getJobStatus(queueName, jobId) {\n        try {\n            let queue;\n            switch(queueName){\n                case \"email\":\n                    queue = this.emailQueue;\n                    break;\n                case \"qr-code\":\n                    queue = this.qrCodeQueue;\n                    break;\n                case \"sync-groups\":\n                    queue = this.syncGroupsQueue;\n                    break;\n                default:\n                    throw new Error(`Unknown queue: ${queueName}`);\n            }\n            const job = await queue.getJob(jobId);\n            if (!job) {\n                return {\n                    status: \"not_found\"\n                };\n            }\n            const state = await job.getState();\n            const progress = await job.progress();\n            const failedReason = job.failedReason;\n            return {\n                id: job.id,\n                name: job.name,\n                status: state,\n                progress,\n                failedReason,\n                data: job.data,\n                createdAt: job.timestamp,\n                processedAt: job.processedOn,\n                finishedAt: job.finishedOn\n            };\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to get job status\", {\n                error,\n                queueName,\n                jobId\n            });\n            throw error;\n        }\n    }\n    async getQueueStats(queueName) {\n        try {\n            let queue;\n            switch(queueName){\n                case \"email\":\n                    queue = this.emailQueue;\n                    break;\n                case \"qr-code\":\n                    queue = this.qrCodeQueue;\n                    break;\n                case \"sync-groups\":\n                    queue = this.syncGroupsQueue;\n                    break;\n                default:\n                    throw new Error(`Unknown queue: ${queueName}`);\n            }\n            const [waiting, active, completed, failed, delayed] = await Promise.all([\n                queue.getWaiting(),\n                queue.getActive(),\n                queue.getCompleted(),\n                queue.getFailed(),\n                queue.getDelayed()\n            ]);\n            return {\n                waiting: waiting.length,\n                active: active.length,\n                completed: completed.length,\n                failed: failed.length,\n                delayed: delayed.length,\n                total: waiting.length + active.length + completed.length + failed.length + delayed.length\n            };\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to get queue stats\", {\n                error,\n                queueName\n            });\n            throw error;\n        }\n    }\n    async retryFailedJob(queueName, jobId) {\n        try {\n            let queue;\n            switch(queueName){\n                case \"email\":\n                    queue = this.emailQueue;\n                    break;\n                case \"qr-code\":\n                    queue = this.qrCodeQueue;\n                    break;\n                case \"sync-groups\":\n                    queue = this.syncGroupsQueue;\n                    break;\n                default:\n                    throw new Error(`Unknown queue: ${queueName}`);\n            }\n            const job = await queue.getJob(jobId);\n            if (!job) {\n                throw new Error(\"Job not found\");\n            }\n            await job.retry();\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Job retry initiated\", {\n                queueName,\n                jobId\n            });\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to retry job\", {\n                error,\n                queueName,\n                jobId\n            });\n            throw error;\n        }\n    }\n    async clearCompletedJobs(queueName) {\n        try {\n            let queue;\n            switch(queueName){\n                case \"email\":\n                    queue = this.emailQueue;\n                    break;\n                case \"qr-code\":\n                    queue = this.qrCodeQueue;\n                    break;\n                case \"sync-groups\":\n                    queue = this.syncGroupsQueue;\n                    break;\n                default:\n                    throw new Error(`Unknown queue: ${queueName}`);\n            }\n            await queue.clean(0, 1000, \"completed\");\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Completed jobs cleared\", {\n                queueName\n            });\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to clear completed jobs\", {\n                error,\n                queueName\n            });\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O2dCQUNOLEtBQUs7b0JBQ0hDLFFBQVEsSUFBSSxDQUFDM0MsVUFBVTtvQkFDdkI7Z0JBQ0YsS0FBSztvQkFDSDJDLFFBQVEsSUFBSSxDQUFDMUMsV0FBVztvQkFDeEI7Z0JBQ0YsS0FBSztvQkFDSDBDLFFBQVEsSUFBSSxDQUFDekMsZUFBZTtvQkFDNUI7Z0JBQ0Y7b0JBQ0UsTUFBTSxJQUFJMEMsTUFBTSxDQUFDLGVBQWUsRUFBRUYsVUFBVSxDQUFDO1lBQ2pEO1lBRUEsTUFBTUMsTUFBTWdDLEtBQUssQ0FBQyxHQUFHLE1BQU07WUFDM0I1RSxpREFBTUEsQ0FBQ1ksSUFBSSxDQUFDLDBCQUEwQjtnQkFBRStCO1lBQVU7UUFDcEQsRUFBRSxPQUFPbkIsT0FBTztZQUNkeEIsaURBQU1BLENBQUN3QixLQUFLLENBQUMsa0NBQWtDO2dCQUFFQTtnQkFBT21CO1lBQVU7WUFDbEUsTUFBTW5CO1FBQ1I7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvLi9zcmMvbWFuYWdlcnMvdGFza01hbmFnZXIudHM/NDRlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBRdWV1ZSB9IGZyb20gJ2J1bGxtcSc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcic7XHJcbmltcG9ydCB7IGVtYWlsUXVldWUsIHFyQ29kZVF1ZXVlLCBzeW5jR3JvdXBzUXVldWUsIHByb3Zpc2lvblF1ZXVlIH0gZnJvbSAnLi4vdGFza3MvcXVldWUnO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL21vZGVscy9wcmlzbWFDbGllbnQnO1xyXG5pbXBvcnQgeyBCYWNrZ3JvdW5kVGFza01hbmFnZXIgfSBmcm9tICcuL2JhY2tncm91bmRUYXNrTWFuYWdlcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEVtYWlsSm9iRGF0YSB7XHJcbiAgdG86IHN0cmluZztcclxuICBzdWJqZWN0OiBzdHJpbmc7XHJcbiAgYm9keTogc3RyaW5nO1xyXG4gIHRlbXBsYXRlPzogc3RyaW5nO1xyXG4gIHZhcmlhYmxlcz86IFJlY29yZDxzdHJpbmcsIGFueT47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUVJDb2RlSm9iRGF0YSB7XHJcbiAgdXNlcklkOiBzdHJpbmc7XHJcbiAgdXNlckVtYWlsOiBzdHJpbmc7XHJcbiAgdXNlck5hbWU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTeW5jR3JvdXBzSm9iRGF0YSB7XHJcbiAgdXNlcklkOiBzdHJpbmc7XHJcbiAgZm9yY2U/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGFza01hbmFnZXIge1xyXG4gIHByaXZhdGUgZW1haWxRdWV1ZTogUXVldWU7XHJcbiAgcHJpdmF0ZSBxckNvZGVRdWV1ZTogUXVldWU7XHJcbiAgcHJpdmF0ZSBzeW5jR3JvdXBzUXVldWU6IFF1ZXVlO1xyXG4gIHByaXZhdGUgcHJvdmlzaW9uUXVldWU6IFF1ZXVlO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZW1haWxRdWV1ZSA9IGVtYWlsUXVldWU7XHJcbiAgICB0aGlzLnFyQ29kZVF1ZXVlID0gcXJDb2RlUXVldWU7XHJcbiAgICB0aGlzLnN5bmNHcm91cHNRdWV1ZSA9IHN5bmNHcm91cHNRdWV1ZTtcclxuICAgIHRoaXMucHJvdmlzaW9uUXVldWUgPSBwcm92aXNpb25RdWV1ZTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGVucXVldWVFbWFpbEpvYihkYXRhOiBFbWFpbEpvYkRhdGEsIG9wdGlvbnM/OiB7XHJcbiAgICBkZWxheT86IG51bWJlcjtcclxuICAgIHByaW9yaXR5PzogbnVtYmVyO1xyXG4gICAgYXR0ZW1wdHM/OiBudW1iZXI7XHJcbiAgfSk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsb2dnZXIuaW5mbygnRW5xdWV1ZWluZyBlbWFpbCBqb2InLCB7IHRvOiBkYXRhLnRvLCBzdWJqZWN0OiBkYXRhLnN1YmplY3QgfSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBqb2IgPSBhd2FpdCB0aGlzLmVtYWlsUXVldWUuYWRkKCdzZW5kLWVtYWlsJywgZGF0YSwge1xyXG4gICAgICAgIGRlbGF5OiBvcHRpb25zPy5kZWxheSB8fCAwLFxyXG4gICAgICAgIHByaW9yaXR5OiBvcHRpb25zPy5wcmlvcml0eSB8fCAwLFxyXG4gICAgICAgIGF0dGVtcHRzOiBvcHRpb25zPy5hdHRlbXB0cyB8fCAzLFxyXG4gICAgICAgIGJhY2tvZmY6IHtcclxuICAgICAgICAgIHR5cGU6ICdleHBvbmVudGlhbCcsXHJcbiAgICAgICAgICBkZWxheTogMjAwMCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGxvZ2dlci5pbmZvKCdFbWFpbCBqb2IgZW5xdWV1ZWQgc3VjY2Vzc2Z1bGx5JywgeyBqb2JJZDogam9iLmlkIH0pO1xyXG4gICAgICByZXR1cm4gam9iLmlkIGFzIHN0cmluZztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGVucXVldWUgZW1haWwgam9iJywgeyBlcnJvciwgZGF0YSB9KTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBIaWdoLWxldmVsIHByb3Zpc2lvbmluZyB0YXNrcyB0aGF0IGNyZWF0ZSBEQiB0YXNrICsgZW5xdWV1ZSBwcm92aXNpb24gam9iXHJcbiAgYXN5bmMgZW5xdWV1ZVByb3Zpc2lvblRhc2socGFyYW1zOiB7XHJcbiAgICBwcm92aXNpb25UeXBlOiAnVEVBTScgfCAnRVZFTlQnO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcbiAgICBlbnRpdHlUeXBlPzogc3RyaW5nO1xyXG4gICAgZW50aXR5SWQ/OiBzdHJpbmc7XHJcbiAgICBzdWJ0YXNrTmFtZXM6IHN0cmluZ1tdO1xyXG4gICAgcGF5bG9hZDogYW55O1xyXG4gIH0pOiBQcm9taXNlPHsgam9iSWQ6IHN0cmluZzsgYmFja2dyb3VuZFRhc2tJZDogc3RyaW5nIH0+IHtcclxuICAgIGNvbnN0IGJhY2tncm91bmRUYXNrTWFuYWdlciA9IG5ldyBCYWNrZ3JvdW5kVGFza01hbmFnZXIocHJpc21hKTtcclxuICAgIGNvbnN0IGJhY2tncm91bmRUYXNrID0gYXdhaXQgYmFja2dyb3VuZFRhc2tNYW5hZ2VyLmNyZWF0ZVRhc2soe1xyXG4gICAgICBuYW1lOiBwYXJhbXMubmFtZSxcclxuICAgICAgZGVzY3JpcHRpb246IHBhcmFtcy5kZXNjcmlwdGlvbixcclxuICAgICAgZW50aXR5VHlwZTogcGFyYW1zLmVudGl0eVR5cGUsXHJcbiAgICAgIGVudGl0eUlkOiBwYXJhbXMuZW50aXR5SWQsXHJcbiAgICAgIHN1YnRhc2tOYW1lczogcGFyYW1zLnN1YnRhc2tOYW1lc1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3Qgam9iID0gYXdhaXQgdGhpcy5wcm92aXNpb25RdWV1ZS5hZGQoJ3Byb3Zpc2lvbicsIHtcclxuICAgICAgYmFja2dyb3VuZFRhc2tJZDogYmFja2dyb3VuZFRhc2suaWQsXHJcbiAgICAgIHByb3Zpc2lvblR5cGU6IHBhcmFtcy5wcm92aXNpb25UeXBlLFxyXG4gICAgICBwYXlsb2FkOiBwYXJhbXMucGF5bG9hZFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4geyBqb2JJZDogam9iLmlkIGFzIHN0cmluZywgYmFja2dyb3VuZFRhc2tJZDogYmFja2dyb3VuZFRhc2suaWQgfTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGVucXVldWVRUkNvZGVKb2IoZGF0YTogUVJDb2RlSm9iRGF0YSwgb3B0aW9ucz86IHtcclxuICAgIGRlbGF5PzogbnVtYmVyO1xyXG4gICAgcHJpb3JpdHk/OiBudW1iZXI7XHJcbiAgICBhdHRlbXB0cz86IG51bWJlcjtcclxuICB9KTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxvZ2dlci5pbmZvKCdFbnF1ZXVlaW5nIFFSIGNvZGUgZ2VuZXJhdGlvbiBqb2InLCB7IHVzZXJJZDogZGF0YS51c2VySWQgfSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBqb2IgPSBhd2FpdCB0aGlzLnFyQ29kZVF1ZXVlLmFkZCgnZ2VuZXJhdGUtcXItY29kZScsIGRhdGEsIHtcclxuICAgICAgICBkZWxheTogb3B0aW9ucz8uZGVsYXkgfHwgMCxcclxuICAgICAgICBwcmlvcml0eTogb3B0aW9ucz8ucHJpb3JpdHkgfHwgMCxcclxuICAgICAgICBhdHRlbXB0czogb3B0aW9ucz8uYXR0ZW1wdHMgfHwgMyxcclxuICAgICAgICBiYWNrb2ZmOiB7XHJcbiAgICAgICAgICB0eXBlOiAnZXhwb25lbnRpYWwnLFxyXG4gICAgICAgICAgZGVsYXk6IDIwMDAsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBsb2dnZXIuaW5mbygnUVIgY29kZSBqb2IgZW5xdWV1ZWQgc3VjY2Vzc2Z1bGx5JywgeyBqb2JJZDogam9iLmlkIH0pO1xyXG4gICAgICByZXR1cm4gam9iLmlkIGFzIHN0cmluZztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGVucXVldWUgUVIgY29kZSBqb2InLCB7IGVycm9yLCBkYXRhIH0pO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGVucXVldWVTeW5jR3JvdXBzSm9iKGRhdGE6IFN5bmNHcm91cHNKb2JEYXRhLCBvcHRpb25zPzoge1xyXG4gICAgZGVsYXk/OiBudW1iZXI7XHJcbiAgICBwcmlvcml0eT86IG51bWJlcjtcclxuICAgIGF0dGVtcHRzPzogbnVtYmVyO1xyXG4gIH0pOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgbG9nZ2VyLmluZm8oJ0VucXVldWVpbmcgc3luYyBncm91cHMgam9iJywgeyB1c2VySWQ6IGRhdGEudXNlcklkLCBmb3JjZTogZGF0YS5mb3JjZSB9KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGpvYiA9IGF3YWl0IHRoaXMuc3luY0dyb3Vwc1F1ZXVlLmFkZCgnc3luYy1ncm91cHMnLCBkYXRhLCB7XHJcbiAgICAgICAgZGVsYXk6IG9wdGlvbnM/LmRlbGF5IHx8IDAsXHJcbiAgICAgICAgcHJpb3JpdHk6IG9wdGlvbnM/LnByaW9yaXR5IHx8IDAsXHJcbiAgICAgICAgYXR0ZW1wdHM6IG9wdGlvbnM/LmF0dGVtcHRzIHx8IDMsXHJcbiAgICAgICAgYmFja29mZjoge1xyXG4gICAgICAgICAgdHlwZTogJ2V4cG9uZW50aWFsJyxcclxuICAgICAgICAgIGRlbGF5OiA1MDAwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgbG9nZ2VyLmluZm8oJ1N5bmMgZ3JvdXBzIGpvYiBlbnF1ZXVlZCBzdWNjZXNzZnVsbHknLCB7IGpvYklkOiBqb2IuaWQgfSk7XHJcbiAgICAgIHJldHVybiBqb2IuaWQgYXMgc3RyaW5nO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZW5xdWV1ZSBzeW5jIGdyb3VwcyBqb2InLCB7IGVycm9yLCBkYXRhIH0pO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEpvYlN0YXR1cyhxdWV1ZU5hbWU6IHN0cmluZywgam9iSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgcXVldWU6IFF1ZXVlO1xyXG4gICAgICBcclxuICAgICAgc3dpdGNoIChxdWV1ZU5hbWUpIHtcclxuICAgICAgICBjYXNlICdlbWFpbCc6XHJcbiAgICAgICAgICBxdWV1ZSA9IHRoaXMuZW1haWxRdWV1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3FyLWNvZGUnOlxyXG4gICAgICAgICAgcXVldWUgPSB0aGlzLnFyQ29kZVF1ZXVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnc3luYy1ncm91cHMnOlxyXG4gICAgICAgICAgcXVldWUgPSB0aGlzLnN5bmNHcm91cHNRdWV1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcXVldWU6ICR7cXVldWVOYW1lfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBqb2IgPSBhd2FpdCBxdWV1ZS5nZXRKb2Ioam9iSWQpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCFqb2IpIHtcclxuICAgICAgICByZXR1cm4geyBzdGF0dXM6ICdub3RfZm91bmQnIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgam9iLmdldFN0YXRlKCk7XHJcbiAgICAgIGNvbnN0IHByb2dyZXNzID0gYXdhaXQgam9iLnByb2dyZXNzKCk7XHJcbiAgICAgIGNvbnN0IGZhaWxlZFJlYXNvbiA9IGpvYi5mYWlsZWRSZWFzb247XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkOiBqb2IuaWQsXHJcbiAgICAgICAgbmFtZTogam9iLm5hbWUsXHJcbiAgICAgICAgc3RhdHVzOiBzdGF0ZSxcclxuICAgICAgICBwcm9ncmVzcyxcclxuICAgICAgICBmYWlsZWRSZWFzb24sXHJcbiAgICAgICAgZGF0YTogam9iLmRhdGEsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBqb2IudGltZXN0YW1wLFxyXG4gICAgICAgIHByb2Nlc3NlZEF0OiBqb2IucHJvY2Vzc2VkT24sXHJcbiAgICAgICAgZmluaXNoZWRBdDogam9iLmZpbmlzaGVkT24sXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgam9iIHN0YXR1cycsIHsgZXJyb3IsIHF1ZXVlTmFtZSwgam9iSWQgfSk7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0UXVldWVTdGF0cyhxdWV1ZU5hbWU6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgcXVldWU6IFF1ZXVlO1xyXG4gICAgICBcclxuICAgICAgc3dpdGNoIChxdWV1ZU5hbWUpIHtcclxuICAgICAgICBjYXNlICdlbWFpbCc6XHJcbiAgICAgICAgICBxdWV1ZSA9IHRoaXMuZW1haWxRdWV1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3FyLWNvZGUnOlxyXG4gICAgICAgICAgcXVldWUgPSB0aGlzLnFyQ29kZVF1ZXVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnc3luYy1ncm91cHMnOlxyXG4gICAgICAgICAgcXVldWUgPSB0aGlzLnN5bmNHcm91cHNRdWV1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcXVldWU6ICR7cXVldWVOYW1lfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBbd2FpdGluZywgYWN0aXZlLCBjb21wbGV0ZWQsIGZhaWxlZCwgZGVsYXllZF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgcXVldWUuZ2V0V2FpdGluZygpLFxyXG4gICAgICAgIHF1ZXVlLmdldEFjdGl2ZSgpLFxyXG4gICAgICAgIHF1ZXVlLmdldENvbXBsZXRlZCgpLFxyXG4gICAgICAgIHF1ZXVlLmdldEZhaWxlZCgpLFxyXG4gICAgICAgIHF1ZXVlLmdldERlbGF5ZWQoKSxcclxuICAgICAgXSk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHdhaXRpbmc6IHdhaXRpbmcubGVuZ3RoLFxyXG4gICAgICAgIGFjdGl2ZTogYWN0aXZlLmxlbmd0aCxcclxuICAgICAgICBjb21wbGV0ZWQ6IGNvbXBsZXRlZC5sZW5ndGgsXHJcbiAgICAgICAgZmFpbGVkOiBmYWlsZWQubGVuZ3RoLFxyXG4gICAgICAgIGRlbGF5ZWQ6IGRlbGF5ZWQubGVuZ3RoLFxyXG4gICAgICAgIHRvdGFsOiB3YWl0aW5nLmxlbmd0aCArIGFjdGl2ZS5sZW5ndGggKyBjb21wbGV0ZWQubGVuZ3RoICsgZmFpbGVkLmxlbmd0aCArIGRlbGF5ZWQubGVuZ3RoLFxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHF1ZXVlIHN0YXRzJywgeyBlcnJvciwgcXVldWVOYW1lIH0pO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHJldHJ5RmFpbGVkSm9iKHF1ZXVlTmFtZTogc3RyaW5nLCBqb2JJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgcXVldWU6IFF1ZXVlO1xyXG4gICAgICBcclxuICAgICAgc3dpdGNoIChxdWV1ZU5hbWUpIHtcclxuICAgICAgICBjYXNlICdlbWFpbCc6XHJcbiAgICAgICAgICBxdWV1ZSA9IHRoaXMuZW1haWxRdWV1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3FyLWNvZGUnOlxyXG4gICAgICAgICAgcXVldWUgPSB0aGlzLnFyQ29kZVF1ZXVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnc3luYy1ncm91cHMnOlxyXG4gICAgICAgICAgcXVldWUgPSB0aGlzLnN5bmNHcm91cHNRdWV1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcXVldWU6ICR7cXVldWVOYW1lfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBqb2IgPSBhd2FpdCBxdWV1ZS5nZXRKb2Ioam9iSWQpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCFqb2IpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pvYiBub3QgZm91bmQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYXdhaXQgam9iLnJldHJ5KCk7XHJcbiAgICAgIGxvZ2dlci5pbmZvKCdKb2IgcmV0cnkgaW5pdGlhdGVkJywgeyBxdWV1ZU5hbWUsIGpvYklkIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gcmV0cnkgam9iJywgeyBlcnJvciwgcXVldWVOYW1lLCBqb2JJZCB9KTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBjbGVhckNvbXBsZXRlZEpvYnMocXVldWVOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxldCBxdWV1ZTogUXVldWU7XHJcbiAgICAgIFxyXG4gICAgICBzd2l0Y2ggKHF1ZXVlTmFtZSkge1xyXG4gICAgICAgIGNhc2UgJ2VtYWlsJzpcclxuICAgICAgICAgIHF1ZXVlID0gdGhpcy5lbWFpbFF1ZXVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAncXItY29kZSc6XHJcbiAgICAgICAgICBxdWV1ZSA9IHRoaXMucXJDb2RlUXVldWU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdzeW5jLWdyb3Vwcyc6XHJcbiAgICAgICAgICBxdWV1ZSA9IHRoaXMuc3luY0dyb3Vwc1F1ZXVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBxdWV1ZTogJHtxdWV1ZU5hbWV9YCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGF3YWl0IHF1ZXVlLmNsZWFuKDAsIDEwMDAsICdjb21wbGV0ZWQnKTtcclxuICAgICAgbG9nZ2VyLmluZm8oJ0NvbXBsZXRlZCBqb2JzIGNsZWFyZWQnLCB7IHF1ZXVlTmFtZSB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNsZWFyIGNvbXBsZXRlZCBqb2JzJywgeyBlcnJvciwgcXVldWVOYW1lIH0pO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImxvZ2dlciIsImVtYWlsUXVldWUiLCJxckNvZGVRdWV1ZSIsInN5bmNHcm91cHNRdWV1ZSIsInByb3Zpc2lvblF1ZXVlIiwicHJpc21hIiwiQmFja2dyb3VuZFRhc2tNYW5hZ2VyIiwiVGFza01hbmFnZXIiLCJjb25zdHJ1Y3RvciIsImVucXVldWVFbWFpbEpvYiIsImRhdGEiLCJvcHRpb25zIiwiaW5mbyIsInRvIiwic3ViamVjdCIsImpvYiIsImFkZCIsImRlbGF5IiwicHJpb3JpdHkiLCJhdHRlbXB0cyIsImJhY2tvZmYiLCJ0eXBlIiwiam9iSWQiLCJpZCIsImVycm9yIiwiZW5xdWV1ZVByb3Zpc2lvblRhc2siLCJwYXJhbXMiLCJiYWNrZ3JvdW5kVGFza01hbmFnZXIiLCJiYWNrZ3JvdW5kVGFzayIsImNyZWF0ZVRhc2siLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJlbnRpdHlUeXBlIiwiZW50aXR5SWQiLCJzdWJ0YXNrTmFtZXMiLCJiYWNrZ3JvdW5kVGFza0lkIiwicHJvdmlzaW9uVHlwZSIsInBheWxvYWQiLCJlbnF1ZXVlUVJDb2RlSm9iIiwidXNlcklkIiwiZW5xdWV1ZVN5bmNHcm91cHNKb2IiLCJmb3JjZSIsImdldEpvYlN0YXR1cyIsInF1ZXVlTmFtZSIsInF1ZXVlIiwiRXJyb3IiLCJnZXRKb2IiLCJzdGF0dXMiLCJzdGF0ZSIsImdldFN0YXRlIiwicHJvZ3Jlc3MiLCJmYWlsZWRSZWFzb24iLCJjcmVhdGVkQXQiLCJ0aW1lc3RhbXAiLCJwcm9jZXNzZWRBdCIsInByb2Nlc3NlZE9uIiwiZmluaXNoZWRBdCIsImZpbmlzaGVkT24iLCJnZXRRdWV1ZVN0YXRzIiwid2FpdGluZyIsImFjdGl2ZSIsImNvbXBsZXRlZCIsImZhaWxlZCIsImRlbGF5ZWQiLCJQcm9taXNlIiwiYWxsIiwiZ2V0V2FpdGluZyIsImdldEFjdGl2ZSIsImdldENvbXBsZXRlZCIsImdldEZhaWxlZCIsImdldERlbGF5ZWQiLCJsZW5ndGgiLCJ0b3RhbCIsInJldHJ5RmFpbGVkSm9iIiwicmV0cnkiLCJjbGVhckNvbXBsZXRlZEpvYnMiLCJjbGVhbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/managers/taskManager.ts\n");

/***/ }),

/***/ "(api)/./src/managers/teamManager.ts":
/*!*************************************!*\
  !*** ./src/managers/teamManager.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TeamManager: () => (/* binding */ TeamManager)\n/* harmony export */ });\n/* harmony import */ var _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/models/prismaClient */ \"(api)/./src/models/prismaClient.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/logger */ \"(api)/./src/utils/logger.ts\");\n/* harmony import */ var _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/middleware/errorHandler */ \"(api)/./src/middleware/errorHandler.ts\");\n\n\n\nclass TeamManager {\n    async createTeam(data) {\n        try {\n            // Check if team already exists with same name in the same group\n            if (data.groupId) {\n                const existingTeam = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.findFirst({\n                    where: {\n                        name: data.name,\n                        groupId: data.groupId\n                    }\n                });\n                if (existingTeam) {\n                    throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.CONFLICT(\"Team with this name already exists in this group\");\n                }\n            }\n            // Validate parent team if specified\n            if (data.parentTeamId) {\n                const parentTeam = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.findUnique({\n                    where: {\n                        id: data.parentTeamId\n                    }\n                });\n                if (!parentTeam) {\n                    throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"Parent team\");\n                }\n            }\n            const team = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.create({\n                data: {\n                    name: data.name,\n                    description: data.description,\n                    type: data.type,\n                    subtype: data.subtype,\n                    parentTeamId: data.parentTeamId,\n                    groupId: data.groupId\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Created team: ${team.name}`);\n            return team;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error creating team:\", error);\n            throw error;\n        }\n    }\n    async getTeamById(id) {\n        try {\n            const team = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.findUnique({\n                where: {\n                    id\n                },\n                include: {\n                    group: true,\n                    parentTeam: true,\n                    subteams: true,\n                    userTeams: {\n                        include: {\n                            user: {\n                                select: {\n                                    id: true,\n                                    email: true,\n                                    firstName: true,\n                                    lastName: true,\n                                    displayName: true,\n                                    role: true\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n            if (!team) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"Team\");\n            }\n            return team;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error getting team ${id}:`, error);\n            throw error;\n        }\n    }\n    async getTeams(params) {\n        try {\n            const { page = 1, limit = 20, search, type, groupId } = params;\n            const skip = (page - 1) * limit;\n            // Build where clause\n            const where = {};\n            if (search) {\n                where.OR = [\n                    {\n                        name: {\n                            contains: search,\n                            mode: \"insensitive\"\n                        }\n                    },\n                    {\n                        description: {\n                            contains: search,\n                            mode: \"insensitive\"\n                        }\n                    }\n                ];\n            }\n            if (type) {\n                where.type = type;\n            }\n            if (groupId) {\n                where.groupId = groupId;\n            }\n            // Get total count\n            const total = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.count({\n                where\n            });\n            // Get teams\n            const teams = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.findMany({\n                where,\n                skip,\n                take: limit,\n                orderBy: [\n                    {\n                        name: \"asc\"\n                    }\n                ],\n                include: {\n                    group: true,\n                    parentTeam: true,\n                    _count: {\n                        select: {\n                            userTeams: true,\n                            subteams: true\n                        }\n                    }\n                }\n            });\n            const totalPages = Math.ceil(total / limit);\n            return {\n                success: true,\n                data: teams,\n                pagination: {\n                    page,\n                    limit,\n                    total,\n                    totalPages\n                }\n            };\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error getting teams:\", error);\n            throw error;\n        }\n    }\n    async updateTeam(id, data) {\n        try {\n            // Check if name is being changed and if it conflicts\n            if (data.name) {\n                const existingTeam = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.findFirst({\n                    where: {\n                        name: data.name,\n                        groupId: data.groupId,\n                        id: {\n                            not: id\n                        }\n                    }\n                });\n                if (existingTeam) {\n                    throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.CONFLICT(\"Team with this name already exists in this group\");\n                }\n            }\n            // Validate parent team if specified\n            if (data.parentTeamId) {\n                const parentTeam = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.findUnique({\n                    where: {\n                        id: data.parentTeamId\n                    }\n                });\n                if (!parentTeam) {\n                    throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"Parent team\");\n                }\n                // Prevent circular references\n                if (data.parentTeamId === id) {\n                    throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.BAD_REQUEST(\"Team cannot be its own parent\");\n                }\n            }\n            const team = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.update({\n                where: {\n                    id\n                },\n                data: {\n                    name: data.name,\n                    description: data.description,\n                    type: data.type,\n                    subtype: data.subtype,\n                    parentTeamId: data.parentTeamId,\n                    groupId: data.groupId\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Updated team: ${team.name}`);\n            return team;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error updating team ${id}:`, error);\n            throw error;\n        }\n    }\n    async deleteTeam(id) {\n        try {\n            // Check if team has members or subteams\n            const team = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.findUnique({\n                where: {\n                    id\n                },\n                include: {\n                    _count: {\n                        select: {\n                            userTeams: true,\n                            subteams: true\n                        }\n                    }\n                }\n            });\n            if (!team) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"Team\");\n            }\n            if (team._count.userTeams > 0) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.CONFLICT(\"Cannot delete team with members\");\n            }\n            if (team._count.subteams > 0) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.CONFLICT(\"Cannot delete team with subteams\");\n            }\n            await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.delete({\n                where: {\n                    id\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Deleted team: ${id}`);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error deleting team ${id}:`, error);\n            throw error;\n        }\n    }\n    async assignUserToTeam(userId, teamId, role = \"MEMBER\") {\n        try {\n            // Check if user and team exist\n            const [user, team] = await Promise.all([\n                _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n                    where: {\n                        id: userId\n                    }\n                }),\n                _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.findUnique({\n                    where: {\n                        id: teamId\n                    }\n                })\n            ]);\n            if (!user) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"User\");\n            }\n            if (!team) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"Team\");\n            }\n            // Check if already assigned\n            const existingAssignment = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.userTeam.findUnique({\n                where: {\n                    userId_teamId: {\n                        userId,\n                        teamId\n                    }\n                }\n            });\n            if (existingAssignment) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.CONFLICT(\"User is already assigned to this team\");\n            }\n            // Assign user to team\n            await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.userTeam.create({\n                data: {\n                    userId,\n                    teamId,\n                    role\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Assigned user ${userId} to team ${teamId} as ${role}`);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error assigning user ${userId} to team ${teamId}:`, error);\n            throw error;\n        }\n    }\n    async removeUserFromTeam(userId, teamId) {\n        try {\n            await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.userTeam.delete({\n                where: {\n                    userId_teamId: {\n                        userId,\n                        teamId\n                    }\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Removed user ${userId} from team ${teamId}`);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error removing user ${userId} from team ${teamId}:`, error);\n            throw error;\n        }\n    }\n    async getTeamMembers(teamId) {\n        try {\n            const team = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.findUnique({\n                where: {\n                    id: teamId\n                },\n                include: {\n                    userTeams: {\n                        include: {\n                            user: {\n                                select: {\n                                    id: true,\n                                    email: true,\n                                    firstName: true,\n                                    lastName: true,\n                                    displayName: true,\n                                    role: true\n                                }\n                            }\n                        },\n                        orderBy: [\n                            {\n                                role: \"desc\"\n                            },\n                            {\n                                joinedAt: \"asc\"\n                            }\n                        ]\n                    }\n                }\n            });\n            if (!team) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"Team\");\n            }\n            return team.userTeams.map((ut)=>({\n                    ...ut.user,\n                    teamRole: ut.role,\n                    joinedAt: ut.joinedAt\n                }));\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error getting team members ${teamId}:`, error);\n            throw error;\n        }\n    }\n    async getSubteams(teamId) {\n        try {\n            const subteams = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.team.findMany({\n                where: {\n                    parentTeamId: teamId\n                },\n                orderBy: {\n                    name: \"asc\"\n                }\n            });\n            return subteams;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error getting subteams for team ${teamId}:`, error);\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UjtJQUNGO0lBRUEsTUFBTXNELFlBQVlaLE1BQWMsRUFBMEI7UUFDeEQsSUFBSTtZQUNGLE1BQU10QyxXQUFXLE1BQU0zQix3REFBTUEsQ0FBQ1EsSUFBSSxDQUFDd0MsUUFBUSxDQUFDO2dCQUMxQ3RDLE9BQU87b0JBQUVHLGNBQWNvRDtnQkFBTztnQkFDOUJmLFNBQVM7b0JBQUV2QyxNQUFNO2dCQUFNO1lBQ3pCO1lBRUEsT0FBT2dCO1FBQ1QsRUFBRSxPQUFPSixPQUFPO1lBQ2R0QixpREFBTUEsQ0FBQ3NCLEtBQUssQ0FBQyxDQUFDLGdDQUFnQyxFQUFFMEMsT0FBTyxDQUFDLENBQUMsRUFBRTFDO1lBQzNELE1BQU1BO1FBQ1I7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvLi9zcmMvbWFuYWdlcnMvdGVhbU1hbmFnZXIudHM/N2IyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL21vZGVscy9wcmlzbWFDbGllbnQnO1xuaW1wb3J0IHsgXG4gIFRlYW1Qcm9maWxlLCBcbiAgQ3JlYXRlVGVhbVJlcXVlc3QsIFxuICBVcGRhdGVUZWFtUmVxdWVzdCwgXG4gIFRlYW1RdWVyeVBhcmFtcyxcbiAgUGFnaW5hdGVkUmVzcG9uc2UgXG59IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC91dGlscy9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JzIH0gZnJvbSAnQC9taWRkbGV3YXJlL2Vycm9ySGFuZGxlcic7XG5cbmV4cG9ydCBjbGFzcyBUZWFtTWFuYWdlciB7XG4gIGFzeW5jIGNyZWF0ZVRlYW0oZGF0YTogQ3JlYXRlVGVhbVJlcXVlc3QpOiBQcm9taXNlPFRlYW1Qcm9maWxlPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIHRlYW0gYWxyZWFkeSBleGlzdHMgd2l0aCBzYW1lIG5hbWUgaW4gdGhlIHNhbWUgZ3JvdXBcbiAgICAgIGlmIChkYXRhLmdyb3VwSWQpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdUZWFtID0gYXdhaXQgcHJpc21hLnRlYW0uZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgICAgZ3JvdXBJZDogZGF0YS5ncm91cElkXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZXhpc3RpbmdUZWFtKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3JzLkNPTkZMSUNUKCdUZWFtIHdpdGggdGhpcyBuYW1lIGFscmVhZHkgZXhpc3RzIGluIHRoaXMgZ3JvdXAnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSBwYXJlbnQgdGVhbSBpZiBzcGVjaWZpZWRcbiAgICAgIGlmIChkYXRhLnBhcmVudFRlYW1JZCkge1xuICAgICAgICBjb25zdCBwYXJlbnRUZWFtID0gYXdhaXQgcHJpc21hLnRlYW0uZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEucGFyZW50VGVhbUlkIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFwYXJlbnRUZWFtKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3JzLk5PVF9GT1VORCgnUGFyZW50IHRlYW0nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0ZWFtID0gYXdhaXQgcHJpc21hLnRlYW0uY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICB0eXBlOiBkYXRhLnR5cGUsXG4gICAgICAgICAgc3VidHlwZTogZGF0YS5zdWJ0eXBlLFxuICAgICAgICAgIHBhcmVudFRlYW1JZDogZGF0YS5wYXJlbnRUZWFtSWQsXG4gICAgICAgICAgZ3JvdXBJZDogZGF0YS5ncm91cElkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuaW5mbyhgQ3JlYXRlZCB0ZWFtOiAke3RlYW0ubmFtZX1gKTtcbiAgICAgIHJldHVybiB0ZWFtO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHRlYW06JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VGVhbUJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8VGVhbVByb2ZpbGU+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGVhbSA9IGF3YWl0IHByaXNtYS50ZWFtLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgZ3JvdXA6IHRydWUsXG4gICAgICAgICAgcGFyZW50VGVhbTogdHJ1ZSxcbiAgICAgICAgICBzdWJ0ZWFtczogdHJ1ZSxcbiAgICAgICAgICB1c2VyVGVhbXM6IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICByb2xlOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF0ZWFtKSB7XG4gICAgICAgIHRocm93IEVycm9ycy5OT1RfRk9VTkQoJ1RlYW0nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRlYW07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgZ2V0dGluZyB0ZWFtICR7aWR9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFRlYW1zKHBhcmFtczogVGVhbVF1ZXJ5UGFyYW1zKTogUHJvbWlzZTxQYWdpbmF0ZWRSZXNwb25zZTxUZWFtUHJvZmlsZT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBwYWdlID0gMSwgbGltaXQgPSAyMCwgc2VhcmNoLCB0eXBlLCBncm91cElkIH0gPSBwYXJhbXM7XG4gICAgICBjb25zdCBza2lwID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuXG4gICAgICAvLyBCdWlsZCB3aGVyZSBjbGF1c2VcbiAgICAgIGNvbnN0IHdoZXJlOiBhbnkgPSB7fTtcbiAgICAgIFxuICAgICAgaWYgKHNlYXJjaCkge1xuICAgICAgICB3aGVyZS5PUiA9IFtcbiAgICAgICAgICB7IG5hbWU6IHsgY29udGFpbnM6IHNlYXJjaCwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgICAgeyBkZXNjcmlwdGlvbjogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICBdO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZSkge1xuICAgICAgICB3aGVyZS50eXBlID0gdHlwZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdyb3VwSWQpIHtcbiAgICAgICAgd2hlcmUuZ3JvdXBJZCA9IGdyb3VwSWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB0b3RhbCBjb3VudFxuICAgICAgY29uc3QgdG90YWwgPSBhd2FpdCBwcmlzbWEudGVhbS5jb3VudCh7IHdoZXJlIH0pO1xuXG4gICAgICAvLyBHZXQgdGVhbXNcbiAgICAgIGNvbnN0IHRlYW1zID0gYXdhaXQgcHJpc21hLnRlYW0uZmluZE1hbnkoe1xuICAgICAgICB3aGVyZSxcbiAgICAgICAgc2tpcCxcbiAgICAgICAgdGFrZTogbGltaXQsXG4gICAgICAgIG9yZGVyQnk6IFtcbiAgICAgICAgICB7IG5hbWU6ICdhc2MnIH1cbiAgICAgICAgXSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGdyb3VwOiB0cnVlLFxuICAgICAgICAgIHBhcmVudFRlYW06IHRydWUsXG4gICAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgdXNlclRlYW1zOiB0cnVlLFxuICAgICAgICAgICAgICBzdWJ0ZWFtczogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodG90YWwgLyBsaW1pdCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHRlYW1zLFxuICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgcGFnZSxcbiAgICAgICAgICBsaW1pdCxcbiAgICAgICAgICB0b3RhbCxcbiAgICAgICAgICB0b3RhbFBhZ2VzXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2V0dGluZyB0ZWFtczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVUZWFtKGlkOiBzdHJpbmcsIGRhdGE6IFVwZGF0ZVRlYW1SZXF1ZXN0KTogUHJvbWlzZTxUZWFtUHJvZmlsZT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiBuYW1lIGlzIGJlaW5nIGNoYW5nZWQgYW5kIGlmIGl0IGNvbmZsaWN0c1xuICAgICAgaWYgKGRhdGEubmFtZSkge1xuICAgICAgICBjb25zdCBleGlzdGluZ1RlYW0gPSBhd2FpdCBwcmlzbWEudGVhbS5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgICAgICBncm91cElkOiBkYXRhLmdyb3VwSWQsXG4gICAgICAgICAgICBpZDogeyBub3Q6IGlkIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChleGlzdGluZ1RlYW0pIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcnMuQ09ORkxJQ1QoJ1RlYW0gd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHMgaW4gdGhpcyBncm91cCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIHBhcmVudCB0ZWFtIGlmIHNwZWNpZmllZFxuICAgICAgaWYgKGRhdGEucGFyZW50VGVhbUlkKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudFRlYW0gPSBhd2FpdCBwcmlzbWEudGVhbS5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5wYXJlbnRUZWFtSWQgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXBhcmVudFRlYW0pIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcnMuTk9UX0ZPVU5EKCdQYXJlbnQgdGVhbScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJldmVudCBjaXJjdWxhciByZWZlcmVuY2VzXG4gICAgICAgIGlmIChkYXRhLnBhcmVudFRlYW1JZCA9PT0gaWQpIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcnMuQkFEX1JFUVVFU1QoJ1RlYW0gY2Fubm90IGJlIGl0cyBvd24gcGFyZW50Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdGVhbSA9IGF3YWl0IHByaXNtYS50ZWFtLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgICAgdHlwZTogZGF0YS50eXBlLFxuICAgICAgICAgIHN1YnR5cGU6IGRhdGEuc3VidHlwZSxcbiAgICAgICAgICBwYXJlbnRUZWFtSWQ6IGRhdGEucGFyZW50VGVhbUlkLFxuICAgICAgICAgIGdyb3VwSWQ6IGRhdGEuZ3JvdXBJZFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oYFVwZGF0ZWQgdGVhbTogJHt0ZWFtLm5hbWV9YCk7XG4gICAgICByZXR1cm4gdGVhbTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciB1cGRhdGluZyB0ZWFtICR7aWR9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZVRlYW0oaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiB0ZWFtIGhhcyBtZW1iZXJzIG9yIHN1YnRlYW1zXG4gICAgICBjb25zdCB0ZWFtID0gYXdhaXQgcHJpc21hLnRlYW0uZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICB1c2VyVGVhbXM6IHRydWUsXG4gICAgICAgICAgICAgIHN1YnRlYW1zOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF0ZWFtKSB7XG4gICAgICAgIHRocm93IEVycm9ycy5OT1RfRk9VTkQoJ1RlYW0nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRlYW0uX2NvdW50LnVzZXJUZWFtcyA+IDApIHtcbiAgICAgICAgdGhyb3cgRXJyb3JzLkNPTkZMSUNUKCdDYW5ub3QgZGVsZXRlIHRlYW0gd2l0aCBtZW1iZXJzJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0ZWFtLl9jb3VudC5zdWJ0ZWFtcyA+IDApIHtcbiAgICAgICAgdGhyb3cgRXJyb3JzLkNPTkZMSUNUKCdDYW5ub3QgZGVsZXRlIHRlYW0gd2l0aCBzdWJ0ZWFtcycpO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBwcmlzbWEudGVhbS5kZWxldGUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9XG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oYERlbGV0ZWQgdGVhbTogJHtpZH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBkZWxldGluZyB0ZWFtICR7aWR9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFzc2lnblVzZXJUb1RlYW0odXNlcklkOiBzdHJpbmcsIHRlYW1JZDogc3RyaW5nLCByb2xlOiAnTEVBREVSJyB8ICdNRU1CRVInID0gJ01FTUJFUicpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgdXNlciBhbmQgdGVhbSBleGlzdFxuICAgICAgY29uc3QgW3VzZXIsIHRlYW1dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9IH0pLFxuICAgICAgICBwcmlzbWEudGVhbS5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IHRlYW1JZCB9IH0pXG4gICAgICBdKTtcblxuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHRocm93IEVycm9ycy5OT1RfRk9VTkQoJ1VzZXInKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0ZWFtKSB7XG4gICAgICAgIHRocm93IEVycm9ycy5OT1RfRk9VTkQoJ1RlYW0nKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBhc3NpZ25lZFxuICAgICAgY29uc3QgZXhpc3RpbmdBc3NpZ25tZW50ID0gYXdhaXQgcHJpc21hLnVzZXJUZWFtLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHVzZXJJZF90ZWFtSWQ6IHtcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIHRlYW1JZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChleGlzdGluZ0Fzc2lnbm1lbnQpIHtcbiAgICAgICAgdGhyb3cgRXJyb3JzLkNPTkZMSUNUKCdVc2VyIGlzIGFscmVhZHkgYXNzaWduZWQgdG8gdGhpcyB0ZWFtJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFzc2lnbiB1c2VyIHRvIHRlYW1cbiAgICAgIGF3YWl0IHByaXNtYS51c2VyVGVhbS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIHRlYW1JZCxcbiAgICAgICAgICByb2xlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuaW5mbyhgQXNzaWduZWQgdXNlciAke3VzZXJJZH0gdG8gdGVhbSAke3RlYW1JZH0gYXMgJHtyb2xlfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGFzc2lnbmluZyB1c2VyICR7dXNlcklkfSB0byB0ZWFtICR7dGVhbUlkfTpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZW1vdmVVc2VyRnJvbVRlYW0odXNlcklkOiBzdHJpbmcsIHRlYW1JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHByaXNtYS51c2VyVGVhbS5kZWxldGUoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHVzZXJJZF90ZWFtSWQ6IHtcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIHRlYW1JZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKGBSZW1vdmVkIHVzZXIgJHt1c2VySWR9IGZyb20gdGVhbSAke3RlYW1JZH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciByZW1vdmluZyB1c2VyICR7dXNlcklkfSBmcm9tIHRlYW0gJHt0ZWFtSWR9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFRlYW1NZW1iZXJzKHRlYW1JZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRlYW0gPSBhd2FpdCBwcmlzbWEudGVhbS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHRlYW1JZCB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdXNlclRlYW1zOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgcm9sZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9yZGVyQnk6IFtcbiAgICAgICAgICAgICAgeyByb2xlOiAnZGVzYycgfSwgLy8gTGVhZGVycyBmaXJzdFxuICAgICAgICAgICAgICB7IGpvaW5lZEF0OiAnYXNjJyB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF0ZWFtKSB7XG4gICAgICAgIHRocm93IEVycm9ycy5OT1RfRk9VTkQoJ1RlYW0nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRlYW0udXNlclRlYW1zLm1hcCh1dCA9PiAoe1xuICAgICAgICAuLi51dC51c2VyLFxuICAgICAgICB0ZWFtUm9sZTogdXQucm9sZSxcbiAgICAgICAgam9pbmVkQXQ6IHV0LmpvaW5lZEF0XG4gICAgICB9KSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgZ2V0dGluZyB0ZWFtIG1lbWJlcnMgJHt0ZWFtSWR9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFN1YnRlYW1zKHRlYW1JZDogc3RyaW5nKTogUHJvbWlzZTxUZWFtUHJvZmlsZVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1YnRlYW1zID0gYXdhaXQgcHJpc21hLnRlYW0uZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyBwYXJlbnRUZWFtSWQ6IHRlYW1JZCB9LFxuICAgICAgICBvcmRlckJ5OiB7IG5hbWU6ICdhc2MnIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc3VidGVhbXM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgZ2V0dGluZyBzdWJ0ZWFtcyBmb3IgdGVhbSAke3RlYW1JZH06YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsicHJpc21hIiwibG9nZ2VyIiwiRXJyb3JzIiwiVGVhbU1hbmFnZXIiLCJjcmVhdGVUZWFtIiwiZGF0YSIsImdyb3VwSWQiLCJleGlzdGluZ1RlYW0iLCJ0ZWFtIiwiZmluZEZpcnN0Iiwid2hlcmUiLCJuYW1lIiwiQ09ORkxJQ1QiLCJwYXJlbnRUZWFtSWQiLCJwYXJlbnRUZWFtIiwiZmluZFVuaXF1ZSIsImlkIiwiTk9UX0ZPVU5EIiwiY3JlYXRlIiwiZGVzY3JpcHRpb24iLCJ0eXBlIiwic3VidHlwZSIsImluZm8iLCJlcnJvciIsImdldFRlYW1CeUlkIiwiaW5jbHVkZSIsImdyb3VwIiwic3VidGVhbXMiLCJ1c2VyVGVhbXMiLCJ1c2VyIiwic2VsZWN0IiwiZW1haWwiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImRpc3BsYXlOYW1lIiwicm9sZSIsImdldFRlYW1zIiwicGFyYW1zIiwicGFnZSIsImxpbWl0Iiwic2VhcmNoIiwic2tpcCIsIk9SIiwiY29udGFpbnMiLCJtb2RlIiwidG90YWwiLCJjb3VudCIsInRlYW1zIiwiZmluZE1hbnkiLCJ0YWtlIiwib3JkZXJCeSIsIl9jb3VudCIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsInN1Y2Nlc3MiLCJwYWdpbmF0aW9uIiwidXBkYXRlVGVhbSIsIm5vdCIsIkJBRF9SRVFVRVNUIiwidXBkYXRlIiwiZGVsZXRlVGVhbSIsImRlbGV0ZSIsImFzc2lnblVzZXJUb1RlYW0iLCJ1c2VySWQiLCJ0ZWFtSWQiLCJQcm9taXNlIiwiYWxsIiwiZXhpc3RpbmdBc3NpZ25tZW50IiwidXNlclRlYW0iLCJ1c2VySWRfdGVhbUlkIiwicmVtb3ZlVXNlckZyb21UZWFtIiwiZ2V0VGVhbU1lbWJlcnMiLCJqb2luZWRBdCIsIm1hcCIsInV0IiwidGVhbVJvbGUiLCJnZXRTdWJ0ZWFtcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/managers/teamManager.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/authMiddleware.ts":
/*!******************************************!*\
  !*** ./src/middleware/authMiddleware.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _models_prismaClient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/prismaClient */ \"(api)/./src/models/prismaClient.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/logger */ \"(api)/./src/utils/logger.ts\");\n\n\n\n// Helper function to determine effective role based on OIDC groups\nfunction getEffectiveRole(userRole, authentikGroups) {\n    // If user has tech-team group, elevate to admin regardless of base role\n    if (authentikGroups.includes(\"tech-team\")) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"User has tech-team group, elevating to admin role\", {\n            originalRole: userRole,\n            authentikGroups\n        });\n        return \"ADMIN\";\n    }\n    return userRole;\n}\nfunction withAuth(handler) {\n    return async (req, res)=>{\n        try {\n            // Get JWT token from Authorization header\n            const authHeader = req.headers.authorization;\n            if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn(\"No valid authorization header\", {\n                    path: req.url\n                });\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"No valid token provided\"\n                });\n            }\n            const token = authHeader.substring(7); // Remove 'Bearer ' prefix\n            // Verify JWT token\n            let decoded;\n            try {\n                decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, process.env.JWT_SECRET || \"fallback-secret\");\n            } catch (error) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn(\"Invalid JWT token\", {\n                    error,\n                    path: req.url\n                });\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"Invalid token\"\n                });\n            }\n            if (!decoded || !decoded.id) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn(\"Invalid token payload\", {\n                    path: req.url\n                });\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"Invalid token payload\"\n                });\n            }\n            // Get fresh user data from database\n            const user = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n                where: {\n                    id: decoded.id\n                },\n                select: {\n                    id: true,\n                    email: true,\n                    username: true,\n                    firstName: true,\n                    lastName: true,\n                    role: true\n                }\n            });\n            if (!user) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn(\"User not found\", {\n                    userId: decoded.id,\n                    path: req.url\n                });\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"User not found\"\n                });\n            }\n            // Get user groups\n            const userGroups = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_1__.prisma.userGroup.findMany({\n                where: {\n                    userId: user.id\n                },\n                include: {\n                    group: {\n                        select: {\n                            name: true\n                        }\n                    }\n                }\n            });\n            // Create authenticated request with user info\n            const authenticatedReq = req;\n            authenticatedReq.user = {\n                id: user.id,\n                email: user.email,\n                username: user.username || undefined,\n                firstName: user.firstName,\n                lastName: user.lastName,\n                role: getEffectiveRole(user.role, userGroups.map((ug)=>ug.group.name)),\n                groups: userGroups.map((ug)=>ug.group.name)\n            };\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"Authentication successful\", {\n                userId: user.id,\n                userRole: authenticatedReq.user.role,\n                path: req.url\n            });\n            // Call the original handler\n            await handler(authenticatedReq, res);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Authentication middleware error\", {\n                error,\n                path: req.url\n            });\n            return res.status(500).json({\n                error: \"Internal server error\",\n                message: \"Authentication failed\"\n            });\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS0ksS0FBSztnQkFDakJDLFVBQVVMLEtBQUtLLFFBQVEsSUFBSVk7Z0JBQzNCWCxXQUFXTixLQUFLTSxTQUFTO2dCQUN6QkMsVUFBVVAsS0FBS08sUUFBUTtnQkFDdkJDLE1BQU1yQyxpQkFBaUI2QixLQUFLUSxJQUFJLEVBQUVFLFdBQVdRLEdBQUcsQ0FBQ0MsQ0FBQUEsS0FBTUEsR0FBR0wsS0FBSyxDQUFDQyxJQUFJO2dCQUNwRUssUUFBUVYsV0FBV1EsR0FBRyxDQUFDQyxDQUFBQSxLQUFNQSxHQUFHTCxLQUFLLENBQUNDLElBQUk7WUFDNUM7WUFFQTdDLGlEQUFNQSxDQUFDSyxJQUFJLENBQUMsNkJBQTZCO2dCQUN2Q2tDLFFBQVFULEtBQUtELEVBQUU7Z0JBQ2YzQixVQUFVNEMsaUJBQWlCaEIsSUFBSSxDQUFDUSxJQUFJO2dCQUNwQ3RCLE1BQU1QLElBQUlRLEdBQUc7WUFDZjtZQUVBLDRCQUE0QjtZQUM1QixNQUFNVCxRQUFRc0Msa0JBQWtCcEM7UUFDbEMsRUFBRSxPQUFPVSxPQUFPO1lBQ2RwQixpREFBTUEsQ0FBQ29CLEtBQUssQ0FBQyxtQ0FBbUM7Z0JBQUVBO2dCQUFPSixNQUFNUCxJQUFJUSxHQUFHO1lBQUM7WUFDdkUsT0FBT1AsSUFBSVEsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLE9BQU87Z0JBQ1BDLFNBQVM7WUFDWDtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21ybTM2MC1iYWNrZW5kLy4vc3JjL21pZGRsZXdhcmUvYXV0aE1pZGRsZXdhcmUudHM/Mjg0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi9tb2RlbHMvcHJpc21hQ2xpZW50JztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aGVudGljYXRlZFJlcXVlc3QgZXh0ZW5kcyBOZXh0QXBpUmVxdWVzdCB7XG4gIHVzZXI6IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gICAgdXNlcm5hbWU/OiBzdHJpbmc7XG4gICAgZmlyc3ROYW1lOiBzdHJpbmc7XG4gICAgbGFzdE5hbWU6IHN0cmluZztcbiAgICByb2xlOiBzdHJpbmc7XG4gICAgZ3JvdXBzOiBzdHJpbmdbXTtcbiAgfTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlZmZlY3RpdmUgcm9sZSBiYXNlZCBvbiBPSURDIGdyb3Vwc1xuZnVuY3Rpb24gZ2V0RWZmZWN0aXZlUm9sZSh1c2VyUm9sZTogc3RyaW5nLCBhdXRoZW50aWtHcm91cHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgLy8gSWYgdXNlciBoYXMgdGVjaC10ZWFtIGdyb3VwLCBlbGV2YXRlIHRvIGFkbWluIHJlZ2FyZGxlc3Mgb2YgYmFzZSByb2xlXG4gIGlmIChhdXRoZW50aWtHcm91cHMuaW5jbHVkZXMoJ3RlY2gtdGVhbScpKSB7XG4gICAgbG9nZ2VyLmluZm8oJ1VzZXIgaGFzIHRlY2gtdGVhbSBncm91cCwgZWxldmF0aW5nIHRvIGFkbWluIHJvbGUnLCB7XG4gICAgICBvcmlnaW5hbFJvbGU6IHVzZXJSb2xlLFxuICAgICAgYXV0aGVudGlrR3JvdXBzXG4gICAgfSk7XG4gICAgcmV0dXJuICdBRE1JTic7XG4gIH1cbiAgcmV0dXJuIHVzZXJSb2xlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2l0aEF1dGgoaGFuZGxlcjogKHJlcTogQXV0aGVudGljYXRlZFJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiBQcm9taXNlPHZvaWQ+KSB7XG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IEpXVCB0b2tlbiBmcm9tIEF1dGhvcml6YXRpb24gaGVhZGVyXG4gICAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgICAgIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ05vIHZhbGlkIGF1dGhvcml6YXRpb24gaGVhZGVyJywgeyBwYXRoOiByZXEudXJsIH0pO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBcbiAgICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcsXG4gICAgICAgICAgbWVzc2FnZTogJ05vIHZhbGlkIHRva2VuIHByb3ZpZGVkJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zdWJzdHJpbmcoNyk7IC8vIFJlbW92ZSAnQmVhcmVyICcgcHJlZml4XG5cbiAgICAgIC8vIFZlcmlmeSBKV1QgdG9rZW5cbiAgICAgIGxldCBkZWNvZGVkOiBhbnk7XG4gICAgICB0cnkge1xuICAgICAgICBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAnZmFsbGJhY2stc2VjcmV0Jyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIud2FybignSW52YWxpZCBKV1QgdG9rZW4nLCB7IGVycm9yLCBwYXRoOiByZXEudXJsIH0pO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBcbiAgICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgdG9rZW4nIFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFkZWNvZGVkIHx8ICFkZWNvZGVkLmlkKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdJbnZhbGlkIHRva2VuIHBheWxvYWQnLCB7IHBhdGg6IHJlcS51cmwgfSk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IFxuICAgICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCB0b2tlbiBwYXlsb2FkJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBmcmVzaCB1c2VyIGRhdGEgZnJvbSBkYXRhYmFzZVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogZGVjb2RlZC5pZCB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICB1c2VybmFtZTogdHJ1ZSxcbiAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgcm9sZTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdVc2VyIG5vdCBmb3VuZCcsIHsgdXNlcklkOiBkZWNvZGVkLmlkLCBwYXRoOiByZXEudXJsIH0pO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBcbiAgICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB1c2VyIGdyb3Vwc1xuICAgICAgY29uc3QgdXNlckdyb3VwcyA9IGF3YWl0IHByaXNtYS51c2VyR3JvdXAuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyB1c2VySWQ6IHVzZXIuaWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGdyb3VwOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgbmFtZTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWF0ZSBhdXRoZW50aWNhdGVkIHJlcXVlc3Qgd2l0aCB1c2VyIGluZm9cbiAgICAgIGNvbnN0IGF1dGhlbnRpY2F0ZWRSZXEgPSByZXEgYXMgQXV0aGVudGljYXRlZFJlcXVlc3Q7XG4gICAgICBhdXRoZW50aWNhdGVkUmVxLnVzZXIgPSB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUgfHwgdW5kZWZpbmVkLFxuICAgICAgICBmaXJzdE5hbWU6IHVzZXIuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0TmFtZTogdXNlci5sYXN0TmFtZSxcbiAgICAgICAgcm9sZTogZ2V0RWZmZWN0aXZlUm9sZSh1c2VyLnJvbGUsIHVzZXJHcm91cHMubWFwKHVnID0+IHVnLmdyb3VwLm5hbWUpKSxcbiAgICAgICAgZ3JvdXBzOiB1c2VyR3JvdXBzLm1hcCh1ZyA9PiB1Zy5ncm91cC5uYW1lKVxuICAgICAgfTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ0F1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwnLCB7IFxuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsIFxuICAgICAgICB1c2VyUm9sZTogYXV0aGVudGljYXRlZFJlcS51c2VyLnJvbGUsXG4gICAgICAgIHBhdGg6IHJlcS51cmwgXG4gICAgICB9KTtcblxuICAgICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgaGFuZGxlclxuICAgICAgYXdhaXQgaGFuZGxlcihhdXRoZW50aWNhdGVkUmVxLCByZXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0F1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmUgZXJyb3InLCB7IGVycm9yLCBwYXRoOiByZXEudXJsIH0pO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXG4gICAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICAgICAgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZCcgXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG4iXSwibmFtZXMiOlsiand0IiwicHJpc21hIiwibG9nZ2VyIiwiZ2V0RWZmZWN0aXZlUm9sZSIsInVzZXJSb2xlIiwiYXV0aGVudGlrR3JvdXBzIiwiaW5jbHVkZXMiLCJpbmZvIiwib3JpZ2luYWxSb2xlIiwid2l0aEF1dGgiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhcnRzV2l0aCIsIndhcm4iLCJwYXRoIiwidXJsIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwibWVzc2FnZSIsInRva2VuIiwic3Vic3RyaW5nIiwiZGVjb2RlZCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiaWQiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwic2VsZWN0IiwiZW1haWwiLCJ1c2VybmFtZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicm9sZSIsInVzZXJJZCIsInVzZXJHcm91cHMiLCJ1c2VyR3JvdXAiLCJmaW5kTWFueSIsImluY2x1ZGUiLCJncm91cCIsIm5hbWUiLCJhdXRoZW50aWNhdGVkUmVxIiwidW5kZWZpbmVkIiwibWFwIiwidWciLCJncm91cHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/middleware/authMiddleware.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/corsMiddleware.ts":
/*!******************************************!*\
  !*** ./src/middleware/corsMiddleware.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withCORS: () => (/* binding */ withCORS)\n/* harmony export */ });\nfunction withCORS(handler) {\n    return async (req, res)=>{\n        // Set CORS headers\n        const allowedOrigin = process.env.FRONTEND_URL || \"http://localhost:3011\";\n        res.setHeader(\"Access-Control-Allow-Credentials\", \"true\");\n        res.setHeader(\"Access-Control-Allow-Origin\", allowedOrigin);\n        res.setHeader(\"Access-Control-Allow-Methods\", \"GET,OPTIONS,PATCH,DELETE,POST,PUT\");\n        res.setHeader(\"Access-Control-Allow-Headers\", \"X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Authorization\");\n        // Handle preflight request\n        if (req.method === \"OPTIONS\") {\n            res.status(200).end();\n            return;\n        }\n        // Call the original handler\n        await handler(req, res);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbWlkZGxld2FyZS9jb3JzTWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sU0FBU0EsU0FBU0MsT0FBcUU7SUFDNUYsT0FBTyxPQUFPQyxLQUFxQkM7UUFDakMsbUJBQW1CO1FBQ25CLE1BQU1DLGdCQUFnQkMsUUFBUUMsR0FBRyxDQUFDQyxZQUFZLElBQUk7UUFFbERKLElBQUlLLFNBQVMsQ0FBQyxvQ0FBb0M7UUFDbERMLElBQUlLLFNBQVMsQ0FBQywrQkFBK0JKO1FBQzdDRCxJQUFJSyxTQUFTLENBQUMsZ0NBQWdDO1FBQzlDTCxJQUFJSyxTQUFTLENBQUMsZ0NBQWdDO1FBRTlDLDJCQUEyQjtRQUMzQixJQUFJTixJQUFJTyxNQUFNLEtBQUssV0FBVztZQUM1Qk4sSUFBSU8sTUFBTSxDQUFDLEtBQUtDLEdBQUc7WUFDbkI7UUFDRjtRQUVBLDRCQUE0QjtRQUM1QixNQUFNVixRQUFRQyxLQUFLQztJQUNyQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvLi9zcmMvbWlkZGxld2FyZS9jb3JzTWlkZGxld2FyZS50cz8zYjljIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhDT1JTKGhhbmRsZXI6IChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4gUHJvbWlzZTx2b2lkPikge1xuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XG4gICAgLy8gU2V0IENPUlMgaGVhZGVyc1xuICAgIGNvbnN0IGFsbG93ZWRPcmlnaW4gPSBwcm9jZXNzLmVudi5GUk9OVEVORF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAxMSc7XG4gICAgXG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsIGFsbG93ZWRPcmlnaW4pO1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULE9QVElPTlMsUEFUQ0gsREVMRVRFLFBPU1QsUFVUJyk7XG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdYLUNTUkYtVG9rZW4sIFgtUmVxdWVzdGVkLVdpdGgsIEFjY2VwdCwgQWNjZXB0LVZlcnNpb24sIENvbnRlbnQtTGVuZ3RoLCBDb250ZW50LU1ENSwgQ29udGVudC1UeXBlLCBEYXRlLCBYLUFwaS1WZXJzaW9uLCBBdXRob3JpemF0aW9uJyk7XG5cbiAgICAvLyBIYW5kbGUgcHJlZmxpZ2h0IHJlcXVlc3RcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuZW5kKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgaGFuZGxlclxuICAgIGF3YWl0IGhhbmRsZXIocmVxLCByZXMpO1xuICB9O1xufVxuIl0sIm5hbWVzIjpbIndpdGhDT1JTIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImFsbG93ZWRPcmlnaW4iLCJwcm9jZXNzIiwiZW52IiwiRlJPTlRFTkRfVVJMIiwic2V0SGVhZGVyIiwibWV0aG9kIiwic3RhdHVzIiwiZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/middleware/corsMiddleware.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/errorHandler.ts":
/*!****************************************!*\
  !*** ./src/middleware/errorHandler.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Errors: () => (/* binding */ Errors),\n/* harmony export */   createError: () => (/* binding */ createError),\n/* harmony export */   handleApiError: () => (/* binding */ handleApiError),\n/* harmony export */   withErrorHandler: () => (/* binding */ withErrorHandler)\n/* harmony export */ });\nfunction createError(message, statusCode = 500, code) {\n    const error = new Error(message);\n    error.statusCode = statusCode;\n    error.code = code;\n    return error;\n}\nfunction handleApiError(error, req, res) {\n    console.error(\"API Error:\", {\n        error,\n        url: req.url,\n        method: req.method,\n        timestamp: new Date().toISOString()\n    });\n    if (error instanceof Error) {\n        const apiError = error;\n        if (apiError.statusCode) {\n            return res.status(apiError.statusCode).json({\n                success: false,\n                error: apiError.message,\n                code: apiError.code\n            });\n        }\n    }\n    // Default error response\n    return res.status(500).json({\n        success: false,\n        error: \"Internal server error\"\n    });\n}\nfunction withErrorHandler(handler) {\n    return async (req, res)=>{\n        try {\n            await handler(req, res);\n        } catch (error) {\n            handleApiError(error, req, res);\n        }\n    };\n}\n// Common error types\nconst Errors = {\n    NOT_FOUND: (resource)=>createError(`${resource} not found`, 404, \"NOT_FOUND\"),\n    UNAUTHORIZED: ()=>createError(\"Unauthorized\", 401, \"UNAUTHORIZED\"),\n    FORBIDDEN: ()=>createError(\"Forbidden\", 403, \"FORBIDDEN\"),\n    BAD_REQUEST: (message)=>createError(message, 400, \"BAD_REQUEST\"),\n    VALIDATION_ERROR: (message)=>createError(message, 400, \"VALIDATION_ERROR\"),\n    CONFLICT: (message)=>createError(message, 409, \"CONFLICT\"),\n    INTERNAL_ERROR: ()=>createError(\"Internal server error\", 500, \"INTERNAL_ERROR\")\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbWlkZGxld2FyZS9lcnJvckhhbmRsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQU9PLFNBQVNBLFlBQVlDLE9BQWUsRUFBRUMsYUFBcUIsR0FBRyxFQUFFQyxJQUFhO0lBQ2xGLE1BQU1DLFFBQVEsSUFBSUMsTUFBTUo7SUFDeEJHLE1BQU1GLFVBQVUsR0FBR0E7SUFDbkJFLE1BQU1ELElBQUksR0FBR0E7SUFDYixPQUFPQztBQUNUO0FBRU8sU0FBU0UsZUFDZEYsS0FBYyxFQUNkRyxHQUFtQixFQUNuQkMsR0FBb0I7SUFFcEJDLFFBQVFMLEtBQUssQ0FBQyxjQUFjO1FBQzFCQTtRQUNBTSxLQUFLSCxJQUFJRyxHQUFHO1FBQ1pDLFFBQVFKLElBQUlJLE1BQU07UUFDbEJDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztJQUNuQztJQUVBLElBQUlWLGlCQUFpQkMsT0FBTztRQUMxQixNQUFNVSxXQUFXWDtRQUVqQixJQUFJVyxTQUFTYixVQUFVLEVBQUU7WUFDdkIsT0FBT00sSUFBSVEsTUFBTSxDQUFDRCxTQUFTYixVQUFVLEVBQUVlLElBQUksQ0FBQztnQkFDMUNDLFNBQVM7Z0JBQ1RkLE9BQU9XLFNBQVNkLE9BQU87Z0JBQ3ZCRSxNQUFNWSxTQUFTWixJQUFJO1lBQ3JCO1FBQ0Y7SUFDRjtJQUVBLHlCQUF5QjtJQUN6QixPQUFPSyxJQUFJUSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1FBQzFCQyxTQUFTO1FBQ1RkLE9BQU87SUFDVDtBQUNGO0FBRU8sU0FBU2UsaUJBQ2RDLE9BQXFFO0lBRXJFLE9BQU8sT0FBT2IsS0FBcUJDO1FBQ2pDLElBQUk7WUFDRixNQUFNWSxRQUFRYixLQUFLQztRQUNyQixFQUFFLE9BQU9KLE9BQU87WUFDZEUsZUFBZUYsT0FBT0csS0FBS0M7UUFDN0I7SUFDRjtBQUNGO0FBRUEscUJBQXFCO0FBQ2QsTUFBTWEsU0FBUztJQUNwQkMsV0FBVyxDQUFDQyxXQUFxQnZCLFlBQVksQ0FBQyxFQUFFdUIsU0FBUyxVQUFVLENBQUMsRUFBRSxLQUFLO0lBQzNFQyxjQUFjLElBQU14QixZQUFZLGdCQUFnQixLQUFLO0lBQ3JEeUIsV0FBVyxJQUFNekIsWUFBWSxhQUFhLEtBQUs7SUFDL0MwQixhQUFhLENBQUN6QixVQUFvQkQsWUFBWUMsU0FBUyxLQUFLO0lBQzVEMEIsa0JBQWtCLENBQUMxQixVQUFvQkQsWUFBWUMsU0FBUyxLQUFLO0lBQ2pFMkIsVUFBVSxDQUFDM0IsVUFBb0JELFlBQVlDLFNBQVMsS0FBSztJQUN6RDRCLGdCQUFnQixJQUFNN0IsWUFBWSx5QkFBeUIsS0FBSztBQUNsRSxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvLi9zcmMvbWlkZGxld2FyZS9lcnJvckhhbmRsZXIudHM/N2E4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFwaUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gIHN0YXR1c0NvZGU/OiBudW1iZXI7XHJcbiAgY29kZT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1lc3NhZ2U6IHN0cmluZywgc3RhdHVzQ29kZTogbnVtYmVyID0gNTAwLCBjb2RlPzogc3RyaW5nKTogQXBpRXJyb3Ige1xyXG4gIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpIGFzIEFwaUVycm9yO1xyXG4gIGVycm9yLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xyXG4gIGVycm9yLmNvZGUgPSBjb2RlO1xyXG4gIHJldHVybiBlcnJvcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUFwaUVycm9yKFxyXG4gIGVycm9yOiB1bmtub3duLFxyXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXHJcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2VcclxuKSB7XHJcbiAgY29uc29sZS5lcnJvcignQVBJIEVycm9yOicsIHtcclxuICAgIGVycm9yLFxyXG4gICAgdXJsOiByZXEudXJsLFxyXG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxyXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICB9KTtcclxuXHJcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgIGNvbnN0IGFwaUVycm9yID0gZXJyb3IgYXMgQXBpRXJyb3I7XHJcbiAgICBcclxuICAgIGlmIChhcGlFcnJvci5zdGF0dXNDb2RlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKGFwaUVycm9yLnN0YXR1c0NvZGUpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBhcGlFcnJvci5tZXNzYWdlLFxyXG4gICAgICAgIGNvZGU6IGFwaUVycm9yLmNvZGVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBEZWZhdWx0IGVycm9yIHJlc3BvbnNlXHJcbiAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoRXJyb3JIYW5kbGVyKFxyXG4gIGhhbmRsZXI6IChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4gUHJvbWlzZTx2b2lkPlxyXG4pIHtcclxuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGhhbmRsZUFwaUVycm9yKGVycm9yLCByZXEsIHJlcyk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5cclxuLy8gQ29tbW9uIGVycm9yIHR5cGVzXHJcbmV4cG9ydCBjb25zdCBFcnJvcnMgPSB7XHJcbiAgTk9UX0ZPVU5EOiAocmVzb3VyY2U6IHN0cmluZykgPT4gY3JlYXRlRXJyb3IoYCR7cmVzb3VyY2V9IG5vdCBmb3VuZGAsIDQwNCwgJ05PVF9GT1VORCcpLFxyXG4gIFVOQVVUSE9SSVpFRDogKCkgPT4gY3JlYXRlRXJyb3IoJ1VuYXV0aG9yaXplZCcsIDQwMSwgJ1VOQVVUSE9SSVpFRCcpLFxyXG4gIEZPUkJJRERFTjogKCkgPT4gY3JlYXRlRXJyb3IoJ0ZvcmJpZGRlbicsIDQwMywgJ0ZPUkJJRERFTicpLFxyXG4gIEJBRF9SRVFVRVNUOiAobWVzc2FnZTogc3RyaW5nKSA9PiBjcmVhdGVFcnJvcihtZXNzYWdlLCA0MDAsICdCQURfUkVRVUVTVCcpLFxyXG4gIFZBTElEQVRJT05fRVJST1I6IChtZXNzYWdlOiBzdHJpbmcpID0+IGNyZWF0ZUVycm9yKG1lc3NhZ2UsIDQwMCwgJ1ZBTElEQVRJT05fRVJST1InKSxcclxuICBDT05GTElDVDogKG1lc3NhZ2U6IHN0cmluZykgPT4gY3JlYXRlRXJyb3IobWVzc2FnZSwgNDA5LCAnQ09ORkxJQ1QnKSxcclxuICBJTlRFUk5BTF9FUlJPUjogKCkgPT4gY3JlYXRlRXJyb3IoJ0ludGVybmFsIHNlcnZlciBlcnJvcicsIDUwMCwgJ0lOVEVSTkFMX0VSUk9SJylcclxufTtcclxuIl0sIm5hbWVzIjpbImNyZWF0ZUVycm9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJjb2RlIiwiZXJyb3IiLCJFcnJvciIsImhhbmRsZUFwaUVycm9yIiwicmVxIiwicmVzIiwiY29uc29sZSIsInVybCIsIm1ldGhvZCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImFwaUVycm9yIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJ3aXRoRXJyb3JIYW5kbGVyIiwiaGFuZGxlciIsIkVycm9ycyIsIk5PVF9GT1VORCIsInJlc291cmNlIiwiVU5BVVRIT1JJWkVEIiwiRk9SQklEREVOIiwiQkFEX1JFUVVFU1QiLCJWQUxJREFUSU9OX0VSUk9SIiwiQ09ORkxJQ1QiLCJJTlRFUk5BTF9FUlJPUiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/middleware/errorHandler.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/permissionMiddleware.ts":
/*!************************************************!*\
  !*** ./src/middleware/permissionMiddleware.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withPermissions: () => (/* binding */ withPermissions)\n/* harmony export */ });\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/logger */ \"(api)/./src/utils/logger.ts\");\n\nfunction withPermissions(handler, requiredPermissions) {\n    return async (req, res)=>{\n        try {\n            // Cast to PermissionRequest since this middleware should be used after withAuth\n            const permissionReq = req;\n            if (!permissionReq.user) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn(\"Permission check attempted without authentication\", {\n                    path: req.url,\n                    method: req.method\n                });\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"Authentication required\"\n                });\n            }\n            // Get required permissions (either static array or dynamic function)\n            const permissions = typeof requiredPermissions === \"function\" ? requiredPermissions(req) : requiredPermissions;\n            // Check if user has required permissions\n            const hasPermission = await checkPermissions(permissionReq.user, permissions);\n            if (!hasPermission) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn(\"Insufficient permissions\", {\n                    userId: permissionReq.user.id,\n                    userRole: permissionReq.user.role,\n                    requiredPermissions: permissions,\n                    path: req.url\n                });\n                return res.status(403).json({\n                    error: \"Forbidden\",\n                    message: \"Insufficient permissions for this operation\"\n                });\n            }\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Permission check passed\", {\n                userId: permissionReq.user.id,\n                requiredPermissions: permissions,\n                path: req.url\n            });\n            // Call the original handler\n            await handler(permissionReq, res);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Permission middleware error\", {\n                error,\n                path: req.url\n            });\n            return res.status(500).json({\n                error: \"Internal server error\",\n                message: \"Permission check failed\"\n            });\n        }\n    };\n}\nasync function checkPermissions(user, requiredPermissions) {\n    // For now, implement a simple role-based permission system\n    // This can be enhanced later with a more sophisticated permission system\n    const rolePermissions = {\n        \"ADMIN\": [\n            \"users:read\",\n            \"users:create\",\n            \"users:update\",\n            \"users:delete\",\n            \"groups:read\",\n            \"groups:create\",\n            \"groups:update\",\n            \"groups:delete\",\n            \"events:read\",\n            \"events:create\",\n            \"events:update\",\n            \"events:delete\",\n            \"teams:read\",\n            \"teams:create\",\n            \"teams:update\",\n            \"teams:delete\",\n            \"tasks:read\",\n            \"tasks:create\",\n            \"tasks:update\",\n            \"tasks:delete\"\n        ],\n        \"EXEC_BOARD\": [\n            \"users:read\",\n            \"users:create\",\n            \"users:update\",\n            \"groups:read\",\n            \"groups:create\",\n            \"groups:update\",\n            \"events:read\",\n            \"events:create\",\n            \"events:update\",\n            \"teams:read\",\n            \"teams:create\",\n            \"teams:update\",\n            \"tasks:read\",\n            \"tasks:create\",\n            \"tasks:update\"\n        ],\n        \"MEMBER\": [\n            \"users:read\",\n            \"groups:read\",\n            \"events:read\",\n            \"teams:read\",\n            \"tasks:read\"\n        ]\n    };\n    // Check if user has tech-team group in authentikGroups (OIDC groups)\n    // If they do, give them admin permissions regardless of their role\n    let effectiveRole = user.role;\n    if (user.authentikGroups && Array.isArray(user.authentikGroups)) {\n        if (user.authentikGroups.includes(\"tech-team\")) {\n            effectiveRole = \"ADMIN\";\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"User has tech-team group, elevating to admin permissions\", {\n                userId: user.id,\n                originalRole: user.role,\n                authentikGroups: user.authentikGroups\n            });\n        }\n    }\n    const userPermissions = rolePermissions[effectiveRole] || [];\n    // Check if user has all required permissions\n    return requiredPermissions.every((permission)=>userPermissions.includes(permission));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbWlkZGxld2FyZS9wZXJtaXNzaW9uTWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUV5QztBQU1sQyxTQUFTQyxnQkFDZEMsT0FBd0UsRUFDeEVDLG1CQUFtRTtJQUVuRSxPQUFPLE9BQU9DLEtBQXFCQztRQUNqQyxJQUFJO1lBQ0YsZ0ZBQWdGO1lBQ2hGLE1BQU1DLGdCQUFnQkY7WUFFdEIsSUFBSSxDQUFDRSxjQUFjQyxJQUFJLEVBQUU7Z0JBQ3ZCUCxpREFBTUEsQ0FBQ1EsSUFBSSxDQUFDLHFEQUFxRDtvQkFDL0RDLE1BQU1MLElBQUlNLEdBQUc7b0JBQ2JDLFFBQVFQLElBQUlPLE1BQU07Z0JBQ3BCO2dCQUVBLE9BQU9OLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQzFCQyxPQUFPO29CQUNQQyxTQUFTO2dCQUNYO1lBQ0Y7WUFFQSxxRUFBcUU7WUFDckUsTUFBTUMsY0FBYyxPQUFPYix3QkFBd0IsYUFDL0NBLG9CQUFvQkMsT0FDcEJEO1lBRUoseUNBQXlDO1lBQ3pDLE1BQU1jLGdCQUFnQixNQUFNQyxpQkFBaUJaLGNBQWNDLElBQUksRUFBRVM7WUFFakUsSUFBSSxDQUFDQyxlQUFlO2dCQUNsQmpCLGlEQUFNQSxDQUFDUSxJQUFJLENBQUMsNEJBQTRCO29CQUN0Q1csUUFBUWIsY0FBY0MsSUFBSSxDQUFDYSxFQUFFO29CQUM3QkMsVUFBVWYsY0FBY0MsSUFBSSxDQUFDZSxJQUFJO29CQUNqQ25CLHFCQUFxQmE7b0JBQ3JCUCxNQUFNTCxJQUFJTSxHQUFHO2dCQUNmO2dCQUVBLE9BQU9MLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQzFCQyxPQUFPO29CQUNQQyxTQUFTO2dCQUNYO1lBQ0Y7WUFFQWYsaURBQU1BLENBQUN1QixJQUFJLENBQUMsMkJBQTJCO2dCQUNyQ0osUUFBUWIsY0FBY0MsSUFBSSxDQUFDYSxFQUFFO2dCQUM3QmpCLHFCQUFxQmE7Z0JBQ3JCUCxNQUFNTCxJQUFJTSxHQUFHO1lBQ2Y7WUFFQSw0QkFBNEI7WUFDNUIsTUFBTVIsUUFBUUksZUFBZUQ7UUFDL0IsRUFBRSxPQUFPUyxPQUFPO1lBQ2RkLGlEQUFNQSxDQUFDYyxLQUFLLENBQUMsK0JBQStCO2dCQUFFQTtnQkFBT0wsTUFBTUwsSUFBSU0sR0FBRztZQUFDO1lBQ25FLE9BQU9MLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxPQUFPO2dCQUNQQyxTQUFTO1lBQ1g7UUFDRjtJQUNGO0FBQ0Y7QUFFQSxlQUFlRyxpQkFBaUJYLElBQVMsRUFBRUosbUJBQTZCO0lBQ3RFLDJEQUEyRDtJQUMzRCx5RUFBeUU7SUFFekUsTUFBTXFCLGtCQUE0QztRQUNoRCxTQUFTO1lBQ1A7WUFBYztZQUFnQjtZQUFnQjtZQUM5QztZQUFlO1lBQWlCO1lBQWlCO1lBQ2pEO1lBQWU7WUFBaUI7WUFBaUI7WUFDakQ7WUFBYztZQUFnQjtZQUFnQjtZQUM5QztZQUFjO1lBQWdCO1lBQWdCO1NBQy9DO1FBQ0QsY0FBYztZQUNaO1lBQWM7WUFBZ0I7WUFDOUI7WUFBZTtZQUFpQjtZQUNoQztZQUFlO1lBQWlCO1lBQ2hDO1lBQWM7WUFBZ0I7WUFDOUI7WUFBYztZQUFnQjtTQUMvQjtRQUNELFVBQVU7WUFDUjtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7SUFDSDtJQUVBLHFFQUFxRTtJQUNyRSxtRUFBbUU7SUFDbkUsSUFBSUMsZ0JBQWdCbEIsS0FBS2UsSUFBSTtJQUM3QixJQUFJZixLQUFLbUIsZUFBZSxJQUFJQyxNQUFNQyxPQUFPLENBQUNyQixLQUFLbUIsZUFBZSxHQUFHO1FBQy9ELElBQUluQixLQUFLbUIsZUFBZSxDQUFDRyxRQUFRLENBQUMsY0FBYztZQUM5Q0osZ0JBQWdCO1lBQ2hCekIsaURBQU1BLENBQUN1QixJQUFJLENBQUMsNERBQTREO2dCQUN0RUosUUFBUVosS0FBS2EsRUFBRTtnQkFDZlUsY0FBY3ZCLEtBQUtlLElBQUk7Z0JBQ3ZCSSxpQkFBaUJuQixLQUFLbUIsZUFBZTtZQUN2QztRQUNGO0lBQ0Y7SUFFQSxNQUFNSyxrQkFBa0JQLGVBQWUsQ0FBQ0MsY0FBYyxJQUFJLEVBQUU7SUFFNUQsNkNBQTZDO0lBQzdDLE9BQU90QixvQkFBb0I2QixLQUFLLENBQUNDLENBQUFBLGFBQWNGLGdCQUFnQkYsUUFBUSxDQUFDSTtBQUMxRSIsInNvdXJjZXMiOlsid2VicGFjazovL21ybTM2MC1iYWNrZW5kLy4vc3JjL21pZGRsZXdhcmUvcGVybWlzc2lvbk1pZGRsZXdhcmUudHM/ZjgxNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBBdXRoZW50aWNhdGVkUmVxdWVzdCB9IGZyb20gJy4vYXV0aE1pZGRsZXdhcmUnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBQZXJtaXNzaW9uUmVxdWVzdCBleHRlbmRzIEF1dGhlbnRpY2F0ZWRSZXF1ZXN0IHtcbiAgLy8gRXh0ZW5kcyBBdXRoZW50aWNhdGVkUmVxdWVzdCB3aXRoIHVzZXIgaW5mb1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2l0aFBlcm1pc3Npb25zKFxuICBoYW5kbGVyOiAocmVxOiBQZXJtaXNzaW9uUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IFByb21pc2U8dm9pZD4sXG4gIHJlcXVpcmVkUGVybWlzc2lvbnM6IHN0cmluZ1tdIHwgKChyZXE6IE5leHRBcGlSZXF1ZXN0KSA9PiBzdHJpbmdbXSlcbikge1xuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENhc3QgdG8gUGVybWlzc2lvblJlcXVlc3Qgc2luY2UgdGhpcyBtaWRkbGV3YXJlIHNob3VsZCBiZSB1c2VkIGFmdGVyIHdpdGhBdXRoXG4gICAgICBjb25zdCBwZXJtaXNzaW9uUmVxID0gcmVxIGFzIFBlcm1pc3Npb25SZXF1ZXN0O1xuXG4gICAgICBpZiAoIXBlcm1pc3Npb25SZXEudXNlcikge1xuICAgICAgICBsb2dnZXIud2FybignUGVybWlzc2lvbiBjaGVjayBhdHRlbXB0ZWQgd2l0aG91dCBhdXRoZW50aWNhdGlvbicsIHsgXG4gICAgICAgICAgcGF0aDogcmVxLnVybCwgXG4gICAgICAgICAgbWV0aG9kOiByZXEubWV0aG9kIFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IFxuICAgICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcbiAgICAgICAgICBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHJlcXVpcmVkIHBlcm1pc3Npb25zIChlaXRoZXIgc3RhdGljIGFycmF5IG9yIGR5bmFtaWMgZnVuY3Rpb24pXG4gICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IHR5cGVvZiByZXF1aXJlZFBlcm1pc3Npb25zID09PSAnZnVuY3Rpb24nIFxuICAgICAgICA/IHJlcXVpcmVkUGVybWlzc2lvbnMocmVxKSBcbiAgICAgICAgOiByZXF1aXJlZFBlcm1pc3Npb25zO1xuXG4gICAgICAvLyBDaGVjayBpZiB1c2VyIGhhcyByZXF1aXJlZCBwZXJtaXNzaW9uc1xuICAgICAgY29uc3QgaGFzUGVybWlzc2lvbiA9IGF3YWl0IGNoZWNrUGVybWlzc2lvbnMocGVybWlzc2lvblJlcS51c2VyLCBwZXJtaXNzaW9ucyk7XG4gICAgICBcbiAgICAgIGlmICghaGFzUGVybWlzc2lvbikge1xuICAgICAgICBsb2dnZXIud2FybignSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zJywgeyBcbiAgICAgICAgICB1c2VySWQ6IHBlcm1pc3Npb25SZXEudXNlci5pZCwgXG4gICAgICAgICAgdXNlclJvbGU6IHBlcm1pc3Npb25SZXEudXNlci5yb2xlLFxuICAgICAgICAgIHJlcXVpcmVkUGVybWlzc2lvbnM6IHBlcm1pc3Npb25zLFxuICAgICAgICAgIHBhdGg6IHJlcS51cmwgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgXG4gICAgICAgICAgZXJyb3I6ICdGb3JiaWRkZW4nLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgZm9yIHRoaXMgb3BlcmF0aW9uJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdQZXJtaXNzaW9uIGNoZWNrIHBhc3NlZCcsIHsgXG4gICAgICAgIHVzZXJJZDogcGVybWlzc2lvblJlcS51c2VyLmlkLCBcbiAgICAgICAgcmVxdWlyZWRQZXJtaXNzaW9uczogcGVybWlzc2lvbnMsXG4gICAgICAgIHBhdGg6IHJlcS51cmwgXG4gICAgICB9KTtcblxuICAgICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgaGFuZGxlclxuICAgICAgYXdhaXQgaGFuZGxlcihwZXJtaXNzaW9uUmVxLCByZXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1Blcm1pc3Npb24gbWlkZGxld2FyZSBlcnJvcicsIHsgZXJyb3IsIHBhdGg6IHJlcS51cmwgfSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxuICAgICAgICBtZXNzYWdlOiAnUGVybWlzc2lvbiBjaGVjayBmYWlsZWQnIFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBjaGVja1Blcm1pc3Npb25zKHVzZXI6IGFueSwgcmVxdWlyZWRQZXJtaXNzaW9uczogc3RyaW5nW10pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgLy8gRm9yIG5vdywgaW1wbGVtZW50IGEgc2ltcGxlIHJvbGUtYmFzZWQgcGVybWlzc2lvbiBzeXN0ZW1cbiAgLy8gVGhpcyBjYW4gYmUgZW5oYW5jZWQgbGF0ZXIgd2l0aCBhIG1vcmUgc29waGlzdGljYXRlZCBwZXJtaXNzaW9uIHN5c3RlbVxuICBcbiAgY29uc3Qgcm9sZVBlcm1pc3Npb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XG4gICAgJ0FETUlOJzogW1xuICAgICAgJ3VzZXJzOnJlYWQnLCAndXNlcnM6Y3JlYXRlJywgJ3VzZXJzOnVwZGF0ZScsICd1c2VyczpkZWxldGUnLFxuICAgICAgJ2dyb3VwczpyZWFkJywgJ2dyb3VwczpjcmVhdGUnLCAnZ3JvdXBzOnVwZGF0ZScsICdncm91cHM6ZGVsZXRlJyxcbiAgICAgICdldmVudHM6cmVhZCcsICdldmVudHM6Y3JlYXRlJywgJ2V2ZW50czp1cGRhdGUnLCAnZXZlbnRzOmRlbGV0ZScsXG4gICAgICAndGVhbXM6cmVhZCcsICd0ZWFtczpjcmVhdGUnLCAndGVhbXM6dXBkYXRlJywgJ3RlYW1zOmRlbGV0ZScsXG4gICAgICAndGFza3M6cmVhZCcsICd0YXNrczpjcmVhdGUnLCAndGFza3M6dXBkYXRlJywgJ3Rhc2tzOmRlbGV0ZSdcbiAgICBdLFxuICAgICdFWEVDX0JPQVJEJzogW1xuICAgICAgJ3VzZXJzOnJlYWQnLCAndXNlcnM6Y3JlYXRlJywgJ3VzZXJzOnVwZGF0ZScsXG4gICAgICAnZ3JvdXBzOnJlYWQnLCAnZ3JvdXBzOmNyZWF0ZScsICdncm91cHM6dXBkYXRlJyxcbiAgICAgICdldmVudHM6cmVhZCcsICdldmVudHM6Y3JlYXRlJywgJ2V2ZW50czp1cGRhdGUnLFxuICAgICAgJ3RlYW1zOnJlYWQnLCAndGVhbXM6Y3JlYXRlJywgJ3RlYW1zOnVwZGF0ZScsXG4gICAgICAndGFza3M6cmVhZCcsICd0YXNrczpjcmVhdGUnLCAndGFza3M6dXBkYXRlJ1xuICAgIF0sXG4gICAgJ01FTUJFUic6IFtcbiAgICAgICd1c2VyczpyZWFkJyxcbiAgICAgICdncm91cHM6cmVhZCcsXG4gICAgICAnZXZlbnRzOnJlYWQnLFxuICAgICAgJ3RlYW1zOnJlYWQnLFxuICAgICAgJ3Rhc2tzOnJlYWQnXG4gICAgXVxuICB9O1xuXG4gIC8vIENoZWNrIGlmIHVzZXIgaGFzIHRlY2gtdGVhbSBncm91cCBpbiBhdXRoZW50aWtHcm91cHMgKE9JREMgZ3JvdXBzKVxuICAvLyBJZiB0aGV5IGRvLCBnaXZlIHRoZW0gYWRtaW4gcGVybWlzc2lvbnMgcmVnYXJkbGVzcyBvZiB0aGVpciByb2xlXG4gIGxldCBlZmZlY3RpdmVSb2xlID0gdXNlci5yb2xlO1xuICBpZiAodXNlci5hdXRoZW50aWtHcm91cHMgJiYgQXJyYXkuaXNBcnJheSh1c2VyLmF1dGhlbnRpa0dyb3VwcykpIHtcbiAgICBpZiAodXNlci5hdXRoZW50aWtHcm91cHMuaW5jbHVkZXMoJ3RlY2gtdGVhbScpKSB7XG4gICAgICBlZmZlY3RpdmVSb2xlID0gJ0FETUlOJztcbiAgICAgIGxvZ2dlci5pbmZvKCdVc2VyIGhhcyB0ZWNoLXRlYW0gZ3JvdXAsIGVsZXZhdGluZyB0byBhZG1pbiBwZXJtaXNzaW9ucycsIHtcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICBvcmlnaW5hbFJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgYXV0aGVudGlrR3JvdXBzOiB1c2VyLmF1dGhlbnRpa0dyb3Vwc1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgdXNlclBlcm1pc3Npb25zID0gcm9sZVBlcm1pc3Npb25zW2VmZmVjdGl2ZVJvbGVdIHx8IFtdO1xuICBcbiAgLy8gQ2hlY2sgaWYgdXNlciBoYXMgYWxsIHJlcXVpcmVkIHBlcm1pc3Npb25zXG4gIHJldHVybiByZXF1aXJlZFBlcm1pc3Npb25zLmV2ZXJ5KHBlcm1pc3Npb24gPT4gdXNlclBlcm1pc3Npb25zLmluY2x1ZGVzKHBlcm1pc3Npb24pKTtcbn1cbiJdLCJuYW1lcyI6WyJsb2dnZXIiLCJ3aXRoUGVybWlzc2lvbnMiLCJoYW5kbGVyIiwicmVxdWlyZWRQZXJtaXNzaW9ucyIsInJlcSIsInJlcyIsInBlcm1pc3Npb25SZXEiLCJ1c2VyIiwid2FybiIsInBhdGgiLCJ1cmwiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJtZXNzYWdlIiwicGVybWlzc2lvbnMiLCJoYXNQZXJtaXNzaW9uIiwiY2hlY2tQZXJtaXNzaW9ucyIsInVzZXJJZCIsImlkIiwidXNlclJvbGUiLCJyb2xlIiwiaW5mbyIsInJvbGVQZXJtaXNzaW9ucyIsImVmZmVjdGl2ZVJvbGUiLCJhdXRoZW50aWtHcm91cHMiLCJBcnJheSIsImlzQXJyYXkiLCJpbmNsdWRlcyIsIm9yaWdpbmFsUm9sZSIsInVzZXJQZXJtaXNzaW9ucyIsImV2ZXJ5IiwicGVybWlzc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/middleware/permissionMiddleware.ts\n");

/***/ }),

/***/ "(api)/./src/models/prismaClient.ts":
/*!************************************!*\
  !*** ./src/models/prismaClient.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = globalThis.__prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) {\n    globalThis.__prisma = prisma;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbW9kZWxzL3ByaXNtYUNsaWVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThDO0FBTXZDLE1BQU1DLFNBQVNDLFdBQVdDLFFBQVEsSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUM1REksS0FBS0MsS0FBeUIsR0FBZ0I7UUFBQztRQUFTO1FBQVM7S0FBTyxHQUFHLENBQVM7QUFDdEYsR0FBRztBQUVILElBQUlBLElBQXlCLEVBQWM7SUFDekNILFdBQVdDLFFBQVEsR0FBR0Y7QUFDeEI7QUFFQSxpRUFBZUEsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21ybTM2MC1iYWNrZW5kLy4vc3JjL21vZGVscy9wcmlzbWFDbGllbnQudHM/N2M1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XHJcblxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgdmFyIF9fcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxUaGlzLl9fcHJpc21hIHx8IG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBbJ3F1ZXJ5JywgJ2Vycm9yJywgJ3dhcm4nXSA6IFsnZXJyb3InXSxcclxufSk7XHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gIGdsb2JhbFRoaXMuX19wcmlzbWEgPSBwcmlzbWE7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHByaXNtYTtcclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsInByaXNtYSIsImdsb2JhbFRoaXMiLCJfX3ByaXNtYSIsImxvZyIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/models/prismaClient.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/teams/index.ts":
/*!**************************************!*\
  !*** ./src/pages/api/teams/index.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _managers_teamManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../managers/teamManager */ \"(api)/./src/managers/teamManager.ts\");\n/* harmony import */ var _managers_taskManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/managers/taskManager */ \"(api)/./src/managers/taskManager.ts\");\n/* harmony import */ var _middleware_corsMiddleware__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../middleware/corsMiddleware */ \"(api)/./src/middleware/corsMiddleware.ts\");\n/* harmony import */ var _middleware_authMiddleware__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../middleware/authMiddleware */ \"(api)/./src/middleware/authMiddleware.ts\");\n/* harmony import */ var _middleware_permissionMiddleware__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../middleware/permissionMiddleware */ \"(api)/./src/middleware/permissionMiddleware.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/logger */ \"(api)/./src/utils/logger.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__]);\nzod__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n// Validation schemas\nconst createTeamSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1).max(100),\n    description: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    teamType: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n        \"COMPETITION\",\n        \"DEVELOPMENT\"\n    ]),\n    competitionSubtype: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n        \"BLUE\",\n        \"RED\",\n        \"CTF\"\n    ]).optional(),\n    groupId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    memberIds: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional(),\n    parentTeamId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n});\nconst listTeamsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    page: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().transform((val)=>parseInt(val || \"1\")),\n    limit: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().transform((val)=>parseInt(val || \"20\")),\n    search: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    teamType: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n        \"COMPETITION\",\n        \"DEVELOPMENT\"\n    ]).optional(),\n    competitionSubtype: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n        \"BLUE\",\n        \"RED\",\n        \"CTF\"\n    ]).optional(),\n    groupId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    parentTeamId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n});\n/**\n * @swagger\n * /api/teams:\n *   get:\n *     summary: List teams with filtering and pagination\n *     tags: [Teams]\n *     security:\n *       - sessionAuth: []\n *     parameters:\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           default: 1\n *         description: Page number for pagination\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           default: 20\n *         description: Number of teams per page\n *       - in: query\n *         name: search\n *         schema:\n *           type: string\n *         description: Search term for team name\n *       - in: query\n *         name: teamType\n *         schema:\n *           type: string\n *           enum: [COMPETITION, DEVELOPMENT]\n *         description: Filter by team type\n *       - in: query\n *         name: competitionSubtype\n *         schema:\n *           type: string\n *           enum: [BLUE, RED, CTF]\n *         description: Filter by competition subtype\n *       - in: query\n *         name: groupId\n *         schema:\n *           type: string\n *         description: Filter by group\n *       - in: query\n *         name: parentTeamId\n *         schema:\n *           type: string\n *         description: Filter by parent team\n *     responses:\n *       200:\n *         description: List of teams\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 teams:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/Team'\n *                 pagination:\n *                   type: object\n *                   properties:\n *                     page:\n *                       type: integer\n *                     limit:\n *                       type: integer\n *                     total:\n *                       type: integer\n *                     totalPages:\n *                       type: integer\n *       401:\n *         description: Unauthorized\n *       403:\n *         description: Forbidden - insufficient permissions\n *       500:\n *         description: Internal server error\n *   post:\n *     summary: Create a new team\n *     tags: [Teams]\n *     security:\n *       - sessionAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - teamType\n *             properties:\n *               name:\n *                 type: string\n *                 minLength: 1\n *                 maxLength: 100\n *               description:\n *                 type: string\n *               teamType:\n *                 type: string\n *                 enum: [COMPETITION, DEVELOPMENT]\n *               competitionSubtype:\n *                 type: string\n *                 enum: [BLUE, RED, CTF]\n *               groupId:\n *                 type: string\n *               memberIds:\n *                 type: array\n *                 items:\n *                   type: string\n *               parentTeamId:\n *                 type: string\n *     responses:\n *       201:\n *         description: Team created successfully\n *         content:\n *           application/json:\n *             schema:\n *               $ref: '#/components/schemas/Team'\n *       400:\n *         description: Bad request - validation error\n *       401:\n *         description: Unauthorized\n *       403:\n *         description: Forbidden - insufficient permissions\n *       500:\n *         description: Internal server error\n */ async function handler(req, res) {\n    const teamManager = new _managers_teamManager__WEBPACK_IMPORTED_MODULE_1__.TeamManager();\n    const taskManager = new _managers_taskManager__WEBPACK_IMPORTED_MODULE_2__.TaskManager();\n    try {\n        if (req.method === \"GET\") {\n            // List teams\n            const queryParams = listTeamsSchema.parse(req.query);\n            const result = await teamManager.getTeams({\n                page: queryParams.page,\n                limit: queryParams.limit,\n                search: queryParams.search,\n                type: queryParams.teamType,\n                groupId: queryParams.groupId\n            });\n            res.status(200).json(result);\n        } else if (req.method === \"POST\") {\n            // Create team\n            const body = createTeamSchema.parse(req.body);\n            // map fields to expected types\n            const team = await teamManager.createTeam({\n                name: body.name,\n                description: body.description,\n                type: body.teamType,\n                subtype: body.competitionSubtype,\n                parentTeamId: body.parentTeamId,\n                groupId: body.groupId\n            });\n            // Enqueue simulated provisioning task with subtasks linked to this team\n            const subtaskNames = [\n                \"Validate inputs and member eligibility\",\n                \"Create internal records\",\n                \"Setup Wiki (simulated)\",\n                \"Setup GitHub (simulated)\",\n                \"Setup Nextcloud (simulated)\",\n                \"Create Discord channel (simulated)\",\n                \"Sync Authentik groups (simulated)\"\n            ];\n            await taskManager.enqueueProvisionTask({\n                provisionType: \"TEAM\",\n                name: `Provision resources for team ${team.name}`,\n                description: \"Simulated external resource setup\",\n                entityType: \"TEAM\",\n                entityId: team.id,\n                subtaskNames,\n                payload: {\n                    teamId: team.id\n                }\n            });\n            res.status(201).json(team);\n        } else {\n            res.status(405).json({\n                error: \"Method not allowed\"\n            });\n        }\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_0__.z.ZodError) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_6__.logger.warn(\"Validation error in teams API\", {\n                errors: error.errors\n            });\n            return res.status(400).json({\n                error: \"Validation error\",\n                details: error.errors\n            });\n        }\n        _utils_logger__WEBPACK_IMPORTED_MODULE_6__.logger.error(\"Error in teams API\", {\n            error,\n            method: req.method\n        });\n        res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n// Apply middleware: CORS, authentication then permissions\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_middleware_corsMiddleware__WEBPACK_IMPORTED_MODULE_3__.withCORS)((0,_middleware_authMiddleware__WEBPACK_IMPORTED_MODULE_4__.withAuth)((0,_middleware_permissionMiddleware__WEBPACK_IMPORTED_MODULE_5__.withPermissions)(handler, [\n    \"teams:read\",\n    \"teams:create\"\n]))));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG9FQUFRQSxDQUNyQkMsb0VBQVFBLENBQ05DLGlGQUFlQSxDQUNid0IsU0FDQTtJQUFDO0lBQWM7Q0FBZSxLQUdsQyIsInNvdXJjZXMiOlsid2VicGFjazovL21ybTM2MC1iYWNrZW5kLy4vc3JjL3BhZ2VzL2FwaS90ZWFtcy9pbmRleC50cz9jNTZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnLi4vLi4vLi4vbW9kZWxzL3ByaXNtYUNsaWVudCc7XG5pbXBvcnQgeyBUZWFtTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL3RlYW1NYW5hZ2VyJztcbmltcG9ydCB7IFRhc2tNYW5hZ2VyIH0gZnJvbSAnQC9tYW5hZ2Vycy90YXNrTWFuYWdlcic7XG5pbXBvcnQgeyB3aXRoQ09SUyB9IGZyb20gJy4uLy4uLy4uL21pZGRsZXdhcmUvY29yc01pZGRsZXdhcmUnO1xuaW1wb3J0IHsgd2l0aEF1dGggfSBmcm9tICcuLi8uLi8uLi9taWRkbGV3YXJlL2F1dGhNaWRkbGV3YXJlJztcbmltcG9ydCB7IHdpdGhQZXJtaXNzaW9ucyB9IGZyb20gJy4uLy4uLy4uL21pZGRsZXdhcmUvcGVybWlzc2lvbk1pZGRsZXdhcmUnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvbG9nZ2VyJztcblxuLy8gVmFsaWRhdGlvbiBzY2hlbWFzXG5jb25zdCBjcmVhdGVUZWFtU2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLm1pbigxKS5tYXgoMTAwKSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdGVhbVR5cGU6IHouZW51bShbJ0NPTVBFVElUSU9OJywgJ0RFVkVMT1BNRU5UJ10pLFxuICBjb21wZXRpdGlvblN1YnR5cGU6IHouZW51bShbJ0JMVUUnLCAnUkVEJywgJ0NURiddKS5vcHRpb25hbCgpLFxuICBncm91cElkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIG1lbWJlcklkczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxuICBwYXJlbnRUZWFtSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuXG5jb25zdCBsaXN0VGVhbXNTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHBhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKS50cmFuc2Zvcm0odmFsID0+IHBhcnNlSW50KHZhbCB8fCAnMScpKSxcbiAgbGltaXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS50cmFuc2Zvcm0odmFsID0+IHBhcnNlSW50KHZhbCB8fCAnMjAnKSksXG4gIHNlYXJjaDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB0ZWFtVHlwZTogei5lbnVtKFsnQ09NUEVUSVRJT04nLCAnREVWRUxPUE1FTlQnXSkub3B0aW9uYWwoKSxcbiAgY29tcGV0aXRpb25TdWJ0eXBlOiB6LmVudW0oWydCTFVFJywgJ1JFRCcsICdDVEYnXSkub3B0aW9uYWwoKSxcbiAgZ3JvdXBJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBwYXJlbnRUZWFtSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXBpL3RlYW1zOlxuICogICBnZXQ6XG4gKiAgICAgc3VtbWFyeTogTGlzdCB0ZWFtcyB3aXRoIGZpbHRlcmluZyBhbmQgcGFnaW5hdGlvblxuICogICAgIHRhZ3M6IFtUZWFtc11cbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gc2Vzc2lvbkF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IHBhZ2VcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICBkZWZhdWx0OiAxXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBQYWdlIG51bWJlciBmb3IgcGFnaW5hdGlvblxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogbGltaXRcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICBkZWZhdWx0OiAyMFxuICogICAgICAgICBkZXNjcmlwdGlvbjogTnVtYmVyIG9mIHRlYW1zIHBlciBwYWdlXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBzZWFyY2hcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogU2VhcmNoIHRlcm0gZm9yIHRlYW0gbmFtZVxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogdGVhbVR5cGVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgIGVudW06IFtDT01QRVRJVElPTiwgREVWRUxPUE1FTlRdXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBGaWx0ZXIgYnkgdGVhbSB0eXBlXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBjb21wZXRpdGlvblN1YnR5cGVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgIGVudW06IFtCTFVFLCBSRUQsIENURl1cbiAqICAgICAgICAgZGVzY3JpcHRpb246IEZpbHRlciBieSBjb21wZXRpdGlvbiBzdWJ0eXBlXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBncm91cElkXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEZpbHRlciBieSBncm91cFxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogcGFyZW50VGVhbUlkXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEZpbHRlciBieSBwYXJlbnQgdGVhbVxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIDIwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IExpc3Qgb2YgdGVhbXNcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgICB0ZWFtczpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGFycmF5XG4gKiAgICAgICAgICAgICAgICAgICBpdGVtczpcbiAqICAgICAgICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1RlYW0nXG4gKiAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbjpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgICAgICAgcGFnZTpcbiAqICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgICAgICAgICAgIGxpbWl0OlxuICogICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgICAgdG90YWw6XG4gKiAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgICB0b3RhbFBhZ2VzOlxuICogICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgIDQwMTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVuYXV0aG9yaXplZFxuICogICAgICAgNDAzOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogRm9yYmlkZGVuIC0gaW5zdWZmaWNpZW50IHBlcm1pc3Npb25zXG4gKiAgICAgICA1MDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcbiAqICAgcG9zdDpcbiAqICAgICBzdW1tYXJ5OiBDcmVhdGUgYSBuZXcgdGVhbVxuICogICAgIHRhZ3M6IFtUZWFtc11cbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gc2Vzc2lvbkF1dGg6IFtdXG4gKiAgICAgcmVxdWVzdEJvZHk6XG4gKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgY29udGVudDpcbiAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgIHJlcXVpcmVkOlxuICogICAgICAgICAgICAgICAtIG5hbWVcbiAqICAgICAgICAgICAgICAgLSB0ZWFtVHlwZVxuICogICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgbmFtZTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBtaW5MZW5ndGg6IDFcbiAqICAgICAgICAgICAgICAgICBtYXhMZW5ndGg6IDEwMFxuICogICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgdGVhbVR5cGU6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZW51bTogW0NPTVBFVElUSU9OLCBERVZFTE9QTUVOVF1cbiAqICAgICAgICAgICAgICAgY29tcGV0aXRpb25TdWJ0eXBlOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgIGVudW06IFtCTFVFLCBSRUQsIENURl1cbiAqICAgICAgICAgICAgICAgZ3JvdXBJZDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgbWVtYmVySWRzOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IGFycmF5XG4gKiAgICAgICAgICAgICAgICAgaXRlbXM6XG4gKiAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgcGFyZW50VGVhbUlkOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIDIwMTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFRlYW0gY3JlYXRlZCBzdWNjZXNzZnVsbHlcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVGVhbSdcbiAqICAgICAgIDQwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEJhZCByZXF1ZXN0IC0gdmFsaWRhdGlvbiBlcnJvclxuICogICAgICAgNDAxOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogVW5hdXRob3JpemVkXG4gKiAgICAgICA0MDM6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBGb3JiaWRkZW4gLSBpbnN1ZmZpY2llbnQgcGVybWlzc2lvbnNcbiAqICAgICAgIDUwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEludGVybmFsIHNlcnZlciBlcnJvclxuICovXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGNvbnN0IHRlYW1NYW5hZ2VyID0gbmV3IFRlYW1NYW5hZ2VyKCk7XG4gIGNvbnN0IHRhc2tNYW5hZ2VyID0gbmV3IFRhc2tNYW5hZ2VyKCk7XG5cbiAgdHJ5IHtcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgIC8vIExpc3QgdGVhbXNcbiAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbGlzdFRlYW1zU2NoZW1hLnBhcnNlKHJlcS5xdWVyeSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRlYW1NYW5hZ2VyLmdldFRlYW1zKHtcbiAgICAgICAgcGFnZTogcXVlcnlQYXJhbXMucGFnZSxcbiAgICAgICAgbGltaXQ6IHF1ZXJ5UGFyYW1zLmxpbWl0LFxuICAgICAgICBzZWFyY2g6IHF1ZXJ5UGFyYW1zLnNlYXJjaCxcbiAgICAgICAgdHlwZTogcXVlcnlQYXJhbXMudGVhbVR5cGUgYXMgYW55LFxuICAgICAgICBncm91cElkOiBxdWVyeVBhcmFtcy5ncm91cElkLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyZXN1bHQpO1xuICAgIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICAvLyBDcmVhdGUgdGVhbVxuICAgICAgY29uc3QgYm9keSA9IGNyZWF0ZVRlYW1TY2hlbWEucGFyc2UocmVxLmJvZHkpO1xuICAgICAgXG4gICAgICAvLyBtYXAgZmllbGRzIHRvIGV4cGVjdGVkIHR5cGVzXG4gICAgICBjb25zdCB0ZWFtID0gYXdhaXQgdGVhbU1hbmFnZXIuY3JlYXRlVGVhbSh7XG4gICAgICAgIG5hbWU6IGJvZHkubmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGJvZHkuZGVzY3JpcHRpb24sXG4gICAgICAgIHR5cGU6IGJvZHkudGVhbVR5cGUgYXMgYW55LFxuICAgICAgICBzdWJ0eXBlOiBib2R5LmNvbXBldGl0aW9uU3VidHlwZSBhcyBhbnksXG4gICAgICAgIHBhcmVudFRlYW1JZDogYm9keS5wYXJlbnRUZWFtSWQsXG4gICAgICAgIGdyb3VwSWQ6IGJvZHkuZ3JvdXBJZFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEVucXVldWUgc2ltdWxhdGVkIHByb3Zpc2lvbmluZyB0YXNrIHdpdGggc3VidGFza3MgbGlua2VkIHRvIHRoaXMgdGVhbVxuICAgICAgY29uc3Qgc3VidGFza05hbWVzID0gW1xuICAgICAgICAnVmFsaWRhdGUgaW5wdXRzIGFuZCBtZW1iZXIgZWxpZ2liaWxpdHknLFxuICAgICAgICAnQ3JlYXRlIGludGVybmFsIHJlY29yZHMnLFxuICAgICAgICAnU2V0dXAgV2lraSAoc2ltdWxhdGVkKScsXG4gICAgICAgICdTZXR1cCBHaXRIdWIgKHNpbXVsYXRlZCknLFxuICAgICAgICAnU2V0dXAgTmV4dGNsb3VkIChzaW11bGF0ZWQpJyxcbiAgICAgICAgJ0NyZWF0ZSBEaXNjb3JkIGNoYW5uZWwgKHNpbXVsYXRlZCknLFxuICAgICAgICAnU3luYyBBdXRoZW50aWsgZ3JvdXBzIChzaW11bGF0ZWQpJ1xuICAgICAgXTtcbiAgICAgIGF3YWl0IHRhc2tNYW5hZ2VyLmVucXVldWVQcm92aXNpb25UYXNrKHtcbiAgICAgICAgcHJvdmlzaW9uVHlwZTogJ1RFQU0nLFxuICAgICAgICBuYW1lOiBgUHJvdmlzaW9uIHJlc291cmNlcyBmb3IgdGVhbSAke3RlYW0ubmFtZX1gLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1NpbXVsYXRlZCBleHRlcm5hbCByZXNvdXJjZSBzZXR1cCcsXG4gICAgICAgIGVudGl0eVR5cGU6ICdURUFNJyxcbiAgICAgICAgZW50aXR5SWQ6IHRlYW0uaWQsXG4gICAgICAgIHN1YnRhc2tOYW1lcyxcbiAgICAgICAgcGF5bG9hZDogeyB0ZWFtSWQ6IHRlYW0uaWQgfVxuICAgICAgfSk7XG5cbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHRlYW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ1ZhbGlkYXRpb24gZXJyb3IgaW4gdGVhbXMgQVBJJywgeyBlcnJvcnM6IGVycm9yLmVycm9ycyB9KTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVmFsaWRhdGlvbiBlcnJvcicsIGRldGFpbHM6IGVycm9yLmVycm9ycyB9KTtcbiAgICB9XG4gICAgXG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBpbiB0ZWFtcyBBUEknLCB7IGVycm9yLCBtZXRob2Q6IHJlcS5tZXRob2QgfSk7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gIH1cbn1cblxuLy8gQXBwbHkgbWlkZGxld2FyZTogQ09SUywgYXV0aGVudGljYXRpb24gdGhlbiBwZXJtaXNzaW9uc1xuZXhwb3J0IGRlZmF1bHQgd2l0aENPUlMoXG4gIHdpdGhBdXRoKFxuICAgIHdpdGhQZXJtaXNzaW9ucyhcbiAgICAgIGhhbmRsZXIsXG4gICAgICBbJ3RlYW1zOnJlYWQnLCAndGVhbXM6Y3JlYXRlJ11cbiAgICApXG4gIClcbik7XG4iXSwibmFtZXMiOlsieiIsIlRlYW1NYW5hZ2VyIiwiVGFza01hbmFnZXIiLCJ3aXRoQ09SUyIsIndpdGhBdXRoIiwid2l0aFBlcm1pc3Npb25zIiwibG9nZ2VyIiwiY3JlYXRlVGVhbVNjaGVtYSIsIm9iamVjdCIsIm5hbWUiLCJzdHJpbmciLCJtaW4iLCJtYXgiLCJkZXNjcmlwdGlvbiIsIm9wdGlvbmFsIiwidGVhbVR5cGUiLCJlbnVtIiwiY29tcGV0aXRpb25TdWJ0eXBlIiwiZ3JvdXBJZCIsIm1lbWJlcklkcyIsImFycmF5IiwicGFyZW50VGVhbUlkIiwibGlzdFRlYW1zU2NoZW1hIiwicGFnZSIsInRyYW5zZm9ybSIsInZhbCIsInBhcnNlSW50IiwibGltaXQiLCJzZWFyY2giLCJoYW5kbGVyIiwicmVxIiwicmVzIiwidGVhbU1hbmFnZXIiLCJ0YXNrTWFuYWdlciIsIm1ldGhvZCIsInF1ZXJ5UGFyYW1zIiwicGFyc2UiLCJxdWVyeSIsInJlc3VsdCIsImdldFRlYW1zIiwidHlwZSIsInN0YXR1cyIsImpzb24iLCJib2R5IiwidGVhbSIsImNyZWF0ZVRlYW0iLCJzdWJ0eXBlIiwic3VidGFza05hbWVzIiwiZW5xdWV1ZVByb3Zpc2lvblRhc2siLCJwcm92aXNpb25UeXBlIiwiZW50aXR5VHlwZSIsImVudGl0eUlkIiwiaWQiLCJwYXlsb2FkIiwidGVhbUlkIiwiZXJyb3IiLCJab2RFcnJvciIsIndhcm4iLCJlcnJvcnMiLCJkZXRhaWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/teams/index.ts\n");

/***/ }),

/***/ "(api)/./src/tasks/queue.ts":
/*!****************************!*\
  !*** ./src/tasks/queue.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QUEUE_NAMES: () => (/* binding */ QUEUE_NAMES),\n/* harmony export */   addJobToQueue: () => (/* binding */ addJobToQueue),\n/* harmony export */   closeQueues: () => (/* binding */ closeQueues),\n/* harmony export */   emailQueue: () => (/* binding */ emailQueue),\n/* harmony export */   emailScheduler: () => (/* binding */ emailScheduler),\n/* harmony export */   getQueueHealth: () => (/* binding */ getQueueHealth),\n/* harmony export */   provisionQueue: () => (/* binding */ provisionQueue),\n/* harmony export */   provisionScheduler: () => (/* binding */ provisionScheduler),\n/* harmony export */   qrCodeQueue: () => (/* binding */ qrCodeQueue),\n/* harmony export */   qrCodeScheduler: () => (/* binding */ qrCodeScheduler),\n/* harmony export */   syncGroupsQueue: () => (/* binding */ syncGroupsQueue),\n/* harmony export */   syncGroupsScheduler: () => (/* binding */ syncGroupsScheduler)\n/* harmony export */ });\n/* harmony import */ var bullmq__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bullmq */ \"bullmq\");\n/* harmony import */ var bullmq__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bullmq__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ioredis */ \"ioredis\");\n/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ioredis__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/logger */ \"(api)/./src/utils/logger.ts\");\n\n\n\n// Redis connection\nconst redis = new (ioredis__WEBPACK_IMPORTED_MODULE_1___default())(process.env.REDIS_URL || \"redis://localhost:6379\");\n// Queue names\nconst QUEUE_NAMES = {\n    EMAIL: \"email\",\n    QR_CODE: \"qr-code\",\n    SYNC_GROUPS: \"sync-groups\",\n    PROVISION: \"provision\"\n};\n// Create queues\nconst emailQueue = new bullmq__WEBPACK_IMPORTED_MODULE_0__.Queue(QUEUE_NAMES.EMAIL, {\n    connection: redis,\n    defaultJobOptions: {\n        attempts: 3,\n        backoff: {\n            type: \"exponential\",\n            delay: 2000\n        }\n    }\n});\nconst qrCodeQueue = new bullmq__WEBPACK_IMPORTED_MODULE_0__.Queue(QUEUE_NAMES.QR_CODE, {\n    connection: redis,\n    defaultJobOptions: {\n        attempts: 2,\n        backoff: {\n            type: \"exponential\",\n            delay: 1000\n        }\n    }\n});\nconst syncGroupsQueue = new bullmq__WEBPACK_IMPORTED_MODULE_0__.Queue(QUEUE_NAMES.SYNC_GROUPS, {\n    connection: redis,\n    defaultJobOptions: {\n        attempts: 5,\n        backoff: {\n            type: \"exponential\",\n            delay: 5000\n        }\n    }\n});\nconst provisionQueue = new bullmq__WEBPACK_IMPORTED_MODULE_0__.Queue(QUEUE_NAMES.PROVISION, {\n    connection: redis,\n    defaultJobOptions: {\n        attempts: 1\n    }\n});\n// Create schedulers for delayed jobs\nconst emailScheduler = new bullmq__WEBPACK_IMPORTED_MODULE_0__.QueueScheduler(QUEUE_NAMES.EMAIL, {\n    connection: redis\n});\nconst qrCodeScheduler = new bullmq__WEBPACK_IMPORTED_MODULE_0__.QueueScheduler(QUEUE_NAMES.QR_CODE, {\n    connection: redis\n});\nconst syncGroupsScheduler = new bullmq__WEBPACK_IMPORTED_MODULE_0__.QueueScheduler(QUEUE_NAMES.SYNC_GROUPS, {\n    connection: redis\n});\nconst provisionScheduler = new bullmq__WEBPACK_IMPORTED_MODULE_0__.QueueScheduler(QUEUE_NAMES.PROVISION, {\n    connection: redis\n});\n// Queue event handlers\nemailQueue.on(\"completed\", (job)=>{\n    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(`Email job ${job.id} completed successfully`);\n});\nemailQueue.on(\"failed\", (job, err)=>{\n    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(`Email job ${job.id} failed:`, err);\n});\nqrCodeQueue.on(\"completed\", (job)=>{\n    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(`QR Code job ${job.id} completed successfully`);\n});\nqrCodeQueue.on(\"failed\", (job, err)=>{\n    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(`QR Code job ${job.id} failed:`, err);\n});\nsyncGroupsQueue.on(\"completed\", (job)=>{\n    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(`Sync Groups job ${job.id} completed successfully`);\n});\nsyncGroupsQueue.on(\"failed\", (job, err)=>{\n    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(`Sync Groups job ${job.id} failed:`, err);\n});\nprovisionQueue.on(\"completed\", (job)=>{\n    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(`Provision job ${job.id} completed successfully`);\n});\nprovisionQueue.on(\"failed\", (job, err)=>{\n    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(`Provision job ${job.id} failed:`, err);\n});\n// Helper function to add jobs to queues\nasync function addJobToQueue(queueName, data, options) {\n    const queue = getQueueByName(queueName);\n    if (!queue) {\n        throw new Error(`Unknown queue: ${queueName}`);\n    }\n    const job = await queue.add(queueName, data, {\n        delay: options?.delay,\n        priority: options?.priority,\n        attempts: options?.attempts\n    });\n    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(`Added job ${job.id} to ${queueName} queue`);\n    return job;\n}\nfunction getQueueByName(queueName) {\n    switch(queueName){\n        case \"EMAIL\":\n            return emailQueue;\n        case \"QR_CODE\":\n            return qrCodeQueue;\n        case \"SYNC_GROUPS\":\n            return syncGroupsQueue;\n        default:\n            return null;\n    }\n}\n// Graceful shutdown\nasync function closeQueues() {\n    await emailQueue.close();\n    await qrCodeQueue.close();\n    await syncGroupsQueue.close();\n    await redis.quit();\n    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"All queues closed\");\n}\n// Health check\nasync function getQueueHealth() {\n    try {\n        await redis.ping();\n        return {\n            redis: \"healthy\",\n            queues: {\n                email: await emailQueue.getJobCounts(),\n                qrCode: await qrCodeQueue.getJobCounts(),\n                syncGroups: await syncGroupsQueue.getJobCounts()\n            }\n        };\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Queue health check failed:\", error);\n        return {\n            redis: \"unhealthy\",\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU10QixnQkFBZ0JzQixLQUFLO0lBQzNCLE1BQU12QyxNQUFNd0MsSUFBSTtJQUNoQnpDLGlEQUFNQSxDQUFDMEIsSUFBSSxDQUFDO0FBQ2Q7QUFFQSxlQUFlO0FBQ1IsZUFBZWdCO0lBQ3BCLElBQUk7UUFDRixNQUFNekMsTUFBTTBDLElBQUk7UUFDaEIsT0FBTztZQUNMMUMsT0FBTztZQUNQMkMsUUFBUTtnQkFDTkMsT0FBTyxNQUFNbkMsV0FBV29DLFlBQVk7Z0JBQ3BDQyxRQUFRLE1BQU05QixZQUFZNkIsWUFBWTtnQkFDdENFLFlBQVksTUFBTTlCLGdCQUFnQjRCLFlBQVk7WUFDaEQ7UUFDRjtJQUNGLEVBQUUsT0FBT2pCLE9BQU87UUFDZDdCLGlEQUFNQSxDQUFDNkIsS0FBSyxDQUFDLDhCQUE4QkE7UUFDM0MsT0FBTztZQUNMNUIsT0FBTztZQUNQNEIsT0FBT0EsaUJBQWlCTyxRQUFRUCxNQUFNb0IsT0FBTyxHQUFHO1FBQ2xEO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21ybTM2MC1iYWNrZW5kLy4vc3JjL3Rhc2tzL3F1ZXVlLnRzPzYyOTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUXVldWUsIFdvcmtlciwgUXVldWVTY2hlZHVsZXIgfSBmcm9tICdidWxsbXEnO1xyXG5pbXBvcnQgUmVkaXMgZnJvbSAnaW9yZWRpcyc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvbG9nZ2VyJztcclxuXHJcbi8vIFJlZGlzIGNvbm5lY3Rpb25cclxuY29uc3QgcmVkaXMgPSBuZXcgUmVkaXMocHJvY2Vzcy5lbnYuUkVESVNfVVJMIHx8ICdyZWRpczovL2xvY2FsaG9zdDo2Mzc5Jyk7XHJcblxyXG4vLyBRdWV1ZSBuYW1lc1xyXG5leHBvcnQgY29uc3QgUVVFVUVfTkFNRVMgPSB7XHJcbiAgRU1BSUw6ICdlbWFpbCcsXHJcbiAgUVJfQ09ERTogJ3FyLWNvZGUnLFxyXG4gIFNZTkNfR1JPVVBTOiAnc3luYy1ncm91cHMnLFxyXG4gIFBST1ZJU0lPTjogJ3Byb3Zpc2lvbidcclxufSBhcyBjb25zdDtcclxuXHJcbi8vIENyZWF0ZSBxdWV1ZXNcclxuZXhwb3J0IGNvbnN0IGVtYWlsUXVldWUgPSBuZXcgUXVldWUoUVVFVUVfTkFNRVMuRU1BSUwsIHtcclxuICBjb25uZWN0aW9uOiByZWRpcyxcclxuICBkZWZhdWx0Sm9iT3B0aW9uczoge1xyXG4gICAgYXR0ZW1wdHM6IDMsXHJcbiAgICBiYWNrb2ZmOiB7XHJcbiAgICAgIHR5cGU6ICdleHBvbmVudGlhbCcsXHJcbiAgICAgIGRlbGF5OiAyMDAwXHJcbiAgICB9XHJcbiAgfVxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBxckNvZGVRdWV1ZSA9IG5ldyBRdWV1ZShRVUVVRV9OQU1FUy5RUl9DT0RFLCB7XHJcbiAgY29ubmVjdGlvbjogcmVkaXMsXHJcbiAgZGVmYXVsdEpvYk9wdGlvbnM6IHtcclxuICAgIGF0dGVtcHRzOiAyLFxyXG4gICAgYmFja29mZjoge1xyXG4gICAgICB0eXBlOiAnZXhwb25lbnRpYWwnLFxyXG4gICAgICBkZWxheTogMTAwMFxyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcblxyXG5leHBvcnQgY29uc3Qgc3luY0dyb3Vwc1F1ZXVlID0gbmV3IFF1ZXVlKFFVRVVFX05BTUVTLlNZTkNfR1JPVVBTLCB7XHJcbiAgY29ubmVjdGlvbjogcmVkaXMsXHJcbiAgZGVmYXVsdEpvYk9wdGlvbnM6IHtcclxuICAgIGF0dGVtcHRzOiA1LFxyXG4gICAgYmFja29mZjoge1xyXG4gICAgICB0eXBlOiAnZXhwb25lbnRpYWwnLFxyXG4gICAgICBkZWxheTogNTAwMFxyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvdmlzaW9uUXVldWUgPSBuZXcgUXVldWUoUVVFVUVfTkFNRVMuUFJPVklTSU9OLCB7XHJcbiAgY29ubmVjdGlvbjogcmVkaXMsXHJcbiAgZGVmYXVsdEpvYk9wdGlvbnM6IHtcclxuICAgIGF0dGVtcHRzOiAxXHJcbiAgfVxyXG59KTtcclxuLy8gQ3JlYXRlIHNjaGVkdWxlcnMgZm9yIGRlbGF5ZWQgam9ic1xyXG5leHBvcnQgY29uc3QgZW1haWxTY2hlZHVsZXIgPSBuZXcgUXVldWVTY2hlZHVsZXIoUVVFVUVfTkFNRVMuRU1BSUwsIHsgY29ubmVjdGlvbjogcmVkaXMgfSk7XHJcbmV4cG9ydCBjb25zdCBxckNvZGVTY2hlZHVsZXIgPSBuZXcgUXVldWVTY2hlZHVsZXIoUVVFVUVfTkFNRVMuUVJfQ09ERSwgeyBjb25uZWN0aW9uOiByZWRpcyB9KTtcclxuZXhwb3J0IGNvbnN0IHN5bmNHcm91cHNTY2hlZHVsZXIgPSBuZXcgUXVldWVTY2hlZHVsZXIoUVVFVUVfTkFNRVMuU1lOQ19HUk9VUFMsIHsgY29ubmVjdGlvbjogcmVkaXMgfSk7XHJcbmV4cG9ydCBjb25zdCBwcm92aXNpb25TY2hlZHVsZXIgPSBuZXcgUXVldWVTY2hlZHVsZXIoUVVFVUVfTkFNRVMuUFJPVklTSU9OLCB7IGNvbm5lY3Rpb246IHJlZGlzIH0pO1xyXG5cclxuLy8gUXVldWUgZXZlbnQgaGFuZGxlcnNcclxuZW1haWxRdWV1ZS5vbignY29tcGxldGVkJywgKGpvYikgPT4ge1xyXG4gIGxvZ2dlci5pbmZvKGBFbWFpbCBqb2IgJHtqb2IuaWR9IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHlgKTtcclxufSk7XHJcblxyXG5lbWFpbFF1ZXVlLm9uKCdmYWlsZWQnLCAoam9iLCBlcnIpID0+IHtcclxuICBsb2dnZXIuZXJyb3IoYEVtYWlsIGpvYiAke2pvYi5pZH0gZmFpbGVkOmAsIGVycik7XHJcbn0pO1xyXG5cclxucXJDb2RlUXVldWUub24oJ2NvbXBsZXRlZCcsIChqb2IpID0+IHtcclxuICBsb2dnZXIuaW5mbyhgUVIgQ29kZSBqb2IgJHtqb2IuaWR9IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHlgKTtcclxufSk7XHJcblxyXG5xckNvZGVRdWV1ZS5vbignZmFpbGVkJywgKGpvYiwgZXJyKSA9PiB7XHJcbiAgbG9nZ2VyLmVycm9yKGBRUiBDb2RlIGpvYiAke2pvYi5pZH0gZmFpbGVkOmAsIGVycik7XHJcbn0pO1xyXG5cclxuc3luY0dyb3Vwc1F1ZXVlLm9uKCdjb21wbGV0ZWQnLCAoam9iKSA9PiB7XHJcbiAgbG9nZ2VyLmluZm8oYFN5bmMgR3JvdXBzIGpvYiAke2pvYi5pZH0gY29tcGxldGVkIHN1Y2Nlc3NmdWxseWApO1xyXG59KTtcclxuXHJcbnN5bmNHcm91cHNRdWV1ZS5vbignZmFpbGVkJywgKGpvYiwgZXJyKSA9PiB7XHJcbiAgbG9nZ2VyLmVycm9yKGBTeW5jIEdyb3VwcyBqb2IgJHtqb2IuaWR9IGZhaWxlZDpgLCBlcnIpO1xyXG59KTtcclxuXHJcbnByb3Zpc2lvblF1ZXVlLm9uKCdjb21wbGV0ZWQnLCAoam9iKSA9PiB7XHJcbiAgbG9nZ2VyLmluZm8oYFByb3Zpc2lvbiBqb2IgJHtqb2IuaWR9IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHlgKTtcclxufSk7XHJcblxyXG5wcm92aXNpb25RdWV1ZS5vbignZmFpbGVkJywgKGpvYiwgZXJyKSA9PiB7XHJcbiAgbG9nZ2VyLmVycm9yKGBQcm92aXNpb24gam9iICR7am9iLmlkfSBmYWlsZWQ6YCwgZXJyKTtcclxufSk7XHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBhZGQgam9icyB0byBxdWV1ZXNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEpvYlRvUXVldWUoXHJcbiAgcXVldWVOYW1lOiBrZXlvZiB0eXBlb2YgUVVFVUVfTkFNRVMsXHJcbiAgZGF0YTogYW55LFxyXG4gIG9wdGlvbnM/OiB7XHJcbiAgICBkZWxheT86IG51bWJlcjtcclxuICAgIHByaW9yaXR5PzogbnVtYmVyO1xyXG4gICAgYXR0ZW1wdHM/OiBudW1iZXI7XHJcbiAgfVxyXG4pIHtcclxuICBjb25zdCBxdWV1ZSA9IGdldFF1ZXVlQnlOYW1lKHF1ZXVlTmFtZSk7XHJcbiAgaWYgKCFxdWV1ZSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHF1ZXVlOiAke3F1ZXVlTmFtZX1gKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGpvYiA9IGF3YWl0IHF1ZXVlLmFkZChcclxuICAgIHF1ZXVlTmFtZSxcclxuICAgIGRhdGEsXHJcbiAgICB7XHJcbiAgICAgIGRlbGF5OiBvcHRpb25zPy5kZWxheSxcclxuICAgICAgcHJpb3JpdHk6IG9wdGlvbnM/LnByaW9yaXR5LFxyXG4gICAgICBhdHRlbXB0czogb3B0aW9ucz8uYXR0ZW1wdHNcclxuICAgIH1cclxuICApO1xyXG5cclxuICBsb2dnZXIuaW5mbyhgQWRkZWQgam9iICR7am9iLmlkfSB0byAke3F1ZXVlTmFtZX0gcXVldWVgKTtcclxuICByZXR1cm4gam9iO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRRdWV1ZUJ5TmFtZShxdWV1ZU5hbWU6IGtleW9mIHR5cGVvZiBRVUVVRV9OQU1FUykge1xyXG4gIHN3aXRjaCAocXVldWVOYW1lKSB7XHJcbiAgICBjYXNlICdFTUFJTCc6XHJcbiAgICAgIHJldHVybiBlbWFpbFF1ZXVlO1xyXG4gICAgY2FzZSAnUVJfQ09ERSc6XHJcbiAgICAgIHJldHVybiBxckNvZGVRdWV1ZTtcclxuICAgIGNhc2UgJ1NZTkNfR1JPVVBTJzpcclxuICAgICAgcmV0dXJuIHN5bmNHcm91cHNRdWV1ZTtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuLy8gR3JhY2VmdWwgc2h1dGRvd25cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsb3NlUXVldWVzKCkge1xyXG4gIGF3YWl0IGVtYWlsUXVldWUuY2xvc2UoKTtcclxuICBhd2FpdCBxckNvZGVRdWV1ZS5jbG9zZSgpO1xyXG4gIGF3YWl0IHN5bmNHcm91cHNRdWV1ZS5jbG9zZSgpO1xyXG4gIGF3YWl0IHJlZGlzLnF1aXQoKTtcclxuICBsb2dnZXIuaW5mbygnQWxsIHF1ZXVlcyBjbG9zZWQnKTtcclxufVxyXG5cclxuLy8gSGVhbHRoIGNoZWNrXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRRdWV1ZUhlYWx0aCgpIHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgcmVkaXMucGluZygpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVkaXM6ICdoZWFsdGh5JyxcclxuICAgICAgcXVldWVzOiB7XHJcbiAgICAgICAgZW1haWw6IGF3YWl0IGVtYWlsUXVldWUuZ2V0Sm9iQ291bnRzKCksXHJcbiAgICAgICAgcXJDb2RlOiBhd2FpdCBxckNvZGVRdWV1ZS5nZXRKb2JDb3VudHMoKSxcclxuICAgICAgICBzeW5jR3JvdXBzOiBhd2FpdCBzeW5jR3JvdXBzUXVldWUuZ2V0Sm9iQ291bnRzKClcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKCdRdWV1ZSBoZWFsdGggY2hlY2sgZmFpbGVkOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlZGlzOiAndW5oZWFsdGh5JyxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiUXVldWUiLCJRdWV1ZVNjaGVkdWxlciIsIlJlZGlzIiwibG9nZ2VyIiwicmVkaXMiLCJwcm9jZXNzIiwiZW52IiwiUkVESVNfVVJMIiwiUVVFVUVfTkFNRVMiLCJFTUFJTCIsIlFSX0NPREUiLCJTWU5DX0dST1VQUyIsIlBST1ZJU0lPTiIsImVtYWlsUXVldWUiLCJjb25uZWN0aW9uIiwiZGVmYXVsdEpvYk9wdGlvbnMiLCJhdHRlbXB0cyIsImJhY2tvZmYiLCJ0eXBlIiwiZGVsYXkiLCJxckNvZGVRdWV1ZSIsInN5bmNHcm91cHNRdWV1ZSIsInByb3Zpc2lvblF1ZXVlIiwiZW1haWxTY2hlZHVsZXIiLCJxckNvZGVTY2hlZHVsZXIiLCJzeW5jR3JvdXBzU2NoZWR1bGVyIiwicHJvdmlzaW9uU2NoZWR1bGVyIiwib24iLCJqb2IiLCJpbmZvIiwiaWQiLCJlcnIiLCJlcnJvciIsImFkZEpvYlRvUXVldWUiLCJxdWV1ZU5hbWUiLCJkYXRhIiwib3B0aW9ucyIsInF1ZXVlIiwiZ2V0UXVldWVCeU5hbWUiLCJFcnJvciIsImFkZCIsInByaW9yaXR5IiwiY2xvc2VRdWV1ZXMiLCJjbG9zZSIsInF1aXQiLCJnZXRRdWV1ZUhlYWx0aCIsInBpbmciLCJxdWV1ZXMiLCJlbWFpbCIsImdldEpvYkNvdW50cyIsInFyQ29kZSIsInN5bmNHcm91cHMiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/tasks/queue.ts\n");

/***/ }),

/***/ "(api)/./src/utils/logger.ts":
/*!*****************************!*\
  !*** ./src/utils/logger.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogLevel: () => (/* binding */ LogLevel),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\nvar LogLevel;\n(function(LogLevel) {\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 1] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 2] = \"WARN\";\n    LogLevel[LogLevel[\"ERROR\"] = 3] = \"ERROR\";\n})(LogLevel || (LogLevel = {}));\nclass Logger {\n    constructor(level = 1){\n        this.level = level;\n    }\n    formatMessage(level, message, meta) {\n        const timestamp = new Date().toISOString();\n        const metaStr = meta ? ` ${JSON.stringify(meta)}` : \"\";\n        return `[${timestamp}] ${level}: ${message}${metaStr}`;\n    }\n    log(level, levelName, message, meta) {\n        if (level >= this.level) {\n            const formattedMessage = this.formatMessage(levelName, message, meta);\n            switch(level){\n                case 3:\n                    console.error(formattedMessage);\n                    break;\n                case 2:\n                    console.warn(formattedMessage);\n                    break;\n                case 1:\n                    console.info(formattedMessage);\n                    break;\n                case 0:\n                    console.debug(formattedMessage);\n                    break;\n            }\n        }\n    }\n    debug(message, meta) {\n        this.log(0, \"DEBUG\", message, meta);\n    }\n    info(message, meta) {\n        this.log(1, \"INFO\", message, meta);\n    }\n    warn(message, meta) {\n        this.log(2, \"WARN\", message, meta);\n    }\n    error(message, meta) {\n        this.log(3, \"ERROR\", message, meta);\n    }\n    setLevel(level) {\n        this.level = level;\n    }\n}\nconst logger = new Logger( true ? 0 : 0);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMvbG9nZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7VUFBWUE7Ozs7O0dBQUFBLGFBQUFBO0FBT1osTUFBTUM7SUFHSkMsWUFBWUMsU0FBK0IsQ0FBRTtRQUMzQyxJQUFJLENBQUNBLEtBQUssR0FBR0E7SUFDZjtJQUVRQyxjQUFjRCxLQUFhLEVBQUVFLE9BQWUsRUFBRUMsSUFBVSxFQUFVO1FBQ3hFLE1BQU1DLFlBQVksSUFBSUMsT0FBT0MsV0FBVztRQUN4QyxNQUFNQyxVQUFVSixPQUFPLENBQUMsQ0FBQyxFQUFFSyxLQUFLQyxTQUFTLENBQUNOLE1BQU0sQ0FBQyxHQUFHO1FBQ3BELE9BQU8sQ0FBQyxDQUFDLEVBQUVDLFVBQVUsRUFBRSxFQUFFSixNQUFNLEVBQUUsRUFBRUUsUUFBUSxFQUFFSyxRQUFRLENBQUM7SUFDeEQ7SUFFUUcsSUFBSVYsS0FBZSxFQUFFVyxTQUFpQixFQUFFVCxPQUFlLEVBQUVDLElBQVUsRUFBRTtRQUMzRSxJQUFJSCxTQUFTLElBQUksQ0FBQ0EsS0FBSyxFQUFFO1lBQ3ZCLE1BQU1ZLG1CQUFtQixJQUFJLENBQUNYLGFBQWEsQ0FBQ1UsV0FBV1QsU0FBU0M7WUFFaEUsT0FBUUg7Z0JBQ047b0JBQ0VhLFFBQVFDLEtBQUssQ0FBQ0Y7b0JBQ2Q7Z0JBQ0Y7b0JBQ0VDLFFBQVFFLElBQUksQ0FBQ0g7b0JBQ2I7Z0JBQ0Y7b0JBQ0VDLFFBQVFHLElBQUksQ0FBQ0o7b0JBQ2I7Z0JBQ0Y7b0JBQ0VDLFFBQVFJLEtBQUssQ0FBQ0w7b0JBQ2Q7WUFDSjtRQUNGO0lBQ0Y7SUFFQUssTUFBTWYsT0FBZSxFQUFFQyxJQUFVLEVBQUU7UUFDakMsSUFBSSxDQUFDTyxHQUFHLElBQWlCLFNBQVNSLFNBQVNDO0lBQzdDO0lBRUFhLEtBQUtkLE9BQWUsRUFBRUMsSUFBVSxFQUFFO1FBQ2hDLElBQUksQ0FBQ08sR0FBRyxJQUFnQixRQUFRUixTQUFTQztJQUMzQztJQUVBWSxLQUFLYixPQUFlLEVBQUVDLElBQVUsRUFBRTtRQUNoQyxJQUFJLENBQUNPLEdBQUcsSUFBZ0IsUUFBUVIsU0FBU0M7SUFDM0M7SUFFQVcsTUFBTVosT0FBZSxFQUFFQyxJQUFVLEVBQUU7UUFDakMsSUFBSSxDQUFDTyxHQUFHLElBQWlCLFNBQVNSLFNBQVNDO0lBQzdDO0lBRUFlLFNBQVNsQixLQUFlLEVBQUU7UUFDeEIsSUFBSSxDQUFDQSxLQUFLLEdBQUdBO0lBQ2Y7QUFDRjtBQUVPLE1BQU1tQixTQUFTLElBQUlyQixPQUN4QnNCLEtBQXlCLFVBQ3pCO0FBRUYsaUVBQWVELE1BQU1BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tcm0zNjAtYmFja2VuZC8uL3NyYy91dGlscy9sb2dnZXIudHM/N2NmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBMb2dMZXZlbCB7XHJcbiAgREVCVUcgPSAwLFxyXG4gIElORk8gPSAxLFxyXG4gIFdBUk4gPSAyLFxyXG4gIEVSUk9SID0gM1xyXG59XHJcblxyXG5jbGFzcyBMb2dnZXIge1xyXG4gIHByaXZhdGUgbGV2ZWw6IExvZ0xldmVsO1xyXG5cclxuICBjb25zdHJ1Y3RvcihsZXZlbDogTG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPKSB7XHJcbiAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGZvcm1hdE1lc3NhZ2UobGV2ZWw6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGFTdHIgPSBtZXRhID8gYCAke0pTT04uc3RyaW5naWZ5KG1ldGEpfWAgOiAnJztcclxuICAgIHJldHVybiBgWyR7dGltZXN0YW1wfV0gJHtsZXZlbH06ICR7bWVzc2FnZX0ke21ldGFTdHJ9YDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbG9nKGxldmVsOiBMb2dMZXZlbCwgbGV2ZWxOYW1lOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgbWV0YT86IGFueSkge1xyXG4gICAgaWYgKGxldmVsID49IHRoaXMubGV2ZWwpIHtcclxuICAgICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZSA9IHRoaXMuZm9ybWF0TWVzc2FnZShsZXZlbE5hbWUsIG1lc3NhZ2UsIG1ldGEpO1xyXG4gICAgICBcclxuICAgICAgc3dpdGNoIChsZXZlbCkge1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuRVJST1I6XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5XQVJOOlxyXG4gICAgICAgICAgY29uc29sZS53YXJuKGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5JTkZPOlxyXG4gICAgICAgICAgY29uc29sZS5pbmZvKGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5ERUJVRzpcclxuICAgICAgICAgIGNvbnNvbGUuZGVidWcoZm9ybWF0dGVkTWVzc2FnZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGVidWcobWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5ERUJVRywgJ0RFQlVHJywgbWVzc2FnZSwgbWV0YSk7XHJcbiAgfVxyXG5cclxuICBpbmZvKG1lc3NhZ2U6IHN0cmluZywgbWV0YT86IGFueSkge1xyXG4gICAgdGhpcy5sb2coTG9nTGV2ZWwuSU5GTywgJ0lORk8nLCBtZXNzYWdlLCBtZXRhKTtcclxuICB9XHJcblxyXG4gIHdhcm4obWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5XQVJOLCAnV0FSTicsIG1lc3NhZ2UsIG1ldGEpO1xyXG4gIH1cclxuXHJcbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5FUlJPUiwgJ0VSUk9SJywgbWVzc2FnZSwgbWV0YSk7XHJcbiAgfVxyXG5cclxuICBzZXRMZXZlbChsZXZlbDogTG9nTGV2ZWwpIHtcclxuICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFxyXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gTG9nTGV2ZWwuREVCVUcgOiBMb2dMZXZlbC5JTkZPXHJcbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XHJcbiJdLCJuYW1lcyI6WyJMb2dMZXZlbCIsIkxvZ2dlciIsImNvbnN0cnVjdG9yIiwibGV2ZWwiLCJmb3JtYXRNZXNzYWdlIiwibWVzc2FnZSIsIm1ldGEiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJtZXRhU3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvZyIsImxldmVsTmFtZSIsImZvcm1hdHRlZE1lc3NhZ2UiLCJjb25zb2xlIiwiZXJyb3IiLCJ3YXJuIiwiaW5mbyIsImRlYnVnIiwic2V0TGV2ZWwiLCJsb2dnZXIiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/utils/logger.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteams&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fteams%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();
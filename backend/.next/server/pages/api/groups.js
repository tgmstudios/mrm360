"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/groups";
exports.ids = ["pages/api/groups"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgroups&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgroups%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgroups&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgroups%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_groups_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/groups/index.ts */ \"(api)/./src/pages/api/groups/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_groups_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_groups_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_groups_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_groups_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/groups\",\n        pathname: \"/api/groups\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_groups_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdyb3VwcyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGZ3JvdXBzJTJGaW5kZXgudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNEQ7QUFDNUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDJEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywyREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tcm0zNjAtYmFja2VuZC8/YzA3YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjL3BhZ2VzL2FwaS9ncm91cHMvaW5kZXgudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9ncm91cHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9ncm91cHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgroups&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgroups%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/managers/groupManager.ts":
/*!**************************************!*\
  !*** ./src/managers/groupManager.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GroupManager: () => (/* binding */ GroupManager)\n/* harmony export */ });\n/* harmony import */ var _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/models/prismaClient */ \"(api)/./src/models/prismaClient.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/logger */ \"(api)/./src/utils/logger.ts\");\n/* harmony import */ var _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/middleware/errorHandler */ \"(api)/./src/middleware/errorHandler.ts\");\n\n\n\nclass GroupManager {\n    async createGroup(data) {\n        try {\n            // Check if group already exists\n            const existingGroup = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.findUnique({\n                where: {\n                    name: data.name\n                }\n            });\n            if (existingGroup) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.CONFLICT(\"Group with this name already exists\");\n            }\n            const group = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.create({\n                data: {\n                    name: data.name,\n                    description: data.description,\n                    externalId: data.externalId\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Created group: ${group.name}`);\n            return group;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error creating group:\", error);\n            throw error;\n        }\n    }\n    async getGroupById(id) {\n        try {\n            const group = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.findUnique({\n                where: {\n                    id\n                },\n                include: {\n                    userGroups: {\n                        include: {\n                            user: true\n                        }\n                    },\n                    teams: true\n                }\n            });\n            if (!group) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"Group\");\n            }\n            return group;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error getting group ${id}:`, error);\n            throw error;\n        }\n    }\n    async getAllGroups() {\n        try {\n            const groups = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.findMany({\n                orderBy: {\n                    name: \"asc\"\n                },\n                include: {\n                    _count: {\n                        select: {\n                            userGroups: true,\n                            teams: true\n                        }\n                    }\n                }\n            });\n            return groups;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error getting all groups:\", error);\n            throw error;\n        }\n    }\n    async updateGroup(id, data) {\n        try {\n            // Check if name is being changed and if it conflicts\n            if (data.name) {\n                const existingGroup = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.findFirst({\n                    where: {\n                        name: data.name,\n                        id: {\n                            not: id\n                        }\n                    }\n                });\n                if (existingGroup) {\n                    throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.CONFLICT(\"Group with this name already exists\");\n                }\n            }\n            const group = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.update({\n                where: {\n                    id\n                },\n                data: {\n                    name: data.name,\n                    description: data.description,\n                    externalId: data.externalId\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Updated group: ${group.name}`);\n            return group;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error updating group ${id}:`, error);\n            throw error;\n        }\n    }\n    async deleteGroup(id) {\n        try {\n            // Check if group has members or teams\n            const group = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.findUnique({\n                where: {\n                    id\n                },\n                include: {\n                    _count: {\n                        select: {\n                            userGroups: true,\n                            teams: true\n                        }\n                    }\n                }\n            });\n            if (!group) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"Group\");\n            }\n            if (group._count.userGroups > 0) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.CONFLICT(\"Cannot delete group with members\");\n            }\n            if (group._count.teams > 0) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.CONFLICT(\"Cannot delete group with teams\");\n            }\n            await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.delete({\n                where: {\n                    id\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Deleted group: ${id}`);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error deleting group ${id}:`, error);\n            throw error;\n        }\n    }\n    async getGroupMembers(id) {\n        try {\n            const group = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.findUnique({\n                where: {\n                    id\n                },\n                include: {\n                    userGroups: {\n                        include: {\n                            user: {\n                                select: {\n                                    id: true,\n                                    email: true,\n                                    firstName: true,\n                                    lastName: true,\n                                    displayName: true,\n                                    role: true,\n                                    paidStatus: true,\n                                    joinedAt: true\n                                }\n                            }\n                        },\n                        orderBy: {\n                            joinedAt: \"asc\"\n                        }\n                    }\n                }\n            });\n            if (!group) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"Group\");\n            }\n            return group.userGroups.map((ug)=>({\n                    ...ug.user,\n                    joinedAt: ug.joinedAt\n                }));\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error getting group members ${id}:`, error);\n            throw error;\n        }\n    }\n    async syncWithAuthentik() {\n        try {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(\"Starting Authentik group sync...\");\n            // Mock Authentik API call - replace with actual integration\n            const mockAuthentikGroups = [\n                {\n                    id: \"auth-group-1\",\n                    name: \"Competition Team\",\n                    description: \"Competition team members\"\n                },\n                {\n                    id: \"auth-group-2\",\n                    name: \"Development Team\",\n                    description: \"Development team members\"\n                },\n                {\n                    id: \"auth-group-3\",\n                    name: \"Executive Board\",\n                    description: \"Executive board members\"\n                },\n                {\n                    id: \"auth-group-4\",\n                    name: \"General Members\",\n                    description: \"General club members\"\n                }\n            ];\n            let created = 0;\n            let updated = 0;\n            for (const authGroup of mockAuthentikGroups){\n                const existingGroup = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.findFirst({\n                    where: {\n                        externalId: authGroup.id\n                    }\n                });\n                if (existingGroup) {\n                    // Update existing group\n                    await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.update({\n                        where: {\n                            id: existingGroup.id\n                        },\n                        data: {\n                            name: authGroup.name,\n                            description: authGroup.description\n                        }\n                    });\n                    updated++;\n                } else {\n                    // Create new group\n                    await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.create({\n                        data: {\n                            name: authGroup.name,\n                            description: authGroup.description,\n                            externalId: authGroup.id\n                        }\n                    });\n                    created++;\n                }\n            }\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Authentik sync completed: ${created} created, ${updated} updated`);\n            return {\n                created,\n                updated,\n                total: mockAuthentikGroups.length\n            };\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error syncing with Authentik:\", error);\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZXIudHM/Y2M1OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL21vZGVscy9wcmlzbWFDbGllbnQnO1xyXG5pbXBvcnQgeyBcclxuICBHcm91cFByb2ZpbGUsIFxyXG4gIENyZWF0ZUdyb3VwUmVxdWVzdCwgXHJcbiAgVXBkYXRlR3JvdXBSZXF1ZXN0IFxyXG59IGZyb20gJ0AvdHlwZXMnO1xyXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL3V0aWxzL2xvZ2dlcic7XHJcbmltcG9ydCB7IEVycm9ycyB9IGZyb20gJ0AvbWlkZGxld2FyZS9lcnJvckhhbmRsZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdyb3VwTWFuYWdlciB7XHJcbiAgYXN5bmMgY3JlYXRlR3JvdXAoZGF0YTogQ3JlYXRlR3JvdXBSZXF1ZXN0KTogUHJvbWlzZTxHcm91cFByb2ZpbGU+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIENoZWNrIGlmIGdyb3VwIGFscmVhZHkgZXhpc3RzXHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nR3JvdXAgPSBhd2FpdCBwcmlzbWEuZ3JvdXAuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgbmFtZTogZGF0YS5uYW1lIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoZXhpc3RpbmdHcm91cCkge1xyXG4gICAgICAgIHRocm93IEVycm9ycy5DT05GTElDVCgnR3JvdXAgd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHMnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZ3JvdXAgPSBhd2FpdCBwcmlzbWEuZ3JvdXAuY3JlYXRlKHtcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgIGV4dGVybmFsSWQ6IGRhdGEuZXh0ZXJuYWxJZFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBsb2dnZXIuaW5mbyhgQ3JlYXRlZCBncm91cDogJHtncm91cC5uYW1lfWApO1xyXG4gICAgICByZXR1cm4gZ3JvdXA7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGdyb3VwOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRHcm91cEJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8R3JvdXBQcm9maWxlPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBncm91cCA9IGF3YWl0IHByaXNtYS5ncm91cC5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgIHVzZXJHcm91cHM6IHtcclxuICAgICAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgICAgIHVzZXI6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHRlYW1zOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICghZ3JvdXApIHtcclxuICAgICAgICB0aHJvdyBFcnJvcnMuTk9UX0ZPVU5EKCdHcm91cCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZ3JvdXA7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGdldHRpbmcgZ3JvdXAgJHtpZH06YCwgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEFsbEdyb3VwcygpOiBQcm9taXNlPEdyb3VwUHJvZmlsZVtdPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBncm91cHMgPSBhd2FpdCBwcmlzbWEuZ3JvdXAuZmluZE1hbnkoe1xyXG4gICAgICAgIG9yZGVyQnk6IHsgbmFtZTogJ2FzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICBfY291bnQ6IHtcclxuICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgdXNlckdyb3VwczogdHJ1ZSxcclxuICAgICAgICAgICAgICB0ZWFtczogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBncm91cHM7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGdldHRpbmcgYWxsIGdyb3VwczonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlR3JvdXAoaWQ6IHN0cmluZywgZGF0YTogVXBkYXRlR3JvdXBSZXF1ZXN0KTogUHJvbWlzZTxHcm91cFByb2ZpbGU+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIENoZWNrIGlmIG5hbWUgaXMgYmVpbmcgY2hhbmdlZCBhbmQgaWYgaXQgY29uZmxpY3RzXHJcbiAgICAgIGlmIChkYXRhLm5hbWUpIHtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0dyb3VwID0gYXdhaXQgcHJpc21hLmdyb3VwLmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICAgIGlkOiB7IG5vdDogaWQgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZXhpc3RpbmdHcm91cCkge1xyXG4gICAgICAgICAgdGhyb3cgRXJyb3JzLkNPTkZMSUNUKCdHcm91cCB3aXRoIHRoaXMgbmFtZSBhbHJlYWR5IGV4aXN0cycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZ3JvdXAgPSBhd2FpdCBwcmlzbWEuZ3JvdXAudXBkYXRlKHtcclxuICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgZXh0ZXJuYWxJZDogZGF0YS5leHRlcm5hbElkXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGxvZ2dlci5pbmZvKGBVcGRhdGVkIGdyb3VwOiAke2dyb3VwLm5hbWV9YCk7XHJcbiAgICAgIHJldHVybiBncm91cDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgdXBkYXRpbmcgZ3JvdXAgJHtpZH06YCwgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZUdyb3VwKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIENoZWNrIGlmIGdyb3VwIGhhcyBtZW1iZXJzIG9yIHRlYW1zXHJcbiAgICAgIGNvbnN0IGdyb3VwID0gYXdhaXQgcHJpc21hLmdyb3VwLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgX2NvdW50OiB7XHJcbiAgICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICAgIHVzZXJHcm91cHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgdGVhbXM6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIWdyb3VwKSB7XHJcbiAgICAgICAgdGhyb3cgRXJyb3JzLk5PVF9GT1VORCgnR3JvdXAnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGdyb3VwLl9jb3VudC51c2VyR3JvdXBzID4gMCkge1xyXG4gICAgICAgIHRocm93IEVycm9ycy5DT05GTElDVCgnQ2Fubm90IGRlbGV0ZSBncm91cCB3aXRoIG1lbWJlcnMnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGdyb3VwLl9jb3VudC50ZWFtcyA+IDApIHtcclxuICAgICAgICB0aHJvdyBFcnJvcnMuQ09ORkxJQ1QoJ0Nhbm5vdCBkZWxldGUgZ3JvdXAgd2l0aCB0ZWFtcycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCBwcmlzbWEuZ3JvdXAuZGVsZXRlKHtcclxuICAgICAgICB3aGVyZTogeyBpZCB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgbG9nZ2VyLmluZm8oYERlbGV0ZWQgZ3JvdXA6ICR7aWR9YCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGRlbGV0aW5nIGdyb3VwICR7aWR9OmAsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRHcm91cE1lbWJlcnMoaWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZ3JvdXAgPSBhd2FpdCBwcmlzbWEuZ3JvdXAuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICB1c2VyR3JvdXBzOiB7XHJcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgIGVtYWlsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgcm9sZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgcGFpZFN0YXR1czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgam9pbmVkQXQ6IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9yZGVyQnk6IHtcclxuICAgICAgICAgICAgICBqb2luZWRBdDogJ2FzYydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIWdyb3VwKSB7XHJcbiAgICAgICAgdGhyb3cgRXJyb3JzLk5PVF9GT1VORCgnR3JvdXAnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGdyb3VwLnVzZXJHcm91cHMubWFwKHVnID0+ICh7XHJcbiAgICAgICAgLi4udWcudXNlcixcclxuICAgICAgICBqb2luZWRBdDogdWcuam9pbmVkQXRcclxuICAgICAgfSkpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBnZXR0aW5nIGdyb3VwIG1lbWJlcnMgJHtpZH06YCwgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHN5bmNXaXRoQXV0aGVudGlrKCk6IFByb21pc2U8eyBjcmVhdGVkOiBudW1iZXI7IHVwZGF0ZWQ6IG51bWJlcjsgdG90YWw6IG51bWJlciB9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsb2dnZXIuaW5mbygnU3RhcnRpbmcgQXV0aGVudGlrIGdyb3VwIHN5bmMuLi4nKTtcclxuXHJcbiAgICAgIC8vIE1vY2sgQXV0aGVudGlrIEFQSSBjYWxsIC0gcmVwbGFjZSB3aXRoIGFjdHVhbCBpbnRlZ3JhdGlvblxyXG4gICAgICBjb25zdCBtb2NrQXV0aGVudGlrR3JvdXBzID0gW1xyXG4gICAgICAgIHsgaWQ6ICdhdXRoLWdyb3VwLTEnLCBuYW1lOiAnQ29tcGV0aXRpb24gVGVhbScsIGRlc2NyaXB0aW9uOiAnQ29tcGV0aXRpb24gdGVhbSBtZW1iZXJzJyB9LFxyXG4gICAgICAgIHsgaWQ6ICdhdXRoLWdyb3VwLTInLCBuYW1lOiAnRGV2ZWxvcG1lbnQgVGVhbScsIGRlc2NyaXB0aW9uOiAnRGV2ZWxvcG1lbnQgdGVhbSBtZW1iZXJzJyB9LFxyXG4gICAgICAgIHsgaWQ6ICdhdXRoLWdyb3VwLTMnLCBuYW1lOiAnRXhlY3V0aXZlIEJvYXJkJywgZGVzY3JpcHRpb246ICdFeGVjdXRpdmUgYm9hcmQgbWVtYmVycycgfSxcclxuICAgICAgICB7IGlkOiAnYXV0aC1ncm91cC00JywgbmFtZTogJ0dlbmVyYWwgTWVtYmVycycsIGRlc2NyaXB0aW9uOiAnR2VuZXJhbCBjbHViIG1lbWJlcnMnIH1cclxuICAgICAgXTtcclxuXHJcbiAgICAgIGxldCBjcmVhdGVkID0gMDtcclxuICAgICAgbGV0IHVwZGF0ZWQgPSAwO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBhdXRoR3JvdXAgb2YgbW9ja0F1dGhlbnRpa0dyb3Vwcykge1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nR3JvdXAgPSBhd2FpdCBwcmlzbWEuZ3JvdXAuZmluZEZpcnN0KHtcclxuICAgICAgICAgIHdoZXJlOiB7IGV4dGVybmFsSWQ6IGF1dGhHcm91cC5pZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChleGlzdGluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgZ3JvdXBcclxuICAgICAgICAgIGF3YWl0IHByaXNtYS5ncm91cC51cGRhdGUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogZXhpc3RpbmdHcm91cC5pZCB9LFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgbmFtZTogYXV0aEdyb3VwLm5hbWUsXHJcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGF1dGhHcm91cC5kZXNjcmlwdGlvblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHVwZGF0ZWQrKztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gQ3JlYXRlIG5ldyBncm91cFxyXG4gICAgICAgICAgYXdhaXQgcHJpc21hLmdyb3VwLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICBuYW1lOiBhdXRoR3JvdXAubmFtZSxcclxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYXV0aEdyb3VwLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgIGV4dGVybmFsSWQ6IGF1dGhHcm91cC5pZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGNyZWF0ZWQrKztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxvZ2dlci5pbmZvKGBBdXRoZW50aWsgc3luYyBjb21wbGV0ZWQ6ICR7Y3JlYXRlZH0gY3JlYXRlZCwgJHt1cGRhdGVkfSB1cGRhdGVkYCk7XHJcbiAgICAgIHJldHVybiB7IGNyZWF0ZWQsIHVwZGF0ZWQsIHRvdGFsOiBtb2NrQXV0aGVudGlrR3JvdXBzLmxlbmd0aCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzeW5jaW5nIHdpdGggQXV0aGVudGlrOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJsb2dnZXIiLCJFcnJvcnMiLCJHcm91cE1hbmFnZXIiLCJjcmVhdGVHcm91cCIsImRhdGEiLCJleGlzdGluZ0dyb3VwIiwiZ3JvdXAiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJuYW1lIiwiQ09ORkxJQ1QiLCJjcmVhdGUiLCJkZXNjcmlwdGlvbiIsImV4dGVybmFsSWQiLCJpbmZvIiwiZXJyb3IiLCJnZXRHcm91cEJ5SWQiLCJpZCIsImluY2x1ZGUiLCJ1c2VyR3JvdXBzIiwidXNlciIsInRlYW1zIiwiTk9UX0ZPVU5EIiwiZ2V0QWxsR3JvdXBzIiwiZ3JvdXBzIiwiZmluZE1hbnkiLCJvcmRlckJ5IiwiX2NvdW50Iiwic2VsZWN0IiwidXBkYXRlR3JvdXAiLCJmaW5kRmlyc3QiLCJub3QiLCJ1cGRhdGUiLCJkZWxldGVHcm91cCIsImRlbGV0ZSIsImdldEdyb3VwTWVtYmVycyIsImVtYWlsIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJkaXNwbGF5TmFtZSIsInJvbGUiLCJwYWlkU3RhdHVzIiwiam9pbmVkQXQiLCJtYXAiLCJ1ZyIsInN5bmNXaXRoQXV0aGVudGlrIiwibW9ja0F1dGhlbnRpa0dyb3VwcyIsImNyZWF0ZWQiLCJ1cGRhdGVkIiwiYXV0aEdyb3VwIiwidG90YWwiLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/managers/groupManager.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/authMiddleware.ts":
/*!******************************************!*\
  !*** ./src/middleware/authMiddleware.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _models_prismaClient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/prismaClient */ \"(api)/./src/models/prismaClient.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/logger */ \"(api)/./src/utils/logger.ts\");\n\n\n\n// Helper function to determine effective role based on OIDC groups\nfunction getEffectiveRole(userRole, authentikGroups) {\n    // If user has tech-team group, elevate to admin regardless of base role\n    if (authentikGroups.includes(\"tech-team\")) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"User has tech-team group, elevating to admin role\", {\n            originalRole: userRole,\n            authentikGroups\n        });\n        return \"ADMIN\";\n    }\n    return userRole;\n}\nfunction withAuth(handler) {\n    return async (req, res)=>{\n        try {\n            // Get JWT token from Authorization header\n            const authHeader = req.headers.authorization;\n            if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn(\"No valid authorization header\", {\n                    path: req.url\n                });\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"No valid token provided\"\n                });\n            }\n            const token = authHeader.substring(7); // Remove 'Bearer ' prefix\n            // Verify JWT token\n            let decoded;\n            try {\n                decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, process.env.JWT_SECRET || \"fallback-secret\");\n            } catch (error) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn(\"Invalid JWT token\", {\n                    error,\n                    path: req.url\n                });\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"Invalid token\"\n                });\n            }\n            if (!decoded || !decoded.id) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn(\"Invalid token payload\", {\n                    path: req.url\n                });\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"Invalid token payload\"\n                });\n            }\n            // Get fresh user data from database\n            const user = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n                where: {\n                    id: decoded.id\n                },\n                select: {\n                    id: true,\n                    email: true,\n                    username: true,\n                    firstName: true,\n                    lastName: true,\n                    role: true\n                }\n            });\n            if (!user) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn(\"User not found\", {\n                    userId: decoded.id,\n                    path: req.url\n                });\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"User not found\"\n                });\n            }\n            // Get user groups\n            const userGroups = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_1__.prisma.userGroup.findMany({\n                where: {\n                    userId: user.id\n                },\n                include: {\n                    group: {\n                        select: {\n                            name: true\n                        }\n                    }\n                }\n            });\n            // Create authenticated request with user info\n            const authenticatedReq = req;\n            authenticatedReq.user = {\n                id: user.id,\n                email: user.email,\n                username: user.username || undefined,\n                firstName: user.firstName,\n                lastName: user.lastName,\n                role: getEffectiveRole(user.role, userGroups.map((ug)=>ug.group.name)),\n                groups: userGroups.map((ug)=>ug.group.name)\n            };\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"Authentication successful\", {\n                userId: user.id,\n                userRole: authenticatedReq.user.role,\n                path: req.url\n            });\n            // Call the original handler\n            await handler(authenticatedReq, res);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Authentication middleware error\", {\n                error,\n                path: req.url\n            });\n            return res.status(500).json({\n                error: \"Internal server error\",\n                message: \"Authentication failed\"\n            });\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS0ksS0FBSztnQkFDakJDLFVBQVVMLEtBQUtLLFFBQVEsSUFBSVk7Z0JBQzNCWCxXQUFXTixLQUFLTSxTQUFTO2dCQUN6QkMsVUFBVVAsS0FBS08sUUFBUTtnQkFDdkJDLE1BQU1yQyxpQkFBaUI2QixLQUFLUSxJQUFJLEVBQUVFLFdBQVdRLEdBQUcsQ0FBQ0MsQ0FBQUEsS0FBTUEsR0FBR0wsS0FBSyxDQUFDQyxJQUFJO2dCQUNwRUssUUFBUVYsV0FBV1EsR0FBRyxDQUFDQyxDQUFBQSxLQUFNQSxHQUFHTCxLQUFLLENBQUNDLElBQUk7WUFDNUM7WUFFQTdDLGlEQUFNQSxDQUFDSyxJQUFJLENBQUMsNkJBQTZCO2dCQUN2Q2tDLFFBQVFULEtBQUtELEVBQUU7Z0JBQ2YzQixVQUFVNEMsaUJBQWlCaEIsSUFBSSxDQUFDUSxJQUFJO2dCQUNwQ3RCLE1BQU1QLElBQUlRLEdBQUc7WUFDZjtZQUVBLDRCQUE0QjtZQUM1QixNQUFNVCxRQUFRc0Msa0JBQWtCcEM7UUFDbEMsRUFBRSxPQUFPVSxPQUFPO1lBQ2RwQixpREFBTUEsQ0FBQ29CLEtBQUssQ0FBQyxtQ0FBbUM7Z0JBQUVBO2dCQUFPSixNQUFNUCxJQUFJUSxHQUFHO1lBQUM7WUFDdkUsT0FBT1AsSUFBSVEsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLE9BQU87Z0JBQ1BDLFNBQVM7WUFDWDtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21ybTM2MC1iYWNrZW5kLy4vc3JjL21pZGRsZXdhcmUvYXV0aE1pZGRsZXdhcmUudHM/Mjg0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi9tb2RlbHMvcHJpc21hQ2xpZW50JztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aGVudGljYXRlZFJlcXVlc3QgZXh0ZW5kcyBOZXh0QXBpUmVxdWVzdCB7XG4gIHVzZXI6IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gICAgdXNlcm5hbWU/OiBzdHJpbmc7XG4gICAgZmlyc3ROYW1lOiBzdHJpbmc7XG4gICAgbGFzdE5hbWU6IHN0cmluZztcbiAgICByb2xlOiBzdHJpbmc7XG4gICAgZ3JvdXBzOiBzdHJpbmdbXTtcbiAgfTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlZmZlY3RpdmUgcm9sZSBiYXNlZCBvbiBPSURDIGdyb3Vwc1xuZnVuY3Rpb24gZ2V0RWZmZWN0aXZlUm9sZSh1c2VyUm9sZTogc3RyaW5nLCBhdXRoZW50aWtHcm91cHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgLy8gSWYgdXNlciBoYXMgdGVjaC10ZWFtIGdyb3VwLCBlbGV2YXRlIHRvIGFkbWluIHJlZ2FyZGxlc3Mgb2YgYmFzZSByb2xlXG4gIGlmIChhdXRoZW50aWtHcm91cHMuaW5jbHVkZXMoJ3RlY2gtdGVhbScpKSB7XG4gICAgbG9nZ2VyLmluZm8oJ1VzZXIgaGFzIHRlY2gtdGVhbSBncm91cCwgZWxldmF0aW5nIHRvIGFkbWluIHJvbGUnLCB7XG4gICAgICBvcmlnaW5hbFJvbGU6IHVzZXJSb2xlLFxuICAgICAgYXV0aGVudGlrR3JvdXBzXG4gICAgfSk7XG4gICAgcmV0dXJuICdBRE1JTic7XG4gIH1cbiAgcmV0dXJuIHVzZXJSb2xlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2l0aEF1dGgoaGFuZGxlcjogKHJlcTogQXV0aGVudGljYXRlZFJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiBQcm9taXNlPHZvaWQ+KSB7XG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IEpXVCB0b2tlbiBmcm9tIEF1dGhvcml6YXRpb24gaGVhZGVyXG4gICAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgICAgIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ05vIHZhbGlkIGF1dGhvcml6YXRpb24gaGVhZGVyJywgeyBwYXRoOiByZXEudXJsIH0pO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBcbiAgICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcsXG4gICAgICAgICAgbWVzc2FnZTogJ05vIHZhbGlkIHRva2VuIHByb3ZpZGVkJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zdWJzdHJpbmcoNyk7IC8vIFJlbW92ZSAnQmVhcmVyICcgcHJlZml4XG5cbiAgICAgIC8vIFZlcmlmeSBKV1QgdG9rZW5cbiAgICAgIGxldCBkZWNvZGVkOiBhbnk7XG4gICAgICB0cnkge1xuICAgICAgICBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAnZmFsbGJhY2stc2VjcmV0Jyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIud2FybignSW52YWxpZCBKV1QgdG9rZW4nLCB7IGVycm9yLCBwYXRoOiByZXEudXJsIH0pO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBcbiAgICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgdG9rZW4nIFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFkZWNvZGVkIHx8ICFkZWNvZGVkLmlkKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdJbnZhbGlkIHRva2VuIHBheWxvYWQnLCB7IHBhdGg6IHJlcS51cmwgfSk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IFxuICAgICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCB0b2tlbiBwYXlsb2FkJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBmcmVzaCB1c2VyIGRhdGEgZnJvbSBkYXRhYmFzZVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogZGVjb2RlZC5pZCB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICB1c2VybmFtZTogdHJ1ZSxcbiAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgcm9sZTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdVc2VyIG5vdCBmb3VuZCcsIHsgdXNlcklkOiBkZWNvZGVkLmlkLCBwYXRoOiByZXEudXJsIH0pO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBcbiAgICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB1c2VyIGdyb3Vwc1xuICAgICAgY29uc3QgdXNlckdyb3VwcyA9IGF3YWl0IHByaXNtYS51c2VyR3JvdXAuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyB1c2VySWQ6IHVzZXIuaWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGdyb3VwOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgbmFtZTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWF0ZSBhdXRoZW50aWNhdGVkIHJlcXVlc3Qgd2l0aCB1c2VyIGluZm9cbiAgICAgIGNvbnN0IGF1dGhlbnRpY2F0ZWRSZXEgPSByZXEgYXMgQXV0aGVudGljYXRlZFJlcXVlc3Q7XG4gICAgICBhdXRoZW50aWNhdGVkUmVxLnVzZXIgPSB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUgfHwgdW5kZWZpbmVkLFxuICAgICAgICBmaXJzdE5hbWU6IHVzZXIuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0TmFtZTogdXNlci5sYXN0TmFtZSxcbiAgICAgICAgcm9sZTogZ2V0RWZmZWN0aXZlUm9sZSh1c2VyLnJvbGUsIHVzZXJHcm91cHMubWFwKHVnID0+IHVnLmdyb3VwLm5hbWUpKSxcbiAgICAgICAgZ3JvdXBzOiB1c2VyR3JvdXBzLm1hcCh1ZyA9PiB1Zy5ncm91cC5uYW1lKVxuICAgICAgfTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ0F1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwnLCB7IFxuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsIFxuICAgICAgICB1c2VyUm9sZTogYXV0aGVudGljYXRlZFJlcS51c2VyLnJvbGUsXG4gICAgICAgIHBhdGg6IHJlcS51cmwgXG4gICAgICB9KTtcblxuICAgICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgaGFuZGxlclxuICAgICAgYXdhaXQgaGFuZGxlcihhdXRoZW50aWNhdGVkUmVxLCByZXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0F1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmUgZXJyb3InLCB7IGVycm9yLCBwYXRoOiByZXEudXJsIH0pO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXG4gICAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICAgICAgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZCcgXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG4iXSwibmFtZXMiOlsiand0IiwicHJpc21hIiwibG9nZ2VyIiwiZ2V0RWZmZWN0aXZlUm9sZSIsInVzZXJSb2xlIiwiYXV0aGVudGlrR3JvdXBzIiwiaW5jbHVkZXMiLCJpbmZvIiwib3JpZ2luYWxSb2xlIiwid2l0aEF1dGgiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhcnRzV2l0aCIsIndhcm4iLCJwYXRoIiwidXJsIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwibWVzc2FnZSIsInRva2VuIiwic3Vic3RyaW5nIiwiZGVjb2RlZCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiaWQiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwic2VsZWN0IiwiZW1haWwiLCJ1c2VybmFtZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicm9sZSIsInVzZXJJZCIsInVzZXJHcm91cHMiLCJ1c2VyR3JvdXAiLCJmaW5kTWFueSIsImluY2x1ZGUiLCJncm91cCIsIm5hbWUiLCJhdXRoZW50aWNhdGVkUmVxIiwidW5kZWZpbmVkIiwibWFwIiwidWciLCJncm91cHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/middleware/authMiddleware.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/corsMiddleware.ts":
/*!******************************************!*\
  !*** ./src/middleware/corsMiddleware.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withCORS: () => (/* binding */ withCORS)\n/* harmony export */ });\nfunction withCORS(handler) {\n    return async (req, res)=>{\n        // Set CORS headers\n        const allowedOrigin = process.env.FRONTEND_URL || \"http://localhost:3011\";\n        res.setHeader(\"Access-Control-Allow-Credentials\", \"true\");\n        res.setHeader(\"Access-Control-Allow-Origin\", allowedOrigin);\n        res.setHeader(\"Access-Control-Allow-Methods\", \"GET,OPTIONS,PATCH,DELETE,POST,PUT\");\n        res.setHeader(\"Access-Control-Allow-Headers\", \"X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Authorization\");\n        // Handle preflight request\n        if (req.method === \"OPTIONS\") {\n            res.status(200).end();\n            return;\n        }\n        // Call the original handler\n        await handler(req, res);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbWlkZGxld2FyZS9jb3JzTWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sU0FBU0EsU0FBU0MsT0FBcUU7SUFDNUYsT0FBTyxPQUFPQyxLQUFxQkM7UUFDakMsbUJBQW1CO1FBQ25CLE1BQU1DLGdCQUFnQkMsUUFBUUMsR0FBRyxDQUFDQyxZQUFZLElBQUk7UUFFbERKLElBQUlLLFNBQVMsQ0FBQyxvQ0FBb0M7UUFDbERMLElBQUlLLFNBQVMsQ0FBQywrQkFBK0JKO1FBQzdDRCxJQUFJSyxTQUFTLENBQUMsZ0NBQWdDO1FBQzlDTCxJQUFJSyxTQUFTLENBQUMsZ0NBQWdDO1FBRTlDLDJCQUEyQjtRQUMzQixJQUFJTixJQUFJTyxNQUFNLEtBQUssV0FBVztZQUM1Qk4sSUFBSU8sTUFBTSxDQUFDLEtBQUtDLEdBQUc7WUFDbkI7UUFDRjtRQUVBLDRCQUE0QjtRQUM1QixNQUFNVixRQUFRQyxLQUFLQztJQUNyQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvLi9zcmMvbWlkZGxld2FyZS9jb3JzTWlkZGxld2FyZS50cz8zYjljIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhDT1JTKGhhbmRsZXI6IChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4gUHJvbWlzZTx2b2lkPikge1xuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XG4gICAgLy8gU2V0IENPUlMgaGVhZGVyc1xuICAgIGNvbnN0IGFsbG93ZWRPcmlnaW4gPSBwcm9jZXNzLmVudi5GUk9OVEVORF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAxMSc7XG4gICAgXG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsIGFsbG93ZWRPcmlnaW4pO1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULE9QVElPTlMsUEFUQ0gsREVMRVRFLFBPU1QsUFVUJyk7XG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdYLUNTUkYtVG9rZW4sIFgtUmVxdWVzdGVkLVdpdGgsIEFjY2VwdCwgQWNjZXB0LVZlcnNpb24sIENvbnRlbnQtTGVuZ3RoLCBDb250ZW50LU1ENSwgQ29udGVudC1UeXBlLCBEYXRlLCBYLUFwaS1WZXJzaW9uLCBBdXRob3JpemF0aW9uJyk7XG5cbiAgICAvLyBIYW5kbGUgcHJlZmxpZ2h0IHJlcXVlc3RcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuZW5kKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgaGFuZGxlclxuICAgIGF3YWl0IGhhbmRsZXIocmVxLCByZXMpO1xuICB9O1xufVxuIl0sIm5hbWVzIjpbIndpdGhDT1JTIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImFsbG93ZWRPcmlnaW4iLCJwcm9jZXNzIiwiZW52IiwiRlJPTlRFTkRfVVJMIiwic2V0SGVhZGVyIiwibWV0aG9kIiwic3RhdHVzIiwiZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/middleware/corsMiddleware.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/errorHandler.ts":
/*!****************************************!*\
  !*** ./src/middleware/errorHandler.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Errors: () => (/* binding */ Errors),\n/* harmony export */   createError: () => (/* binding */ createError),\n/* harmony export */   handleApiError: () => (/* binding */ handleApiError),\n/* harmony export */   withErrorHandler: () => (/* binding */ withErrorHandler)\n/* harmony export */ });\nfunction createError(message, statusCode = 500, code) {\n    const error = new Error(message);\n    error.statusCode = statusCode;\n    error.code = code;\n    return error;\n}\nfunction handleApiError(error, req, res) {\n    console.error(\"API Error:\", {\n        error,\n        url: req.url,\n        method: req.method,\n        timestamp: new Date().toISOString()\n    });\n    if (error instanceof Error) {\n        const apiError = error;\n        if (apiError.statusCode) {\n            return res.status(apiError.statusCode).json({\n                success: false,\n                error: apiError.message,\n                code: apiError.code\n            });\n        }\n    }\n    // Default error response\n    return res.status(500).json({\n        success: false,\n        error: \"Internal server error\"\n    });\n}\nfunction withErrorHandler(handler) {\n    return async (req, res)=>{\n        try {\n            await handler(req, res);\n        } catch (error) {\n            handleApiError(error, req, res);\n        }\n    };\n}\n// Common error types\nconst Errors = {\n    NOT_FOUND: (resource)=>createError(`${resource} not found`, 404, \"NOT_FOUND\"),\n    UNAUTHORIZED: ()=>createError(\"Unauthorized\", 401, \"UNAUTHORIZED\"),\n    FORBIDDEN: ()=>createError(\"Forbidden\", 403, \"FORBIDDEN\"),\n    BAD_REQUEST: (message)=>createError(message, 400, \"BAD_REQUEST\"),\n    VALIDATION_ERROR: (message)=>createError(message, 400, \"VALIDATION_ERROR\"),\n    CONFLICT: (message)=>createError(message, 409, \"CONFLICT\"),\n    INTERNAL_ERROR: ()=>createError(\"Internal server error\", 500, \"INTERNAL_ERROR\")\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbWlkZGxld2FyZS9lcnJvckhhbmRsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQU9PLFNBQVNBLFlBQVlDLE9BQWUsRUFBRUMsYUFBcUIsR0FBRyxFQUFFQyxJQUFhO0lBQ2xGLE1BQU1DLFFBQVEsSUFBSUMsTUFBTUo7SUFDeEJHLE1BQU1GLFVBQVUsR0FBR0E7SUFDbkJFLE1BQU1ELElBQUksR0FBR0E7SUFDYixPQUFPQztBQUNUO0FBRU8sU0FBU0UsZUFDZEYsS0FBYyxFQUNkRyxHQUFtQixFQUNuQkMsR0FBb0I7SUFFcEJDLFFBQVFMLEtBQUssQ0FBQyxjQUFjO1FBQzFCQTtRQUNBTSxLQUFLSCxJQUFJRyxHQUFHO1FBQ1pDLFFBQVFKLElBQUlJLE1BQU07UUFDbEJDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztJQUNuQztJQUVBLElBQUlWLGlCQUFpQkMsT0FBTztRQUMxQixNQUFNVSxXQUFXWDtRQUVqQixJQUFJVyxTQUFTYixVQUFVLEVBQUU7WUFDdkIsT0FBT00sSUFBSVEsTUFBTSxDQUFDRCxTQUFTYixVQUFVLEVBQUVlLElBQUksQ0FBQztnQkFDMUNDLFNBQVM7Z0JBQ1RkLE9BQU9XLFNBQVNkLE9BQU87Z0JBQ3ZCRSxNQUFNWSxTQUFTWixJQUFJO1lBQ3JCO1FBQ0Y7SUFDRjtJQUVBLHlCQUF5QjtJQUN6QixPQUFPSyxJQUFJUSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1FBQzFCQyxTQUFTO1FBQ1RkLE9BQU87SUFDVDtBQUNGO0FBRU8sU0FBU2UsaUJBQ2RDLE9BQXFFO0lBRXJFLE9BQU8sT0FBT2IsS0FBcUJDO1FBQ2pDLElBQUk7WUFDRixNQUFNWSxRQUFRYixLQUFLQztRQUNyQixFQUFFLE9BQU9KLE9BQU87WUFDZEUsZUFBZUYsT0FBT0csS0FBS0M7UUFDN0I7SUFDRjtBQUNGO0FBRUEscUJBQXFCO0FBQ2QsTUFBTWEsU0FBUztJQUNwQkMsV0FBVyxDQUFDQyxXQUFxQnZCLFlBQVksQ0FBQyxFQUFFdUIsU0FBUyxVQUFVLENBQUMsRUFBRSxLQUFLO0lBQzNFQyxjQUFjLElBQU14QixZQUFZLGdCQUFnQixLQUFLO0lBQ3JEeUIsV0FBVyxJQUFNekIsWUFBWSxhQUFhLEtBQUs7SUFDL0MwQixhQUFhLENBQUN6QixVQUFvQkQsWUFBWUMsU0FBUyxLQUFLO0lBQzVEMEIsa0JBQWtCLENBQUMxQixVQUFvQkQsWUFBWUMsU0FBUyxLQUFLO0lBQ2pFMkIsVUFBVSxDQUFDM0IsVUFBb0JELFlBQVlDLFNBQVMsS0FBSztJQUN6RDRCLGdCQUFnQixJQUFNN0IsWUFBWSx5QkFBeUIsS0FBSztBQUNsRSxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvLi9zcmMvbWlkZGxld2FyZS9lcnJvckhhbmRsZXIudHM/N2E4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFwaUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gIHN0YXR1c0NvZGU/OiBudW1iZXI7XHJcbiAgY29kZT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1lc3NhZ2U6IHN0cmluZywgc3RhdHVzQ29kZTogbnVtYmVyID0gNTAwLCBjb2RlPzogc3RyaW5nKTogQXBpRXJyb3Ige1xyXG4gIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpIGFzIEFwaUVycm9yO1xyXG4gIGVycm9yLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xyXG4gIGVycm9yLmNvZGUgPSBjb2RlO1xyXG4gIHJldHVybiBlcnJvcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUFwaUVycm9yKFxyXG4gIGVycm9yOiB1bmtub3duLFxyXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXHJcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2VcclxuKSB7XHJcbiAgY29uc29sZS5lcnJvcignQVBJIEVycm9yOicsIHtcclxuICAgIGVycm9yLFxyXG4gICAgdXJsOiByZXEudXJsLFxyXG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxyXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICB9KTtcclxuXHJcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgIGNvbnN0IGFwaUVycm9yID0gZXJyb3IgYXMgQXBpRXJyb3I7XHJcbiAgICBcclxuICAgIGlmIChhcGlFcnJvci5zdGF0dXNDb2RlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKGFwaUVycm9yLnN0YXR1c0NvZGUpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBhcGlFcnJvci5tZXNzYWdlLFxyXG4gICAgICAgIGNvZGU6IGFwaUVycm9yLmNvZGVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBEZWZhdWx0IGVycm9yIHJlc3BvbnNlXHJcbiAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoRXJyb3JIYW5kbGVyKFxyXG4gIGhhbmRsZXI6IChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4gUHJvbWlzZTx2b2lkPlxyXG4pIHtcclxuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGhhbmRsZUFwaUVycm9yKGVycm9yLCByZXEsIHJlcyk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5cclxuLy8gQ29tbW9uIGVycm9yIHR5cGVzXHJcbmV4cG9ydCBjb25zdCBFcnJvcnMgPSB7XHJcbiAgTk9UX0ZPVU5EOiAocmVzb3VyY2U6IHN0cmluZykgPT4gY3JlYXRlRXJyb3IoYCR7cmVzb3VyY2V9IG5vdCBmb3VuZGAsIDQwNCwgJ05PVF9GT1VORCcpLFxyXG4gIFVOQVVUSE9SSVpFRDogKCkgPT4gY3JlYXRlRXJyb3IoJ1VuYXV0aG9yaXplZCcsIDQwMSwgJ1VOQVVUSE9SSVpFRCcpLFxyXG4gIEZPUkJJRERFTjogKCkgPT4gY3JlYXRlRXJyb3IoJ0ZvcmJpZGRlbicsIDQwMywgJ0ZPUkJJRERFTicpLFxyXG4gIEJBRF9SRVFVRVNUOiAobWVzc2FnZTogc3RyaW5nKSA9PiBjcmVhdGVFcnJvcihtZXNzYWdlLCA0MDAsICdCQURfUkVRVUVTVCcpLFxyXG4gIFZBTElEQVRJT05fRVJST1I6IChtZXNzYWdlOiBzdHJpbmcpID0+IGNyZWF0ZUVycm9yKG1lc3NhZ2UsIDQwMCwgJ1ZBTElEQVRJT05fRVJST1InKSxcclxuICBDT05GTElDVDogKG1lc3NhZ2U6IHN0cmluZykgPT4gY3JlYXRlRXJyb3IobWVzc2FnZSwgNDA5LCAnQ09ORkxJQ1QnKSxcclxuICBJTlRFUk5BTF9FUlJPUjogKCkgPT4gY3JlYXRlRXJyb3IoJ0ludGVybmFsIHNlcnZlciBlcnJvcicsIDUwMCwgJ0lOVEVSTkFMX0VSUk9SJylcclxufTtcclxuIl0sIm5hbWVzIjpbImNyZWF0ZUVycm9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJjb2RlIiwiZXJyb3IiLCJFcnJvciIsImhhbmRsZUFwaUVycm9yIiwicmVxIiwicmVzIiwiY29uc29sZSIsInVybCIsIm1ldGhvZCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImFwaUVycm9yIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJ3aXRoRXJyb3JIYW5kbGVyIiwiaGFuZGxlciIsIkVycm9ycyIsIk5PVF9GT1VORCIsInJlc291cmNlIiwiVU5BVVRIT1JJWkVEIiwiRk9SQklEREVOIiwiQkFEX1JFUVVFU1QiLCJWQUxJREFUSU9OX0VSUk9SIiwiQ09ORkxJQ1QiLCJJTlRFUk5BTF9FUlJPUiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/middleware/errorHandler.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/permissionMiddleware.ts":
/*!************************************************!*\
  !*** ./src/middleware/permissionMiddleware.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withPermissions: () => (/* binding */ withPermissions)\n/* harmony export */ });\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/logger */ \"(api)/./src/utils/logger.ts\");\n\nfunction withPermissions(handler, requiredPermissions) {\n    return async (req, res)=>{\n        try {\n            // Cast to PermissionRequest since this middleware should be used after withAuth\n            const permissionReq = req;\n            if (!permissionReq.user) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn(\"Permission check attempted without authentication\", {\n                    path: req.url,\n                    method: req.method\n                });\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"Authentication required\"\n                });\n            }\n            // Get required permissions (either static array or dynamic function)\n            const permissions = typeof requiredPermissions === \"function\" ? requiredPermissions(req) : requiredPermissions;\n            // Check if user has required permissions\n            const hasPermission = await checkPermissions(permissionReq.user, permissions);\n            if (!hasPermission) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn(\"Insufficient permissions\", {\n                    userId: permissionReq.user.id,\n                    userRole: permissionReq.user.role,\n                    requiredPermissions: permissions,\n                    path: req.url\n                });\n                return res.status(403).json({\n                    error: \"Forbidden\",\n                    message: \"Insufficient permissions for this operation\"\n                });\n            }\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Permission check passed\", {\n                userId: permissionReq.user.id,\n                requiredPermissions: permissions,\n                path: req.url\n            });\n            // Call the original handler\n            await handler(permissionReq, res);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Permission middleware error\", {\n                error,\n                path: req.url\n            });\n            return res.status(500).json({\n                error: \"Internal server error\",\n                message: \"Permission check failed\"\n            });\n        }\n    };\n}\nasync function checkPermissions(user, requiredPermissions) {\n    // For now, implement a simple role-based permission system\n    // This can be enhanced later with a more sophisticated permission system\n    const rolePermissions = {\n        \"ADMIN\": [\n            \"users:read\",\n            \"users:create\",\n            \"users:update\",\n            \"users:delete\",\n            \"groups:read\",\n            \"groups:create\",\n            \"groups:update\",\n            \"groups:delete\",\n            \"events:read\",\n            \"events:create\",\n            \"events:update\",\n            \"events:delete\",\n            \"teams:read\",\n            \"teams:create\",\n            \"teams:update\",\n            \"teams:delete\",\n            \"tasks:read\",\n            \"tasks:create\",\n            \"tasks:update\",\n            \"tasks:delete\"\n        ],\n        \"EXEC_BOARD\": [\n            \"users:read\",\n            \"users:create\",\n            \"users:update\",\n            \"groups:read\",\n            \"groups:create\",\n            \"groups:update\",\n            \"events:read\",\n            \"events:create\",\n            \"events:update\",\n            \"teams:read\",\n            \"teams:create\",\n            \"teams:update\",\n            \"tasks:read\",\n            \"tasks:create\",\n            \"tasks:update\"\n        ],\n        \"MEMBER\": [\n            \"users:read\",\n            \"groups:read\",\n            \"events:read\",\n            \"teams:read\",\n            \"tasks:read\"\n        ]\n    };\n    // Check if user has tech-team group in authentikGroups (OIDC groups)\n    // If they do, give them admin permissions regardless of their role\n    let effectiveRole = user.role;\n    if (user.authentikGroups && Array.isArray(user.authentikGroups)) {\n        if (user.authentikGroups.includes(\"tech-team\")) {\n            effectiveRole = \"ADMIN\";\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"User has tech-team group, elevating to admin permissions\", {\n                userId: user.id,\n                originalRole: user.role,\n                authentikGroups: user.authentikGroups\n            });\n        }\n    }\n    const userPermissions = rolePermissions[effectiveRole] || [];\n    // Check if user has all required permissions\n    return requiredPermissions.every((permission)=>userPermissions.includes(permission));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbWlkZGxld2FyZS9wZXJtaXNzaW9uTWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUV5QztBQU1sQyxTQUFTQyxnQkFDZEMsT0FBd0UsRUFDeEVDLG1CQUFtRTtJQUVuRSxPQUFPLE9BQU9DLEtBQXFCQztRQUNqQyxJQUFJO1lBQ0YsZ0ZBQWdGO1lBQ2hGLE1BQU1DLGdCQUFnQkY7WUFFdEIsSUFBSSxDQUFDRSxjQUFjQyxJQUFJLEVBQUU7Z0JBQ3ZCUCxpREFBTUEsQ0FBQ1EsSUFBSSxDQUFDLHFEQUFxRDtvQkFDL0RDLE1BQU1MLElBQUlNLEdBQUc7b0JBQ2JDLFFBQVFQLElBQUlPLE1BQU07Z0JBQ3BCO2dCQUVBLE9BQU9OLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQzFCQyxPQUFPO29CQUNQQyxTQUFTO2dCQUNYO1lBQ0Y7WUFFQSxxRUFBcUU7WUFDckUsTUFBTUMsY0FBYyxPQUFPYix3QkFBd0IsYUFDL0NBLG9CQUFvQkMsT0FDcEJEO1lBRUoseUNBQXlDO1lBQ3pDLE1BQU1jLGdCQUFnQixNQUFNQyxpQkFBaUJaLGNBQWNDLElBQUksRUFBRVM7WUFFakUsSUFBSSxDQUFDQyxlQUFlO2dCQUNsQmpCLGlEQUFNQSxDQUFDUSxJQUFJLENBQUMsNEJBQTRCO29CQUN0Q1csUUFBUWIsY0FBY0MsSUFBSSxDQUFDYSxFQUFFO29CQUM3QkMsVUFBVWYsY0FBY0MsSUFBSSxDQUFDZSxJQUFJO29CQUNqQ25CLHFCQUFxQmE7b0JBQ3JCUCxNQUFNTCxJQUFJTSxHQUFHO2dCQUNmO2dCQUVBLE9BQU9MLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQzFCQyxPQUFPO29CQUNQQyxTQUFTO2dCQUNYO1lBQ0Y7WUFFQWYsaURBQU1BLENBQUN1QixJQUFJLENBQUMsMkJBQTJCO2dCQUNyQ0osUUFBUWIsY0FBY0MsSUFBSSxDQUFDYSxFQUFFO2dCQUM3QmpCLHFCQUFxQmE7Z0JBQ3JCUCxNQUFNTCxJQUFJTSxHQUFHO1lBQ2Y7WUFFQSw0QkFBNEI7WUFDNUIsTUFBTVIsUUFBUUksZUFBZUQ7UUFDL0IsRUFBRSxPQUFPUyxPQUFPO1lBQ2RkLGlEQUFNQSxDQUFDYyxLQUFLLENBQUMsK0JBQStCO2dCQUFFQTtnQkFBT0wsTUFBTUwsSUFBSU0sR0FBRztZQUFDO1lBQ25FLE9BQU9MLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxPQUFPO2dCQUNQQyxTQUFTO1lBQ1g7UUFDRjtJQUNGO0FBQ0Y7QUFFQSxlQUFlRyxpQkFBaUJYLElBQVMsRUFBRUosbUJBQTZCO0lBQ3RFLDJEQUEyRDtJQUMzRCx5RUFBeUU7SUFFekUsTUFBTXFCLGtCQUE0QztRQUNoRCxTQUFTO1lBQ1A7WUFBYztZQUFnQjtZQUFnQjtZQUM5QztZQUFlO1lBQWlCO1lBQWlCO1lBQ2pEO1lBQWU7WUFBaUI7WUFBaUI7WUFDakQ7WUFBYztZQUFnQjtZQUFnQjtZQUM5QztZQUFjO1lBQWdCO1lBQWdCO1NBQy9DO1FBQ0QsY0FBYztZQUNaO1lBQWM7WUFBZ0I7WUFDOUI7WUFBZTtZQUFpQjtZQUNoQztZQUFlO1lBQWlCO1lBQ2hDO1lBQWM7WUFBZ0I7WUFDOUI7WUFBYztZQUFnQjtTQUMvQjtRQUNELFVBQVU7WUFDUjtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7SUFDSDtJQUVBLHFFQUFxRTtJQUNyRSxtRUFBbUU7SUFDbkUsSUFBSUMsZ0JBQWdCbEIsS0FBS2UsSUFBSTtJQUM3QixJQUFJZixLQUFLbUIsZUFBZSxJQUFJQyxNQUFNQyxPQUFPLENBQUNyQixLQUFLbUIsZUFBZSxHQUFHO1FBQy9ELElBQUluQixLQUFLbUIsZUFBZSxDQUFDRyxRQUFRLENBQUMsY0FBYztZQUM5Q0osZ0JBQWdCO1lBQ2hCekIsaURBQU1BLENBQUN1QixJQUFJLENBQUMsNERBQTREO2dCQUN0RUosUUFBUVosS0FBS2EsRUFBRTtnQkFDZlUsY0FBY3ZCLEtBQUtlLElBQUk7Z0JBQ3ZCSSxpQkFBaUJuQixLQUFLbUIsZUFBZTtZQUN2QztRQUNGO0lBQ0Y7SUFFQSxNQUFNSyxrQkFBa0JQLGVBQWUsQ0FBQ0MsY0FBYyxJQUFJLEVBQUU7SUFFNUQsNkNBQTZDO0lBQzdDLE9BQU90QixvQkFBb0I2QixLQUFLLENBQUNDLENBQUFBLGFBQWNGLGdCQUFnQkYsUUFBUSxDQUFDSTtBQUMxRSIsInNvdXJjZXMiOlsid2VicGFjazovL21ybTM2MC1iYWNrZW5kLy4vc3JjL21pZGRsZXdhcmUvcGVybWlzc2lvbk1pZGRsZXdhcmUudHM/ZjgxNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBBdXRoZW50aWNhdGVkUmVxdWVzdCB9IGZyb20gJy4vYXV0aE1pZGRsZXdhcmUnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBQZXJtaXNzaW9uUmVxdWVzdCBleHRlbmRzIEF1dGhlbnRpY2F0ZWRSZXF1ZXN0IHtcbiAgLy8gRXh0ZW5kcyBBdXRoZW50aWNhdGVkUmVxdWVzdCB3aXRoIHVzZXIgaW5mb1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2l0aFBlcm1pc3Npb25zKFxuICBoYW5kbGVyOiAocmVxOiBQZXJtaXNzaW9uUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IFByb21pc2U8dm9pZD4sXG4gIHJlcXVpcmVkUGVybWlzc2lvbnM6IHN0cmluZ1tdIHwgKChyZXE6IE5leHRBcGlSZXF1ZXN0KSA9PiBzdHJpbmdbXSlcbikge1xuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENhc3QgdG8gUGVybWlzc2lvblJlcXVlc3Qgc2luY2UgdGhpcyBtaWRkbGV3YXJlIHNob3VsZCBiZSB1c2VkIGFmdGVyIHdpdGhBdXRoXG4gICAgICBjb25zdCBwZXJtaXNzaW9uUmVxID0gcmVxIGFzIFBlcm1pc3Npb25SZXF1ZXN0O1xuXG4gICAgICBpZiAoIXBlcm1pc3Npb25SZXEudXNlcikge1xuICAgICAgICBsb2dnZXIud2FybignUGVybWlzc2lvbiBjaGVjayBhdHRlbXB0ZWQgd2l0aG91dCBhdXRoZW50aWNhdGlvbicsIHsgXG4gICAgICAgICAgcGF0aDogcmVxLnVybCwgXG4gICAgICAgICAgbWV0aG9kOiByZXEubWV0aG9kIFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IFxuICAgICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcbiAgICAgICAgICBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHJlcXVpcmVkIHBlcm1pc3Npb25zIChlaXRoZXIgc3RhdGljIGFycmF5IG9yIGR5bmFtaWMgZnVuY3Rpb24pXG4gICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IHR5cGVvZiByZXF1aXJlZFBlcm1pc3Npb25zID09PSAnZnVuY3Rpb24nIFxuICAgICAgICA/IHJlcXVpcmVkUGVybWlzc2lvbnMocmVxKSBcbiAgICAgICAgOiByZXF1aXJlZFBlcm1pc3Npb25zO1xuXG4gICAgICAvLyBDaGVjayBpZiB1c2VyIGhhcyByZXF1aXJlZCBwZXJtaXNzaW9uc1xuICAgICAgY29uc3QgaGFzUGVybWlzc2lvbiA9IGF3YWl0IGNoZWNrUGVybWlzc2lvbnMocGVybWlzc2lvblJlcS51c2VyLCBwZXJtaXNzaW9ucyk7XG4gICAgICBcbiAgICAgIGlmICghaGFzUGVybWlzc2lvbikge1xuICAgICAgICBsb2dnZXIud2FybignSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zJywgeyBcbiAgICAgICAgICB1c2VySWQ6IHBlcm1pc3Npb25SZXEudXNlci5pZCwgXG4gICAgICAgICAgdXNlclJvbGU6IHBlcm1pc3Npb25SZXEudXNlci5yb2xlLFxuICAgICAgICAgIHJlcXVpcmVkUGVybWlzc2lvbnM6IHBlcm1pc3Npb25zLFxuICAgICAgICAgIHBhdGg6IHJlcS51cmwgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgXG4gICAgICAgICAgZXJyb3I6ICdGb3JiaWRkZW4nLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgZm9yIHRoaXMgb3BlcmF0aW9uJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdQZXJtaXNzaW9uIGNoZWNrIHBhc3NlZCcsIHsgXG4gICAgICAgIHVzZXJJZDogcGVybWlzc2lvblJlcS51c2VyLmlkLCBcbiAgICAgICAgcmVxdWlyZWRQZXJtaXNzaW9uczogcGVybWlzc2lvbnMsXG4gICAgICAgIHBhdGg6IHJlcS51cmwgXG4gICAgICB9KTtcblxuICAgICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgaGFuZGxlclxuICAgICAgYXdhaXQgaGFuZGxlcihwZXJtaXNzaW9uUmVxLCByZXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1Blcm1pc3Npb24gbWlkZGxld2FyZSBlcnJvcicsIHsgZXJyb3IsIHBhdGg6IHJlcS51cmwgfSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxuICAgICAgICBtZXNzYWdlOiAnUGVybWlzc2lvbiBjaGVjayBmYWlsZWQnIFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBjaGVja1Blcm1pc3Npb25zKHVzZXI6IGFueSwgcmVxdWlyZWRQZXJtaXNzaW9uczogc3RyaW5nW10pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgLy8gRm9yIG5vdywgaW1wbGVtZW50IGEgc2ltcGxlIHJvbGUtYmFzZWQgcGVybWlzc2lvbiBzeXN0ZW1cbiAgLy8gVGhpcyBjYW4gYmUgZW5oYW5jZWQgbGF0ZXIgd2l0aCBhIG1vcmUgc29waGlzdGljYXRlZCBwZXJtaXNzaW9uIHN5c3RlbVxuICBcbiAgY29uc3Qgcm9sZVBlcm1pc3Npb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XG4gICAgJ0FETUlOJzogW1xuICAgICAgJ3VzZXJzOnJlYWQnLCAndXNlcnM6Y3JlYXRlJywgJ3VzZXJzOnVwZGF0ZScsICd1c2VyczpkZWxldGUnLFxuICAgICAgJ2dyb3VwczpyZWFkJywgJ2dyb3VwczpjcmVhdGUnLCAnZ3JvdXBzOnVwZGF0ZScsICdncm91cHM6ZGVsZXRlJyxcbiAgICAgICdldmVudHM6cmVhZCcsICdldmVudHM6Y3JlYXRlJywgJ2V2ZW50czp1cGRhdGUnLCAnZXZlbnRzOmRlbGV0ZScsXG4gICAgICAndGVhbXM6cmVhZCcsICd0ZWFtczpjcmVhdGUnLCAndGVhbXM6dXBkYXRlJywgJ3RlYW1zOmRlbGV0ZScsXG4gICAgICAndGFza3M6cmVhZCcsICd0YXNrczpjcmVhdGUnLCAndGFza3M6dXBkYXRlJywgJ3Rhc2tzOmRlbGV0ZSdcbiAgICBdLFxuICAgICdFWEVDX0JPQVJEJzogW1xuICAgICAgJ3VzZXJzOnJlYWQnLCAndXNlcnM6Y3JlYXRlJywgJ3VzZXJzOnVwZGF0ZScsXG4gICAgICAnZ3JvdXBzOnJlYWQnLCAnZ3JvdXBzOmNyZWF0ZScsICdncm91cHM6dXBkYXRlJyxcbiAgICAgICdldmVudHM6cmVhZCcsICdldmVudHM6Y3JlYXRlJywgJ2V2ZW50czp1cGRhdGUnLFxuICAgICAgJ3RlYW1zOnJlYWQnLCAndGVhbXM6Y3JlYXRlJywgJ3RlYW1zOnVwZGF0ZScsXG4gICAgICAndGFza3M6cmVhZCcsICd0YXNrczpjcmVhdGUnLCAndGFza3M6dXBkYXRlJ1xuICAgIF0sXG4gICAgJ01FTUJFUic6IFtcbiAgICAgICd1c2VyczpyZWFkJyxcbiAgICAgICdncm91cHM6cmVhZCcsXG4gICAgICAnZXZlbnRzOnJlYWQnLFxuICAgICAgJ3RlYW1zOnJlYWQnLFxuICAgICAgJ3Rhc2tzOnJlYWQnXG4gICAgXVxuICB9O1xuXG4gIC8vIENoZWNrIGlmIHVzZXIgaGFzIHRlY2gtdGVhbSBncm91cCBpbiBhdXRoZW50aWtHcm91cHMgKE9JREMgZ3JvdXBzKVxuICAvLyBJZiB0aGV5IGRvLCBnaXZlIHRoZW0gYWRtaW4gcGVybWlzc2lvbnMgcmVnYXJkbGVzcyBvZiB0aGVpciByb2xlXG4gIGxldCBlZmZlY3RpdmVSb2xlID0gdXNlci5yb2xlO1xuICBpZiAodXNlci5hdXRoZW50aWtHcm91cHMgJiYgQXJyYXkuaXNBcnJheSh1c2VyLmF1dGhlbnRpa0dyb3VwcykpIHtcbiAgICBpZiAodXNlci5hdXRoZW50aWtHcm91cHMuaW5jbHVkZXMoJ3RlY2gtdGVhbScpKSB7XG4gICAgICBlZmZlY3RpdmVSb2xlID0gJ0FETUlOJztcbiAgICAgIGxvZ2dlci5pbmZvKCdVc2VyIGhhcyB0ZWNoLXRlYW0gZ3JvdXAsIGVsZXZhdGluZyB0byBhZG1pbiBwZXJtaXNzaW9ucycsIHtcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICBvcmlnaW5hbFJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgYXV0aGVudGlrR3JvdXBzOiB1c2VyLmF1dGhlbnRpa0dyb3Vwc1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgdXNlclBlcm1pc3Npb25zID0gcm9sZVBlcm1pc3Npb25zW2VmZmVjdGl2ZVJvbGVdIHx8IFtdO1xuICBcbiAgLy8gQ2hlY2sgaWYgdXNlciBoYXMgYWxsIHJlcXVpcmVkIHBlcm1pc3Npb25zXG4gIHJldHVybiByZXF1aXJlZFBlcm1pc3Npb25zLmV2ZXJ5KHBlcm1pc3Npb24gPT4gdXNlclBlcm1pc3Npb25zLmluY2x1ZGVzKHBlcm1pc3Npb24pKTtcbn1cbiJdLCJuYW1lcyI6WyJsb2dnZXIiLCJ3aXRoUGVybWlzc2lvbnMiLCJoYW5kbGVyIiwicmVxdWlyZWRQZXJtaXNzaW9ucyIsInJlcSIsInJlcyIsInBlcm1pc3Npb25SZXEiLCJ1c2VyIiwid2FybiIsInBhdGgiLCJ1cmwiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJtZXNzYWdlIiwicGVybWlzc2lvbnMiLCJoYXNQZXJtaXNzaW9uIiwiY2hlY2tQZXJtaXNzaW9ucyIsInVzZXJJZCIsImlkIiwidXNlclJvbGUiLCJyb2xlIiwiaW5mbyIsInJvbGVQZXJtaXNzaW9ucyIsImVmZmVjdGl2ZVJvbGUiLCJhdXRoZW50aWtHcm91cHMiLCJBcnJheSIsImlzQXJyYXkiLCJpbmNsdWRlcyIsIm9yaWdpbmFsUm9sZSIsInVzZXJQZXJtaXNzaW9ucyIsImV2ZXJ5IiwicGVybWlzc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/middleware/permissionMiddleware.ts\n");

/***/ }),

/***/ "(api)/./src/models/prismaClient.ts":
/*!************************************!*\
  !*** ./src/models/prismaClient.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = globalThis.__prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) {\n    globalThis.__prisma = prisma;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbW9kZWxzL3ByaXNtYUNsaWVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThDO0FBTXZDLE1BQU1DLFNBQVNDLFdBQVdDLFFBQVEsSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUM1REksS0FBS0MsS0FBeUIsR0FBZ0I7UUFBQztRQUFTO1FBQVM7S0FBTyxHQUFHLENBQVM7QUFDdEYsR0FBRztBQUVILElBQUlBLElBQXlCLEVBQWM7SUFDekNILFdBQVdDLFFBQVEsR0FBR0Y7QUFDeEI7QUFFQSxpRUFBZUEsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21ybTM2MC1iYWNrZW5kLy4vc3JjL21vZGVscy9wcmlzbWFDbGllbnQudHM/N2M1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XHJcblxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgdmFyIF9fcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxUaGlzLl9fcHJpc21hIHx8IG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBbJ3F1ZXJ5JywgJ2Vycm9yJywgJ3dhcm4nXSA6IFsnZXJyb3InXSxcclxufSk7XHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gIGdsb2JhbFRoaXMuX19wcmlzbWEgPSBwcmlzbWE7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHByaXNtYTtcclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsInByaXNtYSIsImdsb2JhbFRoaXMiLCJfX3ByaXNtYSIsImxvZyIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/models/prismaClient.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/groups/index.ts":
/*!***************************************!*\
  !*** ./src/pages/api/groups/index.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _models_prismaClient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../models/prismaClient */ \"(api)/./src/models/prismaClient.ts\");\n/* harmony import */ var _managers_groupManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../managers/groupManager */ \"(api)/./src/managers/groupManager.ts\");\n/* harmony import */ var _middleware_corsMiddleware__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../middleware/corsMiddleware */ \"(api)/./src/middleware/corsMiddleware.ts\");\n/* harmony import */ var _middleware_authMiddleware__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../middleware/authMiddleware */ \"(api)/./src/middleware/authMiddleware.ts\");\n/* harmony import */ var _middleware_permissionMiddleware__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../middleware/permissionMiddleware */ \"(api)/./src/middleware/permissionMiddleware.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/logger */ \"(api)/./src/utils/logger.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__]);\nzod__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n// Validation schemas\nconst listGroupsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    page: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().transform((val)=>parseInt(val || \"1\")),\n    limit: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().transform((val)=>parseInt(val || \"20\")),\n    search: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    isExternal: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().transform((val)=>val === \"true\")\n});\n/**\n * @swagger\n * /api/groups:\n *   get:\n *     summary: List groups with filtering and pagination\n *     tags: [Groups]\n *     security:\n *       - sessionAuth: []\n *     parameters:\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           default: 1\n *         description: Page number for pagination\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           default: 20\n *         description: Number of groups per page\n *       - in: query\n *         name: search\n *         schema:\n *           type: string\n *         description: Search term for group name\n *       - in: query\n *         name: isExternal\n *         schema:\n *           type: boolean\n *         description: Filter by external (Authentik) groups\n *     responses:\n *       200:\n *         description: List of groups\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 groups:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/Group'\n *                 pagination:\n *                   type: object\n *                   properties:\n *                     page:\n *                       type: integer\n *                     limit:\n *                       type: integer\n *                     total:\n *                       type: integer\n *                     totalPages:\n *                       type: integer\n *       401:\n *         description: Unauthorized\n *       403:\n *         description: Forbidden - insufficient permissions\n *       500:\n *         description: Internal server error\n */ async function handler(req, res) {\n    const groupManager = new _managers_groupManager__WEBPACK_IMPORTED_MODULE_2__.GroupManager(_models_prismaClient__WEBPACK_IMPORTED_MODULE_1__.prisma);\n    try {\n        if (req.method === \"GET\") {\n            // List groups\n            const queryParams = listGroupsSchema.parse(req.query);\n            const result = await groupManager.getGroups({\n                page: queryParams.page,\n                limit: queryParams.limit,\n                search: queryParams.search,\n                isExternal: queryParams.isExternal\n            });\n            res.status(200).json(result);\n        } else {\n            res.status(405).json({\n                error: \"Method not allowed\"\n            });\n        }\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_0__.z.ZodError) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_6__.logger.warn(\"Validation error in groups API\", {\n                errors: error.errors\n            });\n            return res.status(400).json({\n                error: \"Validation error\",\n                details: error.errors\n            });\n        }\n        _utils_logger__WEBPACK_IMPORTED_MODULE_6__.logger.error(\"Error in groups API\", {\n            error,\n            method: req.method\n        });\n        res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n// Apply middleware: CORS, authentication then permissions\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_middleware_corsMiddleware__WEBPACK_IMPORTED_MODULE_3__.withCORS)((0,_middleware_authMiddleware__WEBPACK_IMPORTED_MODULE_4__.withAuth)((0,_middleware_permissionMiddleware__WEBPACK_IMPORTED_MODULE_5__.withPermissions)(handler, [\n    \"groups:read\"\n]))));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2dyb3Vwcy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUN3QjtBQUM4QjtBQUNRO0FBQ0E7QUFDQTtBQUNhO0FBQzVCO0FBRS9DLHFCQUFxQjtBQUNyQixNQUFNTyxtQkFBbUJQLGtDQUFDQSxDQUFDUSxNQUFNLENBQUM7SUFDaENDLE1BQU1ULGtDQUFDQSxDQUFDVSxNQUFNLEdBQUdDLFFBQVEsR0FBR0MsU0FBUyxDQUFDQyxDQUFBQSxNQUFPQyxTQUFTRCxPQUFPO0lBQzdERSxPQUFPZixrQ0FBQ0EsQ0FBQ1UsTUFBTSxHQUFHQyxRQUFRLEdBQUdDLFNBQVMsQ0FBQ0MsQ0FBQUEsTUFBT0MsU0FBU0QsT0FBTztJQUM5REcsUUFBUWhCLGtDQUFDQSxDQUFDVSxNQUFNLEdBQUdDLFFBQVE7SUFDM0JNLFlBQVlqQixrQ0FBQ0EsQ0FBQ1UsTUFBTSxHQUFHQyxRQUFRLEdBQUdDLFNBQVMsQ0FBQ0MsQ0FBQUEsTUFBT0EsUUFBUTtBQUM3RDtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0E0REMsR0FDRCxlQUFlSyxRQUFRQyxHQUFtQixFQUFFQyxHQUFvQjtJQUM5RCxNQUFNQyxlQUFlLElBQUluQixnRUFBWUEsQ0FBQ0Qsd0RBQU1BO0lBRTVDLElBQUk7UUFDRixJQUFJa0IsSUFBSUcsTUFBTSxLQUFLLE9BQU87WUFDeEIsY0FBYztZQUNkLE1BQU1DLGNBQWNoQixpQkFBaUJpQixLQUFLLENBQUNMLElBQUlNLEtBQUs7WUFFcEQsTUFBTUMsU0FBUyxNQUFNTCxhQUFhTSxTQUFTLENBQUM7Z0JBQzFDbEIsTUFBTWMsWUFBWWQsSUFBSTtnQkFDdEJNLE9BQU9RLFlBQVlSLEtBQUs7Z0JBQ3hCQyxRQUFRTyxZQUFZUCxNQUFNO2dCQUMxQkMsWUFBWU0sWUFBWU4sVUFBVTtZQUNwQztZQUVBRyxJQUFJUSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDSDtRQUN2QixPQUFPO1lBQ0xOLElBQUlRLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBcUI7UUFDckQ7SUFDRixFQUFFLE9BQU9BLE9BQU87UUFDZCxJQUFJQSxpQkFBaUI5QixrQ0FBQ0EsQ0FBQytCLFFBQVEsRUFBRTtZQUMvQnpCLGlEQUFNQSxDQUFDMEIsSUFBSSxDQUFDLGtDQUFrQztnQkFBRUMsUUFBUUgsTUFBTUcsTUFBTTtZQUFDO1lBQ3JFLE9BQU9iLElBQUlRLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87Z0JBQW9CSSxTQUFTSixNQUFNRyxNQUFNO1lBQUM7UUFDakY7UUFFQTNCLGlEQUFNQSxDQUFDd0IsS0FBSyxDQUFDLHVCQUF1QjtZQUFFQTtZQUFPUixRQUFRSCxJQUFJRyxNQUFNO1FBQUM7UUFDaEVGLElBQUlRLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF3QjtJQUN4RDtBQUNGO0FBRUEsMERBQTBEO0FBQzFELGlFQUFlM0Isb0VBQVFBLENBQ3JCQyxvRUFBUUEsQ0FDTkMsaUZBQWVBLENBQ2JhLFNBQ0E7SUFBQztDQUFjLEtBR25CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvLi9zcmMvcGFnZXMvYXBpL2dyb3Vwcy9pbmRleC50cz84NTNhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnLi4vLi4vLi4vbW9kZWxzL3ByaXNtYUNsaWVudCc7XG5pbXBvcnQgeyBHcm91cE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9ncm91cE1hbmFnZXInO1xuaW1wb3J0IHsgd2l0aENPUlMgfSBmcm9tICcuLi8uLi8uLi9taWRkbGV3YXJlL2NvcnNNaWRkbGV3YXJlJztcbmltcG9ydCB7IHdpdGhBdXRoIH0gZnJvbSAnLi4vLi4vLi4vbWlkZGxld2FyZS9hdXRoTWlkZGxld2FyZSc7XG5pbXBvcnQgeyB3aXRoUGVybWlzc2lvbnMgfSBmcm9tICcuLi8uLi8uLi9taWRkbGV3YXJlL3Blcm1pc3Npb25NaWRkbGV3YXJlJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2xvZ2dlcic7XG5cbi8vIFZhbGlkYXRpb24gc2NoZW1hc1xuY29uc3QgbGlzdEdyb3Vwc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgcGFnZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLnRyYW5zZm9ybSh2YWwgPT4gcGFyc2VJbnQodmFsIHx8ICcxJykpLFxuICBsaW1pdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLnRyYW5zZm9ybSh2YWwgPT4gcGFyc2VJbnQodmFsIHx8ICcyMCcpKSxcbiAgc2VhcmNoOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGlzRXh0ZXJuYWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKS50cmFuc2Zvcm0odmFsID0+IHZhbCA9PT0gJ3RydWUnKSxcbn0pO1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXBpL2dyb3VwczpcbiAqICAgZ2V0OlxuICogICAgIHN1bW1hcnk6IExpc3QgZ3JvdXBzIHdpdGggZmlsdGVyaW5nIGFuZCBwYWdpbmF0aW9uXG4gKiAgICAgdGFnczogW0dyb3Vwc11cbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gc2Vzc2lvbkF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IHBhZ2VcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICBkZWZhdWx0OiAxXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBQYWdlIG51bWJlciBmb3IgcGFnaW5hdGlvblxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogbGltaXRcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICBkZWZhdWx0OiAyMFxuICogICAgICAgICBkZXNjcmlwdGlvbjogTnVtYmVyIG9mIGdyb3VwcyBwZXIgcGFnZVxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogc2VhcmNoXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFNlYXJjaCB0ZXJtIGZvciBncm91cCBuYW1lXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBpc0V4dGVybmFsXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBib29sZWFuXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBGaWx0ZXIgYnkgZXh0ZXJuYWwgKEF1dGhlbnRpaykgZ3JvdXBzXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgMjAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogTGlzdCBvZiBncm91cHNcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgICBncm91cHM6XG4gKiAgICAgICAgICAgICAgICAgICB0eXBlOiBhcnJheVxuICogICAgICAgICAgICAgICAgICAgaXRlbXM6XG4gKiAgICAgICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Hcm91cCdcbiAqICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICAgICAgICBwYWdlOlxuICogICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgICAgbGltaXQ6XG4gKiAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgICB0b3RhbDpcbiAqICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgICAgICAgICAgIHRvdGFsUGFnZXM6XG4gKiAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgNDAxOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogVW5hdXRob3JpemVkXG4gKiAgICAgICA0MDM6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBGb3JiaWRkZW4gLSBpbnN1ZmZpY2llbnQgcGVybWlzc2lvbnNcbiAqICAgICAgIDUwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEludGVybmFsIHNlcnZlciBlcnJvclxuICovXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGNvbnN0IGdyb3VwTWFuYWdlciA9IG5ldyBHcm91cE1hbmFnZXIocHJpc21hKTtcblxuICB0cnkge1xuICAgIGlmIChyZXEubWV0aG9kID09PSAnR0VUJykge1xuICAgICAgLy8gTGlzdCBncm91cHNcbiAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbGlzdEdyb3Vwc1NjaGVtYS5wYXJzZShyZXEucXVlcnkpO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBncm91cE1hbmFnZXIuZ2V0R3JvdXBzKHtcbiAgICAgICAgcGFnZTogcXVlcnlQYXJhbXMucGFnZSxcbiAgICAgICAgbGltaXQ6IHF1ZXJ5UGFyYW1zLmxpbWl0LFxuICAgICAgICBzZWFyY2g6IHF1ZXJ5UGFyYW1zLnNlYXJjaCxcbiAgICAgICAgaXNFeHRlcm5hbDogcXVlcnlQYXJhbXMuaXNFeHRlcm5hbCxcbiAgICAgIH0pO1xuXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ1ZhbGlkYXRpb24gZXJyb3IgaW4gZ3JvdXBzIEFQSScsIHsgZXJyb3JzOiBlcnJvci5lcnJvcnMgfSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1ZhbGlkYXRpb24gZXJyb3InLCBkZXRhaWxzOiBlcnJvci5lcnJvcnMgfSk7XG4gICAgfVxuICAgIFxuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaW4gZ3JvdXBzIEFQSScsIHsgZXJyb3IsIG1ldGhvZDogcmVxLm1ldGhvZCB9KTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgfVxufVxuXG4vLyBBcHBseSBtaWRkbGV3YXJlOiBDT1JTLCBhdXRoZW50aWNhdGlvbiB0aGVuIHBlcm1pc3Npb25zXG5leHBvcnQgZGVmYXVsdCB3aXRoQ09SUyhcbiAgd2l0aEF1dGgoXG4gICAgd2l0aFBlcm1pc3Npb25zKFxuICAgICAgaGFuZGxlcixcbiAgICAgIFsnZ3JvdXBzOnJlYWQnXVxuICAgIClcbiAgKVxuKTtcbiJdLCJuYW1lcyI6WyJ6IiwicHJpc21hIiwiR3JvdXBNYW5hZ2VyIiwid2l0aENPUlMiLCJ3aXRoQXV0aCIsIndpdGhQZXJtaXNzaW9ucyIsImxvZ2dlciIsImxpc3RHcm91cHNTY2hlbWEiLCJvYmplY3QiLCJwYWdlIiwic3RyaW5nIiwib3B0aW9uYWwiLCJ0cmFuc2Zvcm0iLCJ2YWwiLCJwYXJzZUludCIsImxpbWl0Iiwic2VhcmNoIiwiaXNFeHRlcm5hbCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJncm91cE1hbmFnZXIiLCJtZXRob2QiLCJxdWVyeVBhcmFtcyIsInBhcnNlIiwicXVlcnkiLCJyZXN1bHQiLCJnZXRHcm91cHMiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJab2RFcnJvciIsIndhcm4iLCJlcnJvcnMiLCJkZXRhaWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/groups/index.ts\n");

/***/ }),

/***/ "(api)/./src/utils/logger.ts":
/*!*****************************!*\
  !*** ./src/utils/logger.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogLevel: () => (/* binding */ LogLevel),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\nvar LogLevel;\n(function(LogLevel) {\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 1] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 2] = \"WARN\";\n    LogLevel[LogLevel[\"ERROR\"] = 3] = \"ERROR\";\n})(LogLevel || (LogLevel = {}));\nclass Logger {\n    constructor(level = 1){\n        this.level = level;\n    }\n    formatMessage(level, message, meta) {\n        const timestamp = new Date().toISOString();\n        const metaStr = meta ? ` ${JSON.stringify(meta)}` : \"\";\n        return `[${timestamp}] ${level}: ${message}${metaStr}`;\n    }\n    log(level, levelName, message, meta) {\n        if (level >= this.level) {\n            const formattedMessage = this.formatMessage(levelName, message, meta);\n            switch(level){\n                case 3:\n                    console.error(formattedMessage);\n                    break;\n                case 2:\n                    console.warn(formattedMessage);\n                    break;\n                case 1:\n                    console.info(formattedMessage);\n                    break;\n                case 0:\n                    console.debug(formattedMessage);\n                    break;\n            }\n        }\n    }\n    debug(message, meta) {\n        this.log(0, \"DEBUG\", message, meta);\n    }\n    info(message, meta) {\n        this.log(1, \"INFO\", message, meta);\n    }\n    warn(message, meta) {\n        this.log(2, \"WARN\", message, meta);\n    }\n    error(message, meta) {\n        this.log(3, \"ERROR\", message, meta);\n    }\n    setLevel(level) {\n        this.level = level;\n    }\n}\nconst logger = new Logger( true ? 0 : 0);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMvbG9nZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7VUFBWUE7Ozs7O0dBQUFBLGFBQUFBO0FBT1osTUFBTUM7SUFHSkMsWUFBWUMsU0FBK0IsQ0FBRTtRQUMzQyxJQUFJLENBQUNBLEtBQUssR0FBR0E7SUFDZjtJQUVRQyxjQUFjRCxLQUFhLEVBQUVFLE9BQWUsRUFBRUMsSUFBVSxFQUFVO1FBQ3hFLE1BQU1DLFlBQVksSUFBSUMsT0FBT0MsV0FBVztRQUN4QyxNQUFNQyxVQUFVSixPQUFPLENBQUMsQ0FBQyxFQUFFSyxLQUFLQyxTQUFTLENBQUNOLE1BQU0sQ0FBQyxHQUFHO1FBQ3BELE9BQU8sQ0FBQyxDQUFDLEVBQUVDLFVBQVUsRUFBRSxFQUFFSixNQUFNLEVBQUUsRUFBRUUsUUFBUSxFQUFFSyxRQUFRLENBQUM7SUFDeEQ7SUFFUUcsSUFBSVYsS0FBZSxFQUFFVyxTQUFpQixFQUFFVCxPQUFlLEVBQUVDLElBQVUsRUFBRTtRQUMzRSxJQUFJSCxTQUFTLElBQUksQ0FBQ0EsS0FBSyxFQUFFO1lBQ3ZCLE1BQU1ZLG1CQUFtQixJQUFJLENBQUNYLGFBQWEsQ0FBQ1UsV0FBV1QsU0FBU0M7WUFFaEUsT0FBUUg7Z0JBQ047b0JBQ0VhLFFBQVFDLEtBQUssQ0FBQ0Y7b0JBQ2Q7Z0JBQ0Y7b0JBQ0VDLFFBQVFFLElBQUksQ0FBQ0g7b0JBQ2I7Z0JBQ0Y7b0JBQ0VDLFFBQVFHLElBQUksQ0FBQ0o7b0JBQ2I7Z0JBQ0Y7b0JBQ0VDLFFBQVFJLEtBQUssQ0FBQ0w7b0JBQ2Q7WUFDSjtRQUNGO0lBQ0Y7SUFFQUssTUFBTWYsT0FBZSxFQUFFQyxJQUFVLEVBQUU7UUFDakMsSUFBSSxDQUFDTyxHQUFHLElBQWlCLFNBQVNSLFNBQVNDO0lBQzdDO0lBRUFhLEtBQUtkLE9BQWUsRUFBRUMsSUFBVSxFQUFFO1FBQ2hDLElBQUksQ0FBQ08sR0FBRyxJQUFnQixRQUFRUixTQUFTQztJQUMzQztJQUVBWSxLQUFLYixPQUFlLEVBQUVDLElBQVUsRUFBRTtRQUNoQyxJQUFJLENBQUNPLEdBQUcsSUFBZ0IsUUFBUVIsU0FBU0M7SUFDM0M7SUFFQVcsTUFBTVosT0FBZSxFQUFFQyxJQUFVLEVBQUU7UUFDakMsSUFBSSxDQUFDTyxHQUFHLElBQWlCLFNBQVNSLFNBQVNDO0lBQzdDO0lBRUFlLFNBQVNsQixLQUFlLEVBQUU7UUFDeEIsSUFBSSxDQUFDQSxLQUFLLEdBQUdBO0lBQ2Y7QUFDRjtBQUVPLE1BQU1tQixTQUFTLElBQUlyQixPQUN4QnNCLEtBQXlCLFVBQ3pCO0FBRUYsaUVBQWVELE1BQU1BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tcm0zNjAtYmFja2VuZC8uL3NyYy91dGlscy9sb2dnZXIudHM/N2NmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBMb2dMZXZlbCB7XHJcbiAgREVCVUcgPSAwLFxyXG4gIElORk8gPSAxLFxyXG4gIFdBUk4gPSAyLFxyXG4gIEVSUk9SID0gM1xyXG59XHJcblxyXG5jbGFzcyBMb2dnZXIge1xyXG4gIHByaXZhdGUgbGV2ZWw6IExvZ0xldmVsO1xyXG5cclxuICBjb25zdHJ1Y3RvcihsZXZlbDogTG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPKSB7XHJcbiAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGZvcm1hdE1lc3NhZ2UobGV2ZWw6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGFTdHIgPSBtZXRhID8gYCAke0pTT04uc3RyaW5naWZ5KG1ldGEpfWAgOiAnJztcclxuICAgIHJldHVybiBgWyR7dGltZXN0YW1wfV0gJHtsZXZlbH06ICR7bWVzc2FnZX0ke21ldGFTdHJ9YDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbG9nKGxldmVsOiBMb2dMZXZlbCwgbGV2ZWxOYW1lOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgbWV0YT86IGFueSkge1xyXG4gICAgaWYgKGxldmVsID49IHRoaXMubGV2ZWwpIHtcclxuICAgICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZSA9IHRoaXMuZm9ybWF0TWVzc2FnZShsZXZlbE5hbWUsIG1lc3NhZ2UsIG1ldGEpO1xyXG4gICAgICBcclxuICAgICAgc3dpdGNoIChsZXZlbCkge1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuRVJST1I6XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5XQVJOOlxyXG4gICAgICAgICAgY29uc29sZS53YXJuKGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5JTkZPOlxyXG4gICAgICAgICAgY29uc29sZS5pbmZvKGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5ERUJVRzpcclxuICAgICAgICAgIGNvbnNvbGUuZGVidWcoZm9ybWF0dGVkTWVzc2FnZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGVidWcobWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5ERUJVRywgJ0RFQlVHJywgbWVzc2FnZSwgbWV0YSk7XHJcbiAgfVxyXG5cclxuICBpbmZvKG1lc3NhZ2U6IHN0cmluZywgbWV0YT86IGFueSkge1xyXG4gICAgdGhpcy5sb2coTG9nTGV2ZWwuSU5GTywgJ0lORk8nLCBtZXNzYWdlLCBtZXRhKTtcclxuICB9XHJcblxyXG4gIHdhcm4obWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5XQVJOLCAnV0FSTicsIG1lc3NhZ2UsIG1ldGEpO1xyXG4gIH1cclxuXHJcbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5FUlJPUiwgJ0VSUk9SJywgbWVzc2FnZSwgbWV0YSk7XHJcbiAgfVxyXG5cclxuICBzZXRMZXZlbChsZXZlbDogTG9nTGV2ZWwpIHtcclxuICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFxyXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gTG9nTGV2ZWwuREVCVUcgOiBMb2dMZXZlbC5JTkZPXHJcbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XHJcbiJdLCJuYW1lcyI6WyJMb2dMZXZlbCIsIkxvZ2dlciIsImNvbnN0cnVjdG9yIiwibGV2ZWwiLCJmb3JtYXRNZXNzYWdlIiwibWVzc2FnZSIsIm1ldGEiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJtZXRhU3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvZyIsImxldmVsTmFtZSIsImZvcm1hdHRlZE1lc3NhZ2UiLCJjb25zb2xlIiwiZXJyb3IiLCJ3YXJuIiwiaW5mbyIsImRlYnVnIiwic2V0TGV2ZWwiLCJsb2dnZXIiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/utils/logger.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgroups&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgroups%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();
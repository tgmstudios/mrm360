"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/login";
exports.ids = ["pages/api/auth/login"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Flogin&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fauth%2Flogin.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Flogin&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fauth%2Flogin.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_auth_login_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/auth/login.ts */ \"(api)/./src/pages/api/auth/login.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_auth_login_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_auth_login_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/login\",\n        pathname: \"/api/auth/login\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_auth_login_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkZsb2dpbiZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGYXV0aCUyRmxvZ2luLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzBEO0FBQzFEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx5REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMseURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvP2VlMWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvYXV0aC9sb2dpbi50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvbG9naW5cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL2xvZ2luXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Flogin&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fauth%2Flogin.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/middleware/corsMiddleware.ts":
/*!******************************************!*\
  !*** ./src/middleware/corsMiddleware.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withCORS: () => (/* binding */ withCORS)\n/* harmony export */ });\nfunction withCORS(handler) {\n    return async (req, res)=>{\n        // Set CORS headers\n        const allowedOrigin = process.env.FRONTEND_URL || \"http://localhost:3011\";\n        res.setHeader(\"Access-Control-Allow-Credentials\", \"true\");\n        res.setHeader(\"Access-Control-Allow-Origin\", allowedOrigin);\n        res.setHeader(\"Access-Control-Allow-Methods\", \"GET,OPTIONS,PATCH,DELETE,POST,PUT\");\n        res.setHeader(\"Access-Control-Allow-Headers\", \"X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Authorization\");\n        // Handle preflight request\n        if (req.method === \"OPTIONS\") {\n            res.status(200).end();\n            return;\n        }\n        // Call the original handler\n        await handler(req, res);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbWlkZGxld2FyZS9jb3JzTWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sU0FBU0EsU0FBU0MsT0FBcUU7SUFDNUYsT0FBTyxPQUFPQyxLQUFxQkM7UUFDakMsbUJBQW1CO1FBQ25CLE1BQU1DLGdCQUFnQkMsUUFBUUMsR0FBRyxDQUFDQyxZQUFZLElBQUk7UUFFbERKLElBQUlLLFNBQVMsQ0FBQyxvQ0FBb0M7UUFDbERMLElBQUlLLFNBQVMsQ0FBQywrQkFBK0JKO1FBQzdDRCxJQUFJSyxTQUFTLENBQUMsZ0NBQWdDO1FBQzlDTCxJQUFJSyxTQUFTLENBQUMsZ0NBQWdDO1FBRTlDLDJCQUEyQjtRQUMzQixJQUFJTixJQUFJTyxNQUFNLEtBQUssV0FBVztZQUM1Qk4sSUFBSU8sTUFBTSxDQUFDLEtBQUtDLEdBQUc7WUFDbkI7UUFDRjtRQUVBLDRCQUE0QjtRQUM1QixNQUFNVixRQUFRQyxLQUFLQztJQUNyQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvLi9zcmMvbWlkZGxld2FyZS9jb3JzTWlkZGxld2FyZS50cz8zYjljIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhDT1JTKGhhbmRsZXI6IChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4gUHJvbWlzZTx2b2lkPikge1xuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XG4gICAgLy8gU2V0IENPUlMgaGVhZGVyc1xuICAgIGNvbnN0IGFsbG93ZWRPcmlnaW4gPSBwcm9jZXNzLmVudi5GUk9OVEVORF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAxMSc7XG4gICAgXG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsIGFsbG93ZWRPcmlnaW4pO1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULE9QVElPTlMsUEFUQ0gsREVMRVRFLFBPU1QsUFVUJyk7XG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdYLUNTUkYtVG9rZW4sIFgtUmVxdWVzdGVkLVdpdGgsIEFjY2VwdCwgQWNjZXB0LVZlcnNpb24sIENvbnRlbnQtTGVuZ3RoLCBDb250ZW50LU1ENSwgQ29udGVudC1UeXBlLCBEYXRlLCBYLUFwaS1WZXJzaW9uLCBBdXRob3JpemF0aW9uJyk7XG5cbiAgICAvLyBIYW5kbGUgcHJlZmxpZ2h0IHJlcXVlc3RcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuZW5kKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgaGFuZGxlclxuICAgIGF3YWl0IGhhbmRsZXIocmVxLCByZXMpO1xuICB9O1xufVxuIl0sIm5hbWVzIjpbIndpdGhDT1JTIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImFsbG93ZWRPcmlnaW4iLCJwcm9jZXNzIiwiZW52IiwiRlJPTlRFTkRfVVJMIiwic2V0SGVhZGVyIiwibWV0aG9kIiwic3RhdHVzIiwiZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/middleware/corsMiddleware.ts\n");

/***/ }),

/***/ "(api)/./src/models/prismaClient.ts":
/*!************************************!*\
  !*** ./src/models/prismaClient.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = globalThis.__prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) {\n    globalThis.__prisma = prisma;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbW9kZWxzL3ByaXNtYUNsaWVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThDO0FBTXZDLE1BQU1DLFNBQVNDLFdBQVdDLFFBQVEsSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUM1REksS0FBS0MsS0FBeUIsR0FBZ0I7UUFBQztRQUFTO1FBQVM7S0FBTyxHQUFHLENBQVM7QUFDdEYsR0FBRztBQUVILElBQUlBLElBQXlCLEVBQWM7SUFDekNILFdBQVdDLFFBQVEsR0FBR0Y7QUFDeEI7QUFFQSxpRUFBZUEsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21ybTM2MC1iYWNrZW5kLy4vc3JjL21vZGVscy9wcmlzbWFDbGllbnQudHM/N2M1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XHJcblxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgdmFyIF9fcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxUaGlzLl9fcHJpc21hIHx8IG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBbJ3F1ZXJ5JywgJ2Vycm9yJywgJ3dhcm4nXSA6IFsnZXJyb3InXSxcclxufSk7XHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gIGdsb2JhbFRoaXMuX19wcmlzbWEgPSBwcmlzbWE7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHByaXNtYTtcclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsInByaXNtYSIsImdsb2JhbFRoaXMiLCJfX3ByaXNtYSIsImxvZyIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/models/prismaClient.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/auth/login.ts":
/*!*************************************!*\
  !*** ./src/pages/api/auth/login.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _models_prismaClient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../models/prismaClient */ \"(api)/./src/models/prismaClient.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/logger */ \"(api)/./src/utils/logger.ts\");\n/* harmony import */ var _middleware_corsMiddleware__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../middleware/corsMiddleware */ \"(api)/./src/middleware/corsMiddleware.ts\");\n\n\n\n\n\n// Helper function to determine effective role based on OIDC groups\nfunction getEffectiveRole(userRole, authentikGroups) {\n    // If user has tech-team group, elevate to admin regardless of base role\n    if (authentikGroups.includes(\"tech-team\")) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"User has tech-team group, elevating to admin role\", {\n            originalRole: userRole,\n            authentikGroups\n        });\n        return \"ADMIN\";\n    }\n    return userRole;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_middleware_corsMiddleware__WEBPACK_IMPORTED_MODULE_4__.withCORS)(async function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const { username, password, code, state } = req.body;\n        // Handle OIDC authentication\n        if (code && state) {\n            return await handleOIDCLogin(req, res, code, state);\n        }\n        // Handle username/password authentication\n        if (username && password) {\n            return await handlePasswordLogin(req, res, username, password);\n        }\n        return res.status(400).json({\n            error: \"Invalid authentication method\"\n        });\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Login error\", {\n            error\n        });\n        return res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}));\nasync function handleOIDCLogin(req, res, code, state) {\n    try {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Processing OIDC login\", {\n            code: code.substring(0, 8) + \"...\"\n        });\n        // Exchange authorization code for tokens\n        const tokenResponse = await exchangeCodeForTokens(code);\n        if (!tokenResponse.access_token) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Failed to exchange code for tokens\", {\n                error: tokenResponse.error\n            });\n            return res.status(400).json({\n                error: \"Token exchange failed\"\n            });\n        }\n        // Get user info from Authentik\n        const userInfo = await getUserInfo(tokenResponse.access_token);\n        if (!userInfo) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Failed to get user info from Authentik\");\n            return res.status(400).json({\n                error: \"Failed to get user info\"\n            });\n        }\n        // Find or create user\n        let user = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n            where: {\n                email: userInfo.email\n            },\n            include: {\n                userGroups: {\n                    include: {\n                        group: true\n                    }\n                }\n            }\n        });\n        if (!user) {\n            // Create new user\n            user = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_2__.prisma.user.create({\n                data: {\n                    email: userInfo.email,\n                    username: userInfo.preferred_username || userInfo.email.split(\"@\")[0],\n                    firstName: userInfo.name.split(\" \")[0] || userInfo.name,\n                    lastName: userInfo.name.split(\" \").slice(1).join(\" \") || \"\",\n                    role: \"MEMBER\",\n                    paidStatus: false\n                },\n                include: {\n                    userGroups: {\n                        include: {\n                            group: true\n                        }\n                    }\n                }\n            });\n        }\n        // Sync groups from OIDC\n        if (userInfo.groups) {\n            await syncUserGroups(user.id, userInfo.groups);\n        }\n        // Generate JWT token\n        const token = generateJWT(user);\n        // Get authentik groups\n        const authentikGroups = user.userGroups.map((ug)=>ug.group.name);\n        // Determine effective role based on OIDC groups\n        const effectiveRole = getEffectiveRole(user.role, authentikGroups);\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"OIDC login successful\", {\n            userId: user.id,\n            email: user.email,\n            effectiveRole\n        });\n        return res.status(200).json({\n            token,\n            user: {\n                id: user.id,\n                email: user.email,\n                username: user.username,\n                firstName: user.firstName,\n                lastName: user.lastName,\n                displayName: user.displayName || `${user.firstName} ${user.lastName}`.trim(),\n                role: effectiveRole,\n                paidStatus: user.paidStatus,\n                authentikGroups: authentikGroups\n            }\n        });\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"OIDC login failed\", {\n            error\n        });\n        return res.status(500).json({\n            error: \"OIDC authentication failed\"\n        });\n    }\n}\nasync function handlePasswordLogin(req, res, username, password) {\n    try {\n        // Find user by username or email\n        const user = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findFirst({\n            where: {\n                OR: [\n                    {\n                        username: username\n                    },\n                    {\n                        email: username\n                    }\n                ]\n            },\n            include: {\n                userGroups: {\n                    include: {\n                        group: true\n                    }\n                }\n            }\n        });\n        if (!user) {\n            return res.status(401).json({\n                error: \"Invalid credentials\"\n            });\n        }\n        // Check if user has password (OIDC users might not)\n        if (!user.password) {\n            return res.status(401).json({\n                error: \"Account requires OIDC authentication\"\n            });\n        }\n        // Verify password\n        const isValidPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().compare(password, user.password);\n        if (!isValidPassword) {\n            return res.status(401).json({\n                error: \"Invalid credentials\"\n            });\n        }\n        // Generate JWT token\n        const token = generateJWT(user);\n        // Get authentik groups\n        const authentikGroups = user.userGroups.map((ug)=>ug.group.name);\n        // Determine effective role based on OIDC groups\n        const effectiveRole = getEffectiveRole(user.role, authentikGroups);\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Password login successful\", {\n            userId: user.id,\n            username: user.username,\n            effectiveRole\n        });\n        return res.status(200).json({\n            token,\n            user: {\n                id: user.id,\n                email: user.email,\n                username: user.username,\n                firstName: user.firstName,\n                lastName: user.lastName,\n                displayName: user.displayName || `${user.firstName} ${user.lastName}`.trim(),\n                role: effectiveRole,\n                paidStatus: user.paidStatus,\n                authentikGroups: authentikGroups\n            }\n        });\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Password login failed\", {\n            error\n        });\n        return res.status(500).json({\n            error: \"Authentication failed\"\n        });\n    }\n}\nfunction generateJWT(user) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n        id: user.id,\n        email: user.email,\n        username: user.username,\n        role: user.role\n    }, process.env.JWT_SECRET || \"fallback-secret\", {\n        expiresIn: \"24h\"\n    });\n}\nasync function exchangeCodeForTokens(code) {\n    try {\n        const issuer = process.env.AUTHENTIK_ISSUER;\n        const clientId = process.env.AUTHENTIK_CLIENT_ID;\n        const clientSecret = process.env.AUTHENTIK_CLIENT_SECRET;\n        const redirectUri = process.env.AUTHENTIK_REDIRECT_URI;\n        if (!issuer || !clientId || !clientSecret || !redirectUri) {\n            throw new Error(\"Missing OIDC configuration\");\n        }\n        const tokenEndpoint = `${issuer}/application/o/token/`;\n        const response = await fetch(tokenEndpoint, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\"\n            },\n            body: new URLSearchParams({\n                grant_type: \"authorization_code\",\n                client_id: clientId,\n                client_secret: clientSecret,\n                code: code,\n                redirect_uri: redirectUri\n            })\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Token exchange failed\", {\n                status: response.status,\n                statusText: response.statusText,\n                error: errorText\n            });\n            return {\n                error: `Token exchange failed: ${response.status} ${response.statusText}`\n            };\n        }\n        const tokenData = await response.json();\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Token exchange successful\", {\n            hasAccessToken: !!tokenData.access_token\n        });\n        return tokenData;\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Token exchange error\", {\n            error\n        });\n        return {\n            error: `Token exchange error: ${error}`\n        };\n    }\n}\nasync function getUserInfo(accessToken) {\n    try {\n        const issuer = process.env.AUTHENTIK_ISSUER;\n        if (!issuer) {\n            throw new Error(\"Missing issuer configuration\");\n        }\n        const userinfoEndpoint = `${issuer}/application/o/userinfo/`;\n        const response = await fetch(userinfoEndpoint, {\n            headers: {\n                \"Authorization\": `Bearer ${accessToken}`\n            }\n        });\n        if (!response.ok) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"User info request failed\", {\n                status: response.status,\n                statusText: response.statusText\n            });\n            return null;\n        }\n        const userInfo = await response.json();\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"User info retrieved successfully\", {\n            email: userInfo.email\n        });\n        return userInfo;\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"User info error\", {\n            error\n        });\n        return null;\n    }\n}\nasync function syncUserGroups(userId, groups) {\n    try {\n        // Get existing user groups\n        const existingGroups = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_2__.prisma.userGroup.findMany({\n            where: {\n                userId\n            },\n            include: {\n                group: true\n            }\n        });\n        const existingGroupNames = existingGroups.map((ug)=>ug.group.name);\n        // Add new groups\n        for (const groupName of groups){\n            if (!existingGroupNames.includes(groupName)) {\n                // Find or create group\n                let group = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_2__.prisma.group.findFirst({\n                    where: {\n                        name: groupName\n                    }\n                });\n                if (!group) {\n                    group = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_2__.prisma.group.create({\n                        data: {\n                            name: groupName,\n                            description: `Group from OIDC: ${groupName}`,\n                            externalId: groupName\n                        }\n                    });\n                }\n                // Add user to group\n                await _models_prismaClient__WEBPACK_IMPORTED_MODULE_2__.prisma.userGroup.create({\n                    data: {\n                        userId,\n                        groupId: group.id\n                    }\n                });\n            }\n        }\n        // Remove groups that are no longer in OIDC\n        for (const existingGroup of existingGroups){\n            if (!groups.includes(existingGroup.group.name)) {\n                await _models_prismaClient__WEBPACK_IMPORTED_MODULE_2__.prisma.userGroup.delete({\n                    where: {\n                        id: existingGroup.id\n                    }\n                });\n            }\n        }\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"User groups synced successfully\", {\n            userId,\n            groupCount: groups.length\n        });\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Failed to sync user groups\", {\n            error,\n            userId\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxRQUFRLENBQUMrRixjQUFjbEUsS0FBSyxDQUFDTSxJQUFJLEdBQUc7Z0JBQzlDLE1BQU16Qyx3REFBTUEsQ0FBQzhGLFNBQVMsQ0FBQ1EsTUFBTSxDQUFDO29CQUM1QnZFLE9BQU87d0JBQUVrQixJQUFJb0QsY0FBY3BELEVBQUU7b0JBQUM7Z0JBQ2hDO1lBQ0Y7UUFDRjtRQUVBaEQsaURBQU1BLENBQUNNLElBQUksQ0FBQyxtQ0FBbUM7WUFBRWdEO1lBQVFnRCxZQUFZeEQsT0FBT3lELE1BQU07UUFBQztJQUNyRixFQUFFLE9BQU96RixPQUFPO1FBQ2RkLGlEQUFNQSxDQUFDYyxLQUFLLENBQUMsOEJBQThCO1lBQUVBO1lBQU93QztRQUFPO0lBQzdEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tcm0zNjAtYmFja2VuZC8uL3NyYy9wYWdlcy9hcGkvYXV0aC9sb2dpbi50cz8xNzM2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XHJcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnLi4vLi4vLi4vbW9kZWxzL3ByaXNtYUNsaWVudCc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2xvZ2dlcic7XHJcbmltcG9ydCB7IHdpdGhDT1JTIH0gZnJvbSAnLi4vLi4vLi4vbWlkZGxld2FyZS9jb3JzTWlkZGxld2FyZSc7XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVmZmVjdGl2ZSByb2xlIGJhc2VkIG9uIE9JREMgZ3JvdXBzXHJcbmZ1bmN0aW9uIGdldEVmZmVjdGl2ZVJvbGUodXNlclJvbGU6IHN0cmluZywgYXV0aGVudGlrR3JvdXBzOiBzdHJpbmdbXSk6IHN0cmluZyB7XHJcbiAgLy8gSWYgdXNlciBoYXMgdGVjaC10ZWFtIGdyb3VwLCBlbGV2YXRlIHRvIGFkbWluIHJlZ2FyZGxlc3Mgb2YgYmFzZSByb2xlXHJcbiAgaWYgKGF1dGhlbnRpa0dyb3Vwcy5pbmNsdWRlcygndGVjaC10ZWFtJykpIHtcclxuICAgIGxvZ2dlci5pbmZvKCdVc2VyIGhhcyB0ZWNoLXRlYW0gZ3JvdXAsIGVsZXZhdGluZyB0byBhZG1pbiByb2xlJywge1xyXG4gICAgICBvcmlnaW5hbFJvbGU6IHVzZXJSb2xlLFxyXG4gICAgICBhdXRoZW50aWtHcm91cHNcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuICdBRE1JTic7XHJcbiAgfVxyXG4gIHJldHVybiB1c2VyUm9sZTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgd2l0aENPUlMoYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCwgY29kZSwgc3RhdGUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIEhhbmRsZSBPSURDIGF1dGhlbnRpY2F0aW9uXHJcbiAgICBpZiAoY29kZSAmJiBzdGF0ZSkge1xyXG4gICAgICByZXR1cm4gYXdhaXQgaGFuZGxlT0lEQ0xvZ2luKHJlcSwgcmVzLCBjb2RlLCBzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGFuZGxlIHVzZXJuYW1lL3Bhc3N3b3JkIGF1dGhlbnRpY2F0aW9uXHJcbiAgICBpZiAodXNlcm5hbWUgJiYgcGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZVBhc3N3b3JkTG9naW4ocmVxLCByZXMsIHVzZXJuYW1lLCBwYXNzd29yZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGF1dGhlbnRpY2F0aW9uIG1ldGhvZCcgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ2dlci5lcnJvcignTG9naW4gZXJyb3InLCB7IGVycm9yIH0pO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVPSURDTG9naW4ocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIGNvZGU6IHN0cmluZywgc3RhdGU6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBsb2dnZXIuaW5mbygnUHJvY2Vzc2luZyBPSURDIGxvZ2luJywgeyBjb2RlOiBjb2RlLnN1YnN0cmluZygwLCA4KSArICcuLi4nIH0pO1xyXG5cclxuICAgIC8vIEV4Y2hhbmdlIGF1dGhvcml6YXRpb24gY29kZSBmb3IgdG9rZW5zXHJcbiAgICBjb25zdCB0b2tlblJlc3BvbnNlID0gYXdhaXQgZXhjaGFuZ2VDb2RlRm9yVG9rZW5zKGNvZGUpO1xyXG4gICAgXHJcbiAgICBpZiAoIXRva2VuUmVzcG9uc2UuYWNjZXNzX3Rva2VuKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGV4Y2hhbmdlIGNvZGUgZm9yIHRva2VucycsIHsgZXJyb3I6IHRva2VuUmVzcG9uc2UuZXJyb3IgfSk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVG9rZW4gZXhjaGFuZ2UgZmFpbGVkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgdXNlciBpbmZvIGZyb20gQXV0aGVudGlrXHJcbiAgICBjb25zdCB1c2VySW5mbyA9IGF3YWl0IGdldFVzZXJJbmZvKHRva2VuUmVzcG9uc2UuYWNjZXNzX3Rva2VuKTtcclxuICAgIFxyXG4gICAgaWYgKCF1c2VySW5mbykge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgdXNlciBpbmZvIGZyb20gQXV0aGVudGlrJyk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGdldCB1c2VyIGluZm8nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbmQgb3IgY3JlYXRlIHVzZXJcclxuICAgIGxldCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGVtYWlsOiB1c2VySW5mby5lbWFpbCB9LFxyXG4gICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgdXNlckdyb3Vwczoge1xyXG4gICAgICAgICAgaW5jbHVkZTogeyBncm91cDogdHJ1ZSB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgLy8gQ3JlYXRlIG5ldyB1c2VyXHJcbiAgICAgIHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGVtYWlsOiB1c2VySW5mby5lbWFpbCxcclxuICAgICAgICAgIHVzZXJuYW1lOiB1c2VySW5mby5wcmVmZXJyZWRfdXNlcm5hbWUgfHwgdXNlckluZm8uZW1haWwuc3BsaXQoJ0AnKVswXSxcclxuICAgICAgICAgIGZpcnN0TmFtZTogdXNlckluZm8ubmFtZS5zcGxpdCgnICcpWzBdIHx8IHVzZXJJbmZvLm5hbWUsXHJcbiAgICAgICAgICBsYXN0TmFtZTogdXNlckluZm8ubmFtZS5zcGxpdCgnICcpLnNsaWNlKDEpLmpvaW4oJyAnKSB8fCAnJyxcclxuICAgICAgICAgIHJvbGU6ICdNRU1CRVInLFxyXG4gICAgICAgICAgcGFpZFN0YXR1czogZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICB1c2VyR3JvdXBzOiB7XHJcbiAgICAgICAgICAgIGluY2x1ZGU6IHsgZ3JvdXA6IHRydWUgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3luYyBncm91cHMgZnJvbSBPSURDXHJcbiAgICBpZiAodXNlckluZm8uZ3JvdXBzKSB7XHJcbiAgICAgIGF3YWl0IHN5bmNVc2VyR3JvdXBzKHVzZXIuaWQsIHVzZXJJbmZvLmdyb3Vwcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgSldUIHRva2VuXHJcbiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlSldUKHVzZXIpO1xyXG4gICAgXHJcbiAgICAvLyBHZXQgYXV0aGVudGlrIGdyb3Vwc1xyXG4gICAgY29uc3QgYXV0aGVudGlrR3JvdXBzID0gdXNlci51c2VyR3JvdXBzLm1hcCh1ZyA9PiB1Zy5ncm91cC5uYW1lKTtcclxuICAgIFxyXG4gICAgLy8gRGV0ZXJtaW5lIGVmZmVjdGl2ZSByb2xlIGJhc2VkIG9uIE9JREMgZ3JvdXBzXHJcbiAgICBjb25zdCBlZmZlY3RpdmVSb2xlID0gZ2V0RWZmZWN0aXZlUm9sZSh1c2VyLnJvbGUsIGF1dGhlbnRpa0dyb3Vwcyk7XHJcbiAgICBcclxuICAgIGxvZ2dlci5pbmZvKCdPSURDIGxvZ2luIHN1Y2Nlc3NmdWwnLCB7IHVzZXJJZDogdXNlci5pZCwgZW1haWw6IHVzZXIuZW1haWwsIGVmZmVjdGl2ZVJvbGUgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgdG9rZW4sXHJcbiAgICAgIHVzZXI6IHtcclxuICAgICAgICBpZDogdXNlci5pZCxcclxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcclxuICAgICAgICBmaXJzdE5hbWU6IHVzZXIuZmlyc3ROYW1lLFxyXG4gICAgICAgIGxhc3ROYW1lOiB1c2VyLmxhc3ROYW1lLFxyXG4gICAgICAgIGRpc3BsYXlOYW1lOiB1c2VyLmRpc3BsYXlOYW1lIHx8IGAke3VzZXIuZmlyc3ROYW1lfSAke3VzZXIubGFzdE5hbWV9YC50cmltKCksXHJcbiAgICAgICAgcm9sZTogZWZmZWN0aXZlUm9sZSxcclxuICAgICAgICBwYWlkU3RhdHVzOiB1c2VyLnBhaWRTdGF0dXMsXHJcbiAgICAgICAgYXV0aGVudGlrR3JvdXBzOiBhdXRoZW50aWtHcm91cHNcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBsb2dnZXIuZXJyb3IoJ09JREMgbG9naW4gZmFpbGVkJywgeyBlcnJvciB9KTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnT0lEQyBhdXRoZW50aWNhdGlvbiBmYWlsZWQnIH0pO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlUGFzc3dvcmRMb2dpbihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSwgdXNlcm5hbWU6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBGaW5kIHVzZXIgYnkgdXNlcm5hbWUgb3IgZW1haWxcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kRmlyc3Qoe1xyXG4gICAgICB3aGVyZToge1xyXG4gICAgICAgIE9SOiBbXHJcbiAgICAgICAgICB7IHVzZXJuYW1lOiB1c2VybmFtZSB9LFxyXG4gICAgICAgICAgeyBlbWFpbDogdXNlcm5hbWUgfVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgIHVzZXJHcm91cHM6IHtcclxuICAgICAgICAgIGluY2x1ZGU6IHsgZ3JvdXA6IHRydWUgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnSW52YWxpZCBjcmVkZW50aWFscycgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBoYXMgcGFzc3dvcmQgKE9JREMgdXNlcnMgbWlnaHQgbm90KVxyXG4gICAgaWYgKCF1c2VyLnBhc3N3b3JkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnQWNjb3VudCByZXF1aXJlcyBPSURDIGF1dGhlbnRpY2F0aW9uJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgcGFzc3dvcmRcclxuICAgIGNvbnN0IGlzVmFsaWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcclxuICAgIGlmICghaXNWYWxpZFBhc3N3b3JkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnSW52YWxpZCBjcmVkZW50aWFscycgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgSldUIHRva2VuXHJcbiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlSldUKHVzZXIpO1xyXG4gICAgXHJcbiAgICAvLyBHZXQgYXV0aGVudGlrIGdyb3Vwc1xyXG4gICAgY29uc3QgYXV0aGVudGlrR3JvdXBzID0gdXNlci51c2VyR3JvdXBzLm1hcCh1ZyA9PiB1Zy5ncm91cC5uYW1lKTtcclxuICAgIFxyXG4gICAgLy8gRGV0ZXJtaW5lIGVmZmVjdGl2ZSByb2xlIGJhc2VkIG9uIE9JREMgZ3JvdXBzXHJcbiAgICBjb25zdCBlZmZlY3RpdmVSb2xlID0gZ2V0RWZmZWN0aXZlUm9sZSh1c2VyLnJvbGUsIGF1dGhlbnRpa0dyb3Vwcyk7XHJcbiAgICBcclxuICAgIGxvZ2dlci5pbmZvKCdQYXNzd29yZCBsb2dpbiBzdWNjZXNzZnVsJywgeyB1c2VySWQ6IHVzZXIuaWQsIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLCBlZmZlY3RpdmVSb2xlIH0pO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHRva2VuLFxyXG4gICAgICB1c2VyOiB7XHJcbiAgICAgICAgaWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXHJcbiAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICBsYXN0TmFtZTogdXNlci5sYXN0TmFtZSxcclxuICAgICAgICBkaXNwbGF5TmFtZTogdXNlci5kaXNwbGF5TmFtZSB8fCBgJHt1c2VyLmZpcnN0TmFtZX0gJHt1c2VyLmxhc3ROYW1lfWAudHJpbSgpLFxyXG4gICAgICAgIHJvbGU6IGVmZmVjdGl2ZVJvbGUsXHJcbiAgICAgICAgcGFpZFN0YXR1czogdXNlci5wYWlkU3RhdHVzLFxyXG4gICAgICAgIGF1dGhlbnRpa0dyb3VwczogYXV0aGVudGlrR3JvdXBzXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKCdQYXNzd29yZCBsb2dpbiBmYWlsZWQnLCB7IGVycm9yIH0pO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiBmYWlsZWQnIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVKV1QodXNlcjogYW55KSB7XHJcbiAgcmV0dXJuIGp3dC5zaWduKFxyXG4gICAge1xyXG4gICAgICBpZDogdXNlci5pZCxcclxuICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgICByb2xlOiB1c2VyLnJvbGVcclxuICAgIH0sXHJcbiAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICdmYWxsYmFjay1zZWNyZXQnLFxyXG4gICAgeyBleHBpcmVzSW46ICcyNGgnIH1cclxuICApO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBleGNoYW5nZUNvZGVGb3JUb2tlbnMoY29kZTogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGlzc3VlciA9IHByb2Nlc3MuZW52LkFVVEhFTlRJS19JU1NVRVI7XHJcbiAgICBjb25zdCBjbGllbnRJZCA9IHByb2Nlc3MuZW52LkFVVEhFTlRJS19DTElFTlRfSUQ7XHJcbiAgICBjb25zdCBjbGllbnRTZWNyZXQgPSBwcm9jZXNzLmVudi5BVVRIRU5USUtfQ0xJRU5UX1NFQ1JFVDtcclxuICAgIGNvbnN0IHJlZGlyZWN0VXJpID0gcHJvY2Vzcy5lbnYuQVVUSEVOVElLX1JFRElSRUNUX1VSSTtcclxuXHJcbiAgICBpZiAoIWlzc3VlciB8fCAhY2xpZW50SWQgfHwgIWNsaWVudFNlY3JldCB8fCAhcmVkaXJlY3RVcmkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9JREMgY29uZmlndXJhdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRva2VuRW5kcG9pbnQgPSBgJHtpc3N1ZXJ9L2FwcGxpY2F0aW9uL28vdG9rZW4vYDtcclxuICAgIFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0b2tlbkVuZHBvaW50LCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcclxuICAgICAgICBncmFudF90eXBlOiAnYXV0aG9yaXphdGlvbl9jb2RlJyxcclxuICAgICAgICBjbGllbnRfaWQ6IGNsaWVudElkLFxyXG4gICAgICAgIGNsaWVudF9zZWNyZXQ6IGNsaWVudFNlY3JldCxcclxuICAgICAgICBjb2RlOiBjb2RlLFxyXG4gICAgICAgIHJlZGlyZWN0X3VyaTogcmVkaXJlY3RVcmksXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignVG9rZW4gZXhjaGFuZ2UgZmFpbGVkJywgeyBcclxuICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cywgXHJcbiAgICAgICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcclxuICAgICAgICBlcnJvcjogZXJyb3JUZXh0IFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGBUb2tlbiBleGNoYW5nZSBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIGxvZ2dlci5pbmZvKCdUb2tlbiBleGNoYW5nZSBzdWNjZXNzZnVsJywgeyBoYXNBY2Nlc3NUb2tlbjogISF0b2tlbkRhdGEuYWNjZXNzX3Rva2VuIH0pO1xyXG4gICAgcmV0dXJuIHRva2VuRGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKCdUb2tlbiBleGNoYW5nZSBlcnJvcicsIHsgZXJyb3IgfSk7XHJcbiAgICByZXR1cm4geyBlcnJvcjogYFRva2VuIGV4Y2hhbmdlIGVycm9yOiAke2Vycm9yfWAgfTtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXJJbmZvKGFjY2Vzc1Rva2VuOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgaXNzdWVyID0gcHJvY2Vzcy5lbnYuQVVUSEVOVElLX0lTU1VFUjtcclxuICAgIFxyXG4gICAgaWYgKCFpc3N1ZXIpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGlzc3VlciBjb25maWd1cmF0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlcmluZm9FbmRwb2ludCA9IGAke2lzc3Vlcn0vYXBwbGljYXRpb24vby91c2VyaW5mby9gO1xyXG4gICAgXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVzZXJpbmZvRW5kcG9pbnQsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignVXNlciBpbmZvIHJlcXVlc3QgZmFpbGVkJywgeyBcclxuICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cywgXHJcbiAgICAgICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCBcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXJJbmZvID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgbG9nZ2VyLmluZm8oJ1VzZXIgaW5mbyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JywgeyBlbWFpbDogdXNlckluZm8uZW1haWwgfSk7XHJcbiAgICByZXR1cm4gdXNlckluZm87XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ2dlci5lcnJvcignVXNlciBpbmZvIGVycm9yJywgeyBlcnJvciB9KTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc3luY1VzZXJHcm91cHModXNlcklkOiBzdHJpbmcsIGdyb3Vwczogc3RyaW5nW10pIHtcclxuICB0cnkge1xyXG4gICAgLy8gR2V0IGV4aXN0aW5nIHVzZXIgZ3JvdXBzXHJcbiAgICBjb25zdCBleGlzdGluZ0dyb3VwcyA9IGF3YWl0IHByaXNtYS51c2VyR3JvdXAuZmluZE1hbnkoe1xyXG4gICAgICB3aGVyZTogeyB1c2VySWQgfSxcclxuICAgICAgaW5jbHVkZTogeyBncm91cDogdHJ1ZSB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBleGlzdGluZ0dyb3VwTmFtZXMgPSBleGlzdGluZ0dyb3Vwcy5tYXAodWcgPT4gdWcuZ3JvdXAubmFtZSk7XHJcbiAgICBcclxuICAgIC8vIEFkZCBuZXcgZ3JvdXBzXHJcbiAgICBmb3IgKGNvbnN0IGdyb3VwTmFtZSBvZiBncm91cHMpIHtcclxuICAgICAgaWYgKCFleGlzdGluZ0dyb3VwTmFtZXMuaW5jbHVkZXMoZ3JvdXBOYW1lKSkge1xyXG4gICAgICAgIC8vIEZpbmQgb3IgY3JlYXRlIGdyb3VwXHJcbiAgICAgICAgbGV0IGdyb3VwID0gYXdhaXQgcHJpc21hLmdyb3VwLmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICB3aGVyZTogeyBuYW1lOiBncm91cE5hbWUgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIWdyb3VwKSB7XHJcbiAgICAgICAgICBncm91cCA9IGF3YWl0IHByaXNtYS5ncm91cC5jcmVhdGUoe1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgbmFtZTogZ3JvdXBOYW1lLFxyXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgR3JvdXAgZnJvbSBPSURDOiAke2dyb3VwTmFtZX1gLFxyXG4gICAgICAgICAgICAgIGV4dGVybmFsSWQ6IGdyb3VwTmFtZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCB1c2VyIHRvIGdyb3VwXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnVzZXJHcm91cC5jcmVhdGUoe1xyXG4gICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGdyb3VwSWQ6IGdyb3VwLmlkXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBSZW1vdmUgZ3JvdXBzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiBPSURDXHJcbiAgICBmb3IgKGNvbnN0IGV4aXN0aW5nR3JvdXAgb2YgZXhpc3RpbmdHcm91cHMpIHtcclxuICAgICAgaWYgKCFncm91cHMuaW5jbHVkZXMoZXhpc3RpbmdHcm91cC5ncm91cC5uYW1lKSkge1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyR3JvdXAuZGVsZXRlKHtcclxuICAgICAgICAgIHdoZXJlOiB7IGlkOiBleGlzdGluZ0dyb3VwLmlkIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvZ2dlci5pbmZvKCdVc2VyIGdyb3VwcyBzeW5jZWQgc3VjY2Vzc2Z1bGx5JywgeyB1c2VySWQsIGdyb3VwQ291bnQ6IGdyb3Vwcy5sZW5ndGggfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHN5bmMgdXNlciBncm91cHMnLCB7IGVycm9yLCB1c2VySWQgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJiY3J5cHQiLCJqd3QiLCJwcmlzbWEiLCJsb2dnZXIiLCJ3aXRoQ09SUyIsImdldEVmZmVjdGl2ZVJvbGUiLCJ1c2VyUm9sZSIsImF1dGhlbnRpa0dyb3VwcyIsImluY2x1ZGVzIiwiaW5mbyIsIm9yaWdpbmFsUm9sZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiY29kZSIsInN0YXRlIiwiYm9keSIsImhhbmRsZU9JRENMb2dpbiIsImhhbmRsZVBhc3N3b3JkTG9naW4iLCJzdWJzdHJpbmciLCJ0b2tlblJlc3BvbnNlIiwiZXhjaGFuZ2VDb2RlRm9yVG9rZW5zIiwiYWNjZXNzX3Rva2VuIiwidXNlckluZm8iLCJnZXRVc2VySW5mbyIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJlbWFpbCIsImluY2x1ZGUiLCJ1c2VyR3JvdXBzIiwiZ3JvdXAiLCJjcmVhdGUiLCJkYXRhIiwicHJlZmVycmVkX3VzZXJuYW1lIiwic3BsaXQiLCJmaXJzdE5hbWUiLCJuYW1lIiwibGFzdE5hbWUiLCJzbGljZSIsImpvaW4iLCJyb2xlIiwicGFpZFN0YXR1cyIsImdyb3VwcyIsInN5bmNVc2VyR3JvdXBzIiwiaWQiLCJ0b2tlbiIsImdlbmVyYXRlSldUIiwibWFwIiwidWciLCJlZmZlY3RpdmVSb2xlIiwidXNlcklkIiwiZGlzcGxheU5hbWUiLCJ0cmltIiwiZmluZEZpcnN0IiwiT1IiLCJpc1ZhbGlkUGFzc3dvcmQiLCJjb21wYXJlIiwic2lnbiIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiZXhwaXJlc0luIiwiaXNzdWVyIiwiQVVUSEVOVElLX0lTU1VFUiIsImNsaWVudElkIiwiQVVUSEVOVElLX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkFVVEhFTlRJS19DTElFTlRfU0VDUkVUIiwicmVkaXJlY3RVcmkiLCJBVVRIRU5USUtfUkVESVJFQ1RfVVJJIiwiRXJyb3IiLCJ0b2tlbkVuZHBvaW50IiwicmVzcG9uc2UiLCJmZXRjaCIsImhlYWRlcnMiLCJVUkxTZWFyY2hQYXJhbXMiLCJncmFudF90eXBlIiwiY2xpZW50X2lkIiwiY2xpZW50X3NlY3JldCIsInJlZGlyZWN0X3VyaSIsIm9rIiwiZXJyb3JUZXh0IiwidGV4dCIsInN0YXR1c1RleHQiLCJ0b2tlbkRhdGEiLCJoYXNBY2Nlc3NUb2tlbiIsImFjY2Vzc1Rva2VuIiwidXNlcmluZm9FbmRwb2ludCIsImV4aXN0aW5nR3JvdXBzIiwidXNlckdyb3VwIiwiZmluZE1hbnkiLCJleGlzdGluZ0dyb3VwTmFtZXMiLCJncm91cE5hbWUiLCJkZXNjcmlwdGlvbiIsImV4dGVybmFsSWQiLCJncm91cElkIiwiZXhpc3RpbmdHcm91cCIsImRlbGV0ZSIsImdyb3VwQ291bnQiLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/auth/login.ts\n");

/***/ }),

/***/ "(api)/./src/utils/logger.ts":
/*!*****************************!*\
  !*** ./src/utils/logger.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogLevel: () => (/* binding */ LogLevel),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\nvar LogLevel;\n(function(LogLevel) {\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 1] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 2] = \"WARN\";\n    LogLevel[LogLevel[\"ERROR\"] = 3] = \"ERROR\";\n})(LogLevel || (LogLevel = {}));\nclass Logger {\n    constructor(level = 1){\n        this.level = level;\n    }\n    formatMessage(level, message, meta) {\n        const timestamp = new Date().toISOString();\n        const metaStr = meta ? ` ${JSON.stringify(meta)}` : \"\";\n        return `[${timestamp}] ${level}: ${message}${metaStr}`;\n    }\n    log(level, levelName, message, meta) {\n        if (level >= this.level) {\n            const formattedMessage = this.formatMessage(levelName, message, meta);\n            switch(level){\n                case 3:\n                    console.error(formattedMessage);\n                    break;\n                case 2:\n                    console.warn(formattedMessage);\n                    break;\n                case 1:\n                    console.info(formattedMessage);\n                    break;\n                case 0:\n                    console.debug(formattedMessage);\n                    break;\n            }\n        }\n    }\n    debug(message, meta) {\n        this.log(0, \"DEBUG\", message, meta);\n    }\n    info(message, meta) {\n        this.log(1, \"INFO\", message, meta);\n    }\n    warn(message, meta) {\n        this.log(2, \"WARN\", message, meta);\n    }\n    error(message, meta) {\n        this.log(3, \"ERROR\", message, meta);\n    }\n    setLevel(level) {\n        this.level = level;\n    }\n}\nconst logger = new Logger( true ? 0 : 0);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMvbG9nZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7VUFBWUE7Ozs7O0dBQUFBLGFBQUFBO0FBT1osTUFBTUM7SUFHSkMsWUFBWUMsU0FBK0IsQ0FBRTtRQUMzQyxJQUFJLENBQUNBLEtBQUssR0FBR0E7SUFDZjtJQUVRQyxjQUFjRCxLQUFhLEVBQUVFLE9BQWUsRUFBRUMsSUFBVSxFQUFVO1FBQ3hFLE1BQU1DLFlBQVksSUFBSUMsT0FBT0MsV0FBVztRQUN4QyxNQUFNQyxVQUFVSixPQUFPLENBQUMsQ0FBQyxFQUFFSyxLQUFLQyxTQUFTLENBQUNOLE1BQU0sQ0FBQyxHQUFHO1FBQ3BELE9BQU8sQ0FBQyxDQUFDLEVBQUVDLFVBQVUsRUFBRSxFQUFFSixNQUFNLEVBQUUsRUFBRUUsUUFBUSxFQUFFSyxRQUFRLENBQUM7SUFDeEQ7SUFFUUcsSUFBSVYsS0FBZSxFQUFFVyxTQUFpQixFQUFFVCxPQUFlLEVBQUVDLElBQVUsRUFBRTtRQUMzRSxJQUFJSCxTQUFTLElBQUksQ0FBQ0EsS0FBSyxFQUFFO1lBQ3ZCLE1BQU1ZLG1CQUFtQixJQUFJLENBQUNYLGFBQWEsQ0FBQ1UsV0FBV1QsU0FBU0M7WUFFaEUsT0FBUUg7Z0JBQ047b0JBQ0VhLFFBQVFDLEtBQUssQ0FBQ0Y7b0JBQ2Q7Z0JBQ0Y7b0JBQ0VDLFFBQVFFLElBQUksQ0FBQ0g7b0JBQ2I7Z0JBQ0Y7b0JBQ0VDLFFBQVFHLElBQUksQ0FBQ0o7b0JBQ2I7Z0JBQ0Y7b0JBQ0VDLFFBQVFJLEtBQUssQ0FBQ0w7b0JBQ2Q7WUFDSjtRQUNGO0lBQ0Y7SUFFQUssTUFBTWYsT0FBZSxFQUFFQyxJQUFVLEVBQUU7UUFDakMsSUFBSSxDQUFDTyxHQUFHLElBQWlCLFNBQVNSLFNBQVNDO0lBQzdDO0lBRUFhLEtBQUtkLE9BQWUsRUFBRUMsSUFBVSxFQUFFO1FBQ2hDLElBQUksQ0FBQ08sR0FBRyxJQUFnQixRQUFRUixTQUFTQztJQUMzQztJQUVBWSxLQUFLYixPQUFlLEVBQUVDLElBQVUsRUFBRTtRQUNoQyxJQUFJLENBQUNPLEdBQUcsSUFBZ0IsUUFBUVIsU0FBU0M7SUFDM0M7SUFFQVcsTUFBTVosT0FBZSxFQUFFQyxJQUFVLEVBQUU7UUFDakMsSUFBSSxDQUFDTyxHQUFHLElBQWlCLFNBQVNSLFNBQVNDO0lBQzdDO0lBRUFlLFNBQVNsQixLQUFlLEVBQUU7UUFDeEIsSUFBSSxDQUFDQSxLQUFLLEdBQUdBO0lBQ2Y7QUFDRjtBQUVPLE1BQU1tQixTQUFTLElBQUlyQixPQUN4QnNCLEtBQXlCLFVBQ3pCO0FBRUYsaUVBQWVELE1BQU1BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tcm0zNjAtYmFja2VuZC8uL3NyYy91dGlscy9sb2dnZXIudHM/N2NmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBMb2dMZXZlbCB7XHJcbiAgREVCVUcgPSAwLFxyXG4gIElORk8gPSAxLFxyXG4gIFdBUk4gPSAyLFxyXG4gIEVSUk9SID0gM1xyXG59XHJcblxyXG5jbGFzcyBMb2dnZXIge1xyXG4gIHByaXZhdGUgbGV2ZWw6IExvZ0xldmVsO1xyXG5cclxuICBjb25zdHJ1Y3RvcihsZXZlbDogTG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPKSB7XHJcbiAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGZvcm1hdE1lc3NhZ2UobGV2ZWw6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGFTdHIgPSBtZXRhID8gYCAke0pTT04uc3RyaW5naWZ5KG1ldGEpfWAgOiAnJztcclxuICAgIHJldHVybiBgWyR7dGltZXN0YW1wfV0gJHtsZXZlbH06ICR7bWVzc2FnZX0ke21ldGFTdHJ9YDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbG9nKGxldmVsOiBMb2dMZXZlbCwgbGV2ZWxOYW1lOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgbWV0YT86IGFueSkge1xyXG4gICAgaWYgKGxldmVsID49IHRoaXMubGV2ZWwpIHtcclxuICAgICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZSA9IHRoaXMuZm9ybWF0TWVzc2FnZShsZXZlbE5hbWUsIG1lc3NhZ2UsIG1ldGEpO1xyXG4gICAgICBcclxuICAgICAgc3dpdGNoIChsZXZlbCkge1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuRVJST1I6XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5XQVJOOlxyXG4gICAgICAgICAgY29uc29sZS53YXJuKGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5JTkZPOlxyXG4gICAgICAgICAgY29uc29sZS5pbmZvKGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5ERUJVRzpcclxuICAgICAgICAgIGNvbnNvbGUuZGVidWcoZm9ybWF0dGVkTWVzc2FnZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGVidWcobWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5ERUJVRywgJ0RFQlVHJywgbWVzc2FnZSwgbWV0YSk7XHJcbiAgfVxyXG5cclxuICBpbmZvKG1lc3NhZ2U6IHN0cmluZywgbWV0YT86IGFueSkge1xyXG4gICAgdGhpcy5sb2coTG9nTGV2ZWwuSU5GTywgJ0lORk8nLCBtZXNzYWdlLCBtZXRhKTtcclxuICB9XHJcblxyXG4gIHdhcm4obWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5XQVJOLCAnV0FSTicsIG1lc3NhZ2UsIG1ldGEpO1xyXG4gIH1cclxuXHJcbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5FUlJPUiwgJ0VSUk9SJywgbWVzc2FnZSwgbWV0YSk7XHJcbiAgfVxyXG5cclxuICBzZXRMZXZlbChsZXZlbDogTG9nTGV2ZWwpIHtcclxuICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFxyXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gTG9nTGV2ZWwuREVCVUcgOiBMb2dMZXZlbC5JTkZPXHJcbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XHJcbiJdLCJuYW1lcyI6WyJMb2dMZXZlbCIsIkxvZ2dlciIsImNvbnN0cnVjdG9yIiwibGV2ZWwiLCJmb3JtYXRNZXNzYWdlIiwibWVzc2FnZSIsIm1ldGEiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJtZXRhU3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvZyIsImxldmVsTmFtZSIsImZvcm1hdHRlZE1lc3NhZ2UiLCJjb25zb2xlIiwiZXJyb3IiLCJ3YXJuIiwiaW5mbyIsImRlYnVnIiwic2V0TGV2ZWwiLCJsb2dnZXIiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/utils/logger.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Flogin&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fauth%2Flogin.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();
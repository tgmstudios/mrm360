"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/users";
exports.ids = ["pages/api/users"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fusers&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fusers%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fusers&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fusers%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_users_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/users/index.ts */ \"(api)/./src/pages/api/users/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_users_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_users_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_users_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_users_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/users\",\n        pathname: \"/api/users\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_users_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVzZXJzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZ1c2VycyUyRmluZGV4LnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzJEO0FBQzNEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQywwREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsMERBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvP2RlYTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvdXNlcnMvaW5kZXgudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91c2Vyc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VzZXJzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fusers&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fusers%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/managers/userManager.ts":
/*!*************************************!*\
  !*** ./src/managers/userManager.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserManager: () => (/* binding */ UserManager)\n/* harmony export */ });\n/* harmony import */ var _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/models/prismaClient */ \"(api)/./src/models/prismaClient.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/logger */ \"(api)/./src/utils/logger.ts\");\n/* harmony import */ var _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/middleware/errorHandler */ \"(api)/./src/middleware/errorHandler.ts\");\n\n\n\nclass UserManager {\n    async createUser(data) {\n        try {\n            // Check if user already exists\n            const existingUser = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n                where: {\n                    email: data.email\n                }\n            });\n            if (existingUser) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.CONFLICT(\"User with this email already exists\");\n            }\n            const user = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.user.create({\n                data: {\n                    email: data.email,\n                    firstName: data.firstName,\n                    lastName: data.lastName,\n                    displayName: data.displayName,\n                    paidStatus: data.paidStatus ?? false,\n                    role: data.role ?? \"MEMBER\"\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Created user: ${user.email}`);\n            // Return user with isActive field (false for newly created users)\n            return {\n                ...user,\n                isActive: false // New users are inactive until they login\n            };\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error creating user:\", error);\n            throw error;\n        }\n    }\n    async getUserById(id) {\n        try {\n            const user = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n                where: {\n                    id\n                },\n                include: {\n                    userGroups: {\n                        include: {\n                            group: true\n                        }\n                    },\n                    userTeams: {\n                        include: {\n                            team: true\n                        }\n                    }\n                }\n            });\n            if (!user) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"User\");\n            }\n            // Add isActive field based on whether user has authentikId\n            return {\n                ...user,\n                isActive: !!user.authentikId // User is active if they have an authentikId\n            };\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error getting user ${id}:`, error);\n            throw error;\n        }\n    }\n    async getUserByEmail(email) {\n        try {\n            const user = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n                where: {\n                    email\n                },\n                include: {\n                    userGroups: {\n                        include: {\n                            group: true\n                        }\n                    }\n                }\n            });\n            if (!user) {\n                return null;\n            }\n            // Add isActive field based on whether user has authentikId\n            return {\n                ...user,\n                isActive: !!user.authentikId // User is active if they have an authentikId\n            };\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error getting user by email ${email}:`, error);\n            throw error;\n        }\n    }\n    async updateUser(id, data) {\n        try {\n            // Build update data object with only provided fields\n            const updateData = {};\n            if (data.firstName !== undefined) updateData.firstName = data.firstName;\n            if (data.lastName !== undefined) updateData.lastName = data.lastName;\n            if (data.displayName !== undefined) updateData.displayName = data.displayName;\n            // Map isPaid to paidStatus (existing database field)\n            if (data.isPaid !== undefined) updateData.paidStatus = data.isPaid;\n            // Note: isActive and paidUntil fields don't exist in the database schema\n            // These would need to be added to the schema if they're required\n            const user = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.user.update({\n                where: {\n                    id\n                },\n                data: updateData\n            });\n            // Handle paid status changes with Authentik group management (synchronous)\n            if (data.isPaid !== undefined) {\n                try {\n                    // Import here to avoid circular dependencies\n                    const { MemberPaidStatusService } = await __webpack_require__.e(/*! import() */ \"_api_src_services_memberPaidStatusService_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ../services/memberPaidStatusService */ \"(api)/./src/services/memberPaidStatusService.ts\"));\n                    const memberPaidStatusService = new MemberPaidStatusService(_models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma);\n                    await memberPaidStatusService.updateMemberPaidStatus(id, data.isPaid);\n                    _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(\"Authentik group membership updated for paid status change\", {\n                        userId: id,\n                        paidStatus: data.isPaid,\n                        userEmail: user.email\n                    });\n                } catch (error) {\n                    _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Failed to update Authentik group membership for paid status change\", {\n                        error,\n                        userId: id,\n                        paidStatus: data.isPaid\n                    });\n                // Don't throw here - we want the user update to succeed even if background task fails\n                }\n            }\n            // Handle authentik groups if provided\n            if (data.authentikGroups !== undefined) {\n                // This would need to be implemented if authentik groups are managed separately\n                _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(\"Authentik groups update requested but not implemented\", {\n                    userId: id,\n                    groups: data.authentikGroups\n                });\n            }\n            // Return the updated user profile\n            return await this.getUserById(id);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error updating user ${id}:`, error);\n            throw error;\n        }\n    }\n    async deleteUser(id) {\n        try {\n            await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.user.delete({\n                where: {\n                    id\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Deleted user: ${id}`);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error deleting user ${id}:`, error);\n            throw error;\n        }\n    }\n    async getUsers(params) {\n        try {\n            const { page = 1, limit = 20, search, role, paidStatus, groupId, teamId, sortBy, sortOrder } = params;\n            const skip = (page - 1) * limit;\n            // Build where clause\n            const where = {};\n            if (search) {\n                where.OR = [\n                    {\n                        firstName: {\n                            contains: search,\n                            mode: \"insensitive\"\n                        }\n                    },\n                    {\n                        lastName: {\n                            contains: search,\n                            mode: \"insensitive\"\n                        }\n                    },\n                    {\n                        email: {\n                            contains: search,\n                            mode: \"insensitive\"\n                        }\n                    }\n                ];\n            }\n            if (role) {\n                where.role = role;\n            }\n            if (paidStatus !== undefined) {\n                where.paidStatus = paidStatus;\n            }\n            if (groupId) {\n                where.userGroups = {\n                    some: {\n                        groupId\n                    }\n                };\n            }\n            if (teamId) {\n                where.userTeams = {\n                    some: {\n                        teamId\n                    }\n                };\n            }\n            // Get total count\n            const total = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.user.count({\n                where\n            });\n            // Build orderBy clause\n            let orderBy = [];\n            if (sortBy && sortOrder) {\n                if (sortBy === \"displayName\") {\n                    orderBy = [\n                        {\n                            lastName: sortOrder\n                        },\n                        {\n                            firstName: sortOrder\n                        }\n                    ];\n                } else if (sortBy === \"email\") {\n                    orderBy = [\n                        {\n                            email: sortOrder\n                        }\n                    ];\n                } else if (sortBy === \"createdAt\") {\n                    orderBy = [\n                        {\n                            createdAt: sortOrder\n                        }\n                    ];\n                } else {\n                    // Default ordering\n                    orderBy = [\n                        {\n                            lastName: \"asc\"\n                        },\n                        {\n                            firstName: \"asc\"\n                        }\n                    ];\n                }\n            } else {\n                // Default ordering\n                orderBy = [\n                    {\n                        lastName: \"asc\"\n                    },\n                    {\n                        firstName: \"asc\"\n                    }\n                ];\n            }\n            // Get users\n            const users = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findMany({\n                where,\n                skip,\n                take: limit,\n                orderBy,\n                include: {\n                    userGroups: {\n                        include: {\n                            group: true\n                        }\n                    },\n                    userTeams: {\n                        include: {\n                            team: true\n                        }\n                    }\n                }\n            });\n            const totalPages = Math.ceil(total / limit);\n            // Add isActive field to each user\n            const usersWithActiveStatus = users.map((user)=>({\n                    ...user,\n                    isActive: !!user.authentikId // User is active if they have an authentikId\n                }));\n            return {\n                success: true,\n                data: usersWithActiveStatus,\n                pagination: {\n                    page,\n                    limit,\n                    total,\n                    totalPages\n                }\n            };\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error getting users:\", error);\n            throw error;\n        }\n    }\n    async assignUserToGroup(userId, groupId) {\n        try {\n            // Check if user and group exist\n            const [user, group] = await Promise.all([\n                _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n                    where: {\n                        id: userId\n                    }\n                }),\n                _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.group.findUnique({\n                    where: {\n                        id: groupId\n                    }\n                })\n            ]);\n            if (!user) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"User\");\n            }\n            if (!group) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"Group\");\n            }\n            // Check if already assigned\n            const existingAssignment = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.userGroup.findUnique({\n                where: {\n                    userId_groupId: {\n                        userId,\n                        groupId\n                    }\n                }\n            });\n            if (existingAssignment) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.CONFLICT(\"User is already assigned to this group\");\n            }\n            // Assign user to group\n            await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.userGroup.create({\n                data: {\n                    userId,\n                    groupId\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Assigned user ${userId} to group ${groupId}`);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error assigning user ${userId} to group ${groupId}:`, error);\n            throw error;\n        }\n    }\n    async removeUserFromGroup(userId, groupId) {\n        try {\n            await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.userGroup.delete({\n                where: {\n                    userId_groupId: {\n                        userId,\n                        groupId\n                    }\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Removed user ${userId} from group ${groupId}`);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error removing user ${userId} from group ${groupId}:`, error);\n            throw error;\n        }\n    }\n    async generateQRCode(userId) {\n        try {\n            const user = await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n                where: {\n                    id: userId\n                }\n            });\n            if (!user) {\n                throw _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_2__.Errors.NOT_FOUND(\"User\");\n            }\n            // Generate unique QR code\n            const qrCode = `MRM360-${userId}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n            // Update user with QR code\n            await _models_prismaClient__WEBPACK_IMPORTED_MODULE_0__.prisma.user.update({\n                where: {\n                    id: userId\n                },\n                data: {\n                    qrCode\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Generated QR code for user ${userId}`);\n            return qrCode;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error generating QR code for user ${userId}:`, error);\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MC1iYWNrZW5kLy4vc3JjL21hbmFnZXJzL3VzZXJNYW5hZ2VyLnRzP2NiZmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9tb2RlbHMvcHJpc21hQ2xpZW50JztcclxuaW1wb3J0IHsgXHJcbiAgVXNlclByb2ZpbGUsIFxyXG4gIENyZWF0ZVVzZXJSZXF1ZXN0LCBcclxuICBVcGRhdGVVc2VyUmVxdWVzdCwgXHJcbiAgVXNlclF1ZXJ5UGFyYW1zLFxyXG4gIFBhZ2luYXRlZFJlc3BvbnNlIFxyXG59IGZyb20gJ0AvdHlwZXMnO1xyXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL3V0aWxzL2xvZ2dlcic7XHJcbmltcG9ydCB7IEVycm9ycyB9IGZyb20gJ0AvbWlkZGxld2FyZS9lcnJvckhhbmRsZXInO1xyXG5pbXBvcnQgeyBNZW1iZXJQYWlkU3RhdHVzU2VydmljZSB9IGZyb20gJ0Avc2VydmljZXMvbWVtYmVyUGFpZFN0YXR1c1NlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFVzZXJNYW5hZ2VyIHtcclxuICBhc3luYyBjcmVhdGVVc2VyKGRhdGE6IENyZWF0ZVVzZXJSZXF1ZXN0KTogUHJvbWlzZTxVc2VyUHJvZmlsZT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0c1xyXG4gICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogZGF0YS5lbWFpbCB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKGV4aXN0aW5nVXNlcikge1xyXG4gICAgICAgIHRocm93IEVycm9ycy5DT05GTElDVCgnVXNlciB3aXRoIHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdHMnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgZW1haWw6IGRhdGEuZW1haWwsXHJcbiAgICAgICAgICBmaXJzdE5hbWU6IGRhdGEuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgbGFzdE5hbWU6IGRhdGEubGFzdE5hbWUsXHJcbiAgICAgICAgICBkaXNwbGF5TmFtZTogZGF0YS5kaXNwbGF5TmFtZSxcclxuICAgICAgICAgIHBhaWRTdGF0dXM6IGRhdGEucGFpZFN0YXR1cyA/PyBmYWxzZSxcclxuICAgICAgICAgIHJvbGU6IGRhdGEucm9sZSA/PyAnTUVNQkVSJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBsb2dnZXIuaW5mbyhgQ3JlYXRlZCB1c2VyOiAke3VzZXIuZW1haWx9YCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBSZXR1cm4gdXNlciB3aXRoIGlzQWN0aXZlIGZpZWxkIChmYWxzZSBmb3IgbmV3bHkgY3JlYXRlZCB1c2VycylcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi51c2VyLFxyXG4gICAgICAgIGlzQWN0aXZlOiBmYWxzZSAvLyBOZXcgdXNlcnMgYXJlIGluYWN0aXZlIHVudGlsIHRoZXkgbG9naW5cclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlcjonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0VXNlckJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8VXNlclByb2ZpbGU+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgIHVzZXJHcm91cHM6IHtcclxuICAgICAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgICAgIGdyb3VwOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB1c2VyVGVhbXM6IHtcclxuICAgICAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgICAgIHRlYW06IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICB0aHJvdyBFcnJvcnMuTk9UX0ZPVU5EKCdVc2VyJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFkZCBpc0FjdGl2ZSBmaWVsZCBiYXNlZCBvbiB3aGV0aGVyIHVzZXIgaGFzIGF1dGhlbnRpa0lkXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4udXNlcixcclxuICAgICAgICBpc0FjdGl2ZTogISF1c2VyLmF1dGhlbnRpa0lkIC8vIFVzZXIgaXMgYWN0aXZlIGlmIHRoZXkgaGF2ZSBhbiBhdXRoZW50aWtJZFxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBnZXR0aW5nIHVzZXIgJHtpZH06YCwgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFVzZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJQcm9maWxlIHwgbnVsbD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGVtYWlsIH0sXHJcbiAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgdXNlckdyb3Vwczoge1xyXG4gICAgICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICAgICAgZ3JvdXA6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQWRkIGlzQWN0aXZlIGZpZWxkIGJhc2VkIG9uIHdoZXRoZXIgdXNlciBoYXMgYXV0aGVudGlrSWRcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi51c2VyLFxyXG4gICAgICAgIGlzQWN0aXZlOiAhIXVzZXIuYXV0aGVudGlrSWQgLy8gVXNlciBpcyBhY3RpdmUgaWYgdGhleSBoYXZlIGFuIGF1dGhlbnRpa0lkXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGdldHRpbmcgdXNlciBieSBlbWFpbCAke2VtYWlsfTpgLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlVXNlcihpZDogc3RyaW5nLCBkYXRhOiBVcGRhdGVVc2VyUmVxdWVzdCk6IFByb21pc2U8VXNlclByb2ZpbGU+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEJ1aWxkIHVwZGF0ZSBkYXRhIG9iamVjdCB3aXRoIG9ubHkgcHJvdmlkZWQgZmllbGRzXHJcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHt9O1xyXG4gICAgICBcclxuICAgICAgaWYgKGRhdGEuZmlyc3ROYW1lICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuZmlyc3ROYW1lID0gZGF0YS5maXJzdE5hbWU7XHJcbiAgICAgIGlmIChkYXRhLmxhc3ROYW1lICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEubGFzdE5hbWUgPSBkYXRhLmxhc3ROYW1lO1xyXG4gICAgICBpZiAoZGF0YS5kaXNwbGF5TmFtZSAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmRpc3BsYXlOYW1lID0gZGF0YS5kaXNwbGF5TmFtZTtcclxuICAgICAgXHJcbiAgICAgIC8vIE1hcCBpc1BhaWQgdG8gcGFpZFN0YXR1cyAoZXhpc3RpbmcgZGF0YWJhc2UgZmllbGQpXHJcbiAgICAgIGlmIChkYXRhLmlzUGFpZCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnBhaWRTdGF0dXMgPSBkYXRhLmlzUGFpZDtcclxuICAgICAgXHJcbiAgICAgIC8vIE5vdGU6IGlzQWN0aXZlIGFuZCBwYWlkVW50aWwgZmllbGRzIGRvbid0IGV4aXN0IGluIHRoZSBkYXRhYmFzZSBzY2hlbWFcclxuICAgICAgLy8gVGhlc2Ugd291bGQgbmVlZCB0byBiZSBhZGRlZCB0byB0aGUgc2NoZW1hIGlmIHRoZXkncmUgcmVxdWlyZWRcclxuXHJcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgZGF0YTogdXBkYXRlRGF0YVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEhhbmRsZSBwYWlkIHN0YXR1cyBjaGFuZ2VzIHdpdGggQXV0aGVudGlrIGdyb3VwIG1hbmFnZW1lbnQgKHN5bmNocm9ub3VzKVxyXG4gICAgICBpZiAoZGF0YS5pc1BhaWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyBJbXBvcnQgaGVyZSB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXNcclxuICAgICAgICAgIGNvbnN0IHsgTWVtYmVyUGFpZFN0YXR1c1NlcnZpY2UgfSA9IGF3YWl0IGltcG9ydCgnLi4vc2VydmljZXMvbWVtYmVyUGFpZFN0YXR1c1NlcnZpY2UnKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3QgbWVtYmVyUGFpZFN0YXR1c1NlcnZpY2UgPSBuZXcgTWVtYmVyUGFpZFN0YXR1c1NlcnZpY2UocHJpc21hKTtcclxuICAgICAgICAgIGF3YWl0IG1lbWJlclBhaWRTdGF0dXNTZXJ2aWNlLnVwZGF0ZU1lbWJlclBhaWRTdGF0dXMoaWQsIGRhdGEuaXNQYWlkKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgbG9nZ2VyLmluZm8oJ0F1dGhlbnRpayBncm91cCBtZW1iZXJzaGlwIHVwZGF0ZWQgZm9yIHBhaWQgc3RhdHVzIGNoYW5nZScsIHsgXHJcbiAgICAgICAgICAgIHVzZXJJZDogaWQsIFxyXG4gICAgICAgICAgICBwYWlkU3RhdHVzOiBkYXRhLmlzUGFpZCxcclxuICAgICAgICAgICAgdXNlckVtYWlsOiB1c2VyLmVtYWlsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIEF1dGhlbnRpayBncm91cCBtZW1iZXJzaGlwIGZvciBwYWlkIHN0YXR1cyBjaGFuZ2UnLCB7IFxyXG4gICAgICAgICAgICBlcnJvciwgXHJcbiAgICAgICAgICAgIHVzZXJJZDogaWQsIFxyXG4gICAgICAgICAgICBwYWlkU3RhdHVzOiBkYXRhLmlzUGFpZCBcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgLy8gRG9uJ3QgdGhyb3cgaGVyZSAtIHdlIHdhbnQgdGhlIHVzZXIgdXBkYXRlIHRvIHN1Y2NlZWQgZXZlbiBpZiBiYWNrZ3JvdW5kIHRhc2sgZmFpbHNcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEhhbmRsZSBhdXRoZW50aWsgZ3JvdXBzIGlmIHByb3ZpZGVkXHJcbiAgICAgIGlmIChkYXRhLmF1dGhlbnRpa0dyb3VwcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgLy8gVGhpcyB3b3VsZCBuZWVkIHRvIGJlIGltcGxlbWVudGVkIGlmIGF1dGhlbnRpayBncm91cHMgYXJlIG1hbmFnZWQgc2VwYXJhdGVseVxyXG4gICAgICAgIGxvZ2dlci5pbmZvKCdBdXRoZW50aWsgZ3JvdXBzIHVwZGF0ZSByZXF1ZXN0ZWQgYnV0IG5vdCBpbXBsZW1lbnRlZCcsIHsgXHJcbiAgICAgICAgICB1c2VySWQ6IGlkLCBcclxuICAgICAgICAgIGdyb3VwczogZGF0YS5hdXRoZW50aWtHcm91cHMgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFJldHVybiB0aGUgdXBkYXRlZCB1c2VyIHByb2ZpbGVcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0VXNlckJ5SWQoaWQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciB1cGRhdGluZyB1c2VyICR7aWR9OmAsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGVVc2VyKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHByaXNtYS51c2VyLmRlbGV0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGxvZ2dlci5pbmZvKGBEZWxldGVkIHVzZXI6ICR7aWR9YCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGRlbGV0aW5nIHVzZXIgJHtpZH06YCwgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFVzZXJzKHBhcmFtczogVXNlclF1ZXJ5UGFyYW1zKTogUHJvbWlzZTxQYWdpbmF0ZWRSZXNwb25zZTxVc2VyUHJvZmlsZT4+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgcGFnZSA9IDEsIGxpbWl0ID0gMjAsIHNlYXJjaCwgcm9sZSwgcGFpZFN0YXR1cywgZ3JvdXBJZCwgdGVhbUlkLCBzb3J0QnksIHNvcnRPcmRlciB9ID0gcGFyYW1zO1xyXG4gICAgICBjb25zdCBza2lwID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xyXG5cclxuICAgICAgLy8gQnVpbGQgd2hlcmUgY2xhdXNlXHJcbiAgICAgIGNvbnN0IHdoZXJlOiBhbnkgPSB7fTtcclxuICAgICAgXHJcbiAgICAgIGlmIChzZWFyY2gpIHtcclxuICAgICAgICB3aGVyZS5PUiA9IFtcclxuICAgICAgICAgIHsgZmlyc3ROYW1lOiB7IGNvbnRhaW5zOiBzZWFyY2gsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxyXG4gICAgICAgICAgeyBsYXN0TmFtZTogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcclxuICAgICAgICAgIHsgZW1haWw6IHsgY29udGFpbnM6IHNlYXJjaCwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH1cclxuICAgICAgICBdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocm9sZSkge1xyXG4gICAgICAgIHdoZXJlLnJvbGUgPSByb2xlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocGFpZFN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgd2hlcmUucGFpZFN0YXR1cyA9IHBhaWRTdGF0dXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChncm91cElkKSB7XHJcbiAgICAgICAgd2hlcmUudXNlckdyb3VwcyA9IHtcclxuICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgZ3JvdXBJZFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0ZWFtSWQpIHtcclxuICAgICAgICB3aGVyZS51c2VyVGVhbXMgPSB7XHJcbiAgICAgICAgICBzb21lOiB7XHJcbiAgICAgICAgICAgIHRlYW1JZFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEdldCB0b3RhbCBjb3VudFxyXG4gICAgICBjb25zdCB0b3RhbCA9IGF3YWl0IHByaXNtYS51c2VyLmNvdW50KHsgd2hlcmUgfSk7XHJcblxyXG4gICAgICAvLyBCdWlsZCBvcmRlckJ5IGNsYXVzZVxyXG4gICAgICBsZXQgb3JkZXJCeTogYW55W10gPSBbXTtcclxuICAgICAgXHJcbiAgICAgIGlmIChzb3J0QnkgJiYgc29ydE9yZGVyKSB7XHJcbiAgICAgICAgaWYgKHNvcnRCeSA9PT0gJ2Rpc3BsYXlOYW1lJykge1xyXG4gICAgICAgICAgb3JkZXJCeSA9IFtcclxuICAgICAgICAgICAgeyBsYXN0TmFtZTogc29ydE9yZGVyIH0sXHJcbiAgICAgICAgICAgIHsgZmlyc3ROYW1lOiBzb3J0T3JkZXIgfVxyXG4gICAgICAgICAgXTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNvcnRCeSA9PT0gJ2VtYWlsJykge1xyXG4gICAgICAgICAgb3JkZXJCeSA9IFt7IGVtYWlsOiBzb3J0T3JkZXIgfV07XHJcbiAgICAgICAgfSBlbHNlIGlmIChzb3J0QnkgPT09ICdjcmVhdGVkQXQnKSB7XHJcbiAgICAgICAgICBvcmRlckJ5ID0gW3sgY3JlYXRlZEF0OiBzb3J0T3JkZXIgfV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIERlZmF1bHQgb3JkZXJpbmdcclxuICAgICAgICAgIG9yZGVyQnkgPSBbXHJcbiAgICAgICAgICAgIHsgbGFzdE5hbWU6ICdhc2MnIH0sXHJcbiAgICAgICAgICAgIHsgZmlyc3ROYW1lOiAnYXNjJyB9XHJcbiAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBEZWZhdWx0IG9yZGVyaW5nXHJcbiAgICAgICAgb3JkZXJCeSA9IFtcclxuICAgICAgICAgIHsgbGFzdE5hbWU6ICdhc2MnIH0sXHJcbiAgICAgICAgICB7IGZpcnN0TmFtZTogJ2FzYycgfVxyXG4gICAgICAgIF07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEdldCB1c2Vyc1xyXG4gICAgICBjb25zdCB1c2VycyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZSxcclxuICAgICAgICBza2lwLFxyXG4gICAgICAgIHRha2U6IGxpbWl0LFxyXG4gICAgICAgIG9yZGVyQnksXHJcbiAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgdXNlckdyb3Vwczoge1xyXG4gICAgICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICAgICAgZ3JvdXA6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHVzZXJUZWFtczoge1xyXG4gICAgICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICAgICAgdGVhbTogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodG90YWwgLyBsaW1pdCk7XHJcblxyXG4gICAgICAvLyBBZGQgaXNBY3RpdmUgZmllbGQgdG8gZWFjaCB1c2VyXHJcbiAgICAgIGNvbnN0IHVzZXJzV2l0aEFjdGl2ZVN0YXR1cyA9IHVzZXJzLm1hcCh1c2VyID0+ICh7XHJcbiAgICAgICAgLi4udXNlcixcclxuICAgICAgICBpc0FjdGl2ZTogISF1c2VyLmF1dGhlbnRpa0lkIC8vIFVzZXIgaXMgYWN0aXZlIGlmIHRoZXkgaGF2ZSBhbiBhdXRoZW50aWtJZFxyXG4gICAgICB9KSk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZGF0YTogdXNlcnNXaXRoQWN0aXZlU3RhdHVzLFxyXG4gICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgIHBhZ2UsXHJcbiAgICAgICAgICBsaW1pdCxcclxuICAgICAgICAgIHRvdGFsLFxyXG4gICAgICAgICAgdG90YWxQYWdlc1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyczonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgYXNzaWduVXNlclRvR3JvdXAodXNlcklkOiBzdHJpbmcsIGdyb3VwSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQ2hlY2sgaWYgdXNlciBhbmQgZ3JvdXAgZXhpc3RcclxuICAgICAgY29uc3QgW3VzZXIsIGdyb3VwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9IH0pLFxyXG4gICAgICAgIHByaXNtYS5ncm91cC5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGdyb3VwSWQgfSB9KVxyXG4gICAgICBdKTtcclxuXHJcbiAgICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHRocm93IEVycm9ycy5OT1RfRk9VTkQoJ1VzZXInKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFncm91cCkge1xyXG4gICAgICAgIHRocm93IEVycm9ycy5OT1RfRk9VTkQoJ0dyb3VwJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIGFscmVhZHkgYXNzaWduZWRcclxuICAgICAgY29uc3QgZXhpc3RpbmdBc3NpZ25tZW50ID0gYXdhaXQgcHJpc21hLnVzZXJHcm91cC5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgdXNlcklkX2dyb3VwSWQ6IHtcclxuICAgICAgICAgICAgdXNlcklkLFxyXG4gICAgICAgICAgICBncm91cElkXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChleGlzdGluZ0Fzc2lnbm1lbnQpIHtcclxuICAgICAgICB0aHJvdyBFcnJvcnMuQ09ORkxJQ1QoJ1VzZXIgaXMgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIGdyb3VwJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFzc2lnbiB1c2VyIHRvIGdyb3VwXHJcbiAgICAgIGF3YWl0IHByaXNtYS51c2VyR3JvdXAuY3JlYXRlKHtcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICBncm91cElkXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGxvZ2dlci5pbmZvKGBBc3NpZ25lZCB1c2VyICR7dXNlcklkfSB0byBncm91cCAke2dyb3VwSWR9YCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGFzc2lnbmluZyB1c2VyICR7dXNlcklkfSB0byBncm91cCAke2dyb3VwSWR9OmAsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyByZW1vdmVVc2VyRnJvbUdyb3VwKHVzZXJJZDogc3RyaW5nLCBncm91cElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHByaXNtYS51c2VyR3JvdXAuZGVsZXRlKHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgdXNlcklkX2dyb3VwSWQ6IHtcclxuICAgICAgICAgICAgdXNlcklkLFxyXG4gICAgICAgICAgICBncm91cElkXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGxvZ2dlci5pbmZvKGBSZW1vdmVkIHVzZXIgJHt1c2VySWR9IGZyb20gZ3JvdXAgJHtncm91cElkfWApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciByZW1vdmluZyB1c2VyICR7dXNlcklkfSBmcm9tIGdyb3VwICR7Z3JvdXBJZH06YCwgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdlbmVyYXRlUVJDb2RlKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZTogeyBpZDogdXNlcklkIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICB0aHJvdyBFcnJvcnMuTk9UX0ZPVU5EKCdVc2VyJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEdlbmVyYXRlIHVuaXF1ZSBRUiBjb2RlXHJcbiAgICAgIGNvbnN0IHFyQ29kZSA9IGBNUk0zNjAtJHt1c2VySWR9LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSB1c2VyIHdpdGggUVIgY29kZVxyXG4gICAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcclxuICAgICAgICBkYXRhOiB7IHFyQ29kZSB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgbG9nZ2VyLmluZm8oYEdlbmVyYXRlZCBRUiBjb2RlIGZvciB1c2VyICR7dXNlcklkfWApO1xyXG4gICAgICByZXR1cm4gcXJDb2RlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBnZW5lcmF0aW5nIFFSIGNvZGUgZm9yIHVzZXIgJHt1c2VySWR9OmAsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJsb2dnZXIiLCJFcnJvcnMiLCJVc2VyTWFuYWdlciIsImNyZWF0ZVVzZXIiLCJkYXRhIiwiZXhpc3RpbmdVc2VyIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImVtYWlsIiwiQ09ORkxJQ1QiLCJjcmVhdGUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImRpc3BsYXlOYW1lIiwicGFpZFN0YXR1cyIsInJvbGUiLCJpbmZvIiwiaXNBY3RpdmUiLCJlcnJvciIsImdldFVzZXJCeUlkIiwiaWQiLCJpbmNsdWRlIiwidXNlckdyb3VwcyIsImdyb3VwIiwidXNlclRlYW1zIiwidGVhbSIsIk5PVF9GT1VORCIsImF1dGhlbnRpa0lkIiwiZ2V0VXNlckJ5RW1haWwiLCJ1cGRhdGVVc2VyIiwidXBkYXRlRGF0YSIsInVuZGVmaW5lZCIsImlzUGFpZCIsInVwZGF0ZSIsIk1lbWJlclBhaWRTdGF0dXNTZXJ2aWNlIiwibWVtYmVyUGFpZFN0YXR1c1NlcnZpY2UiLCJ1cGRhdGVNZW1iZXJQYWlkU3RhdHVzIiwidXNlcklkIiwidXNlckVtYWlsIiwiYXV0aGVudGlrR3JvdXBzIiwiZ3JvdXBzIiwiZGVsZXRlVXNlciIsImRlbGV0ZSIsImdldFVzZXJzIiwicGFyYW1zIiwicGFnZSIsImxpbWl0Iiwic2VhcmNoIiwiZ3JvdXBJZCIsInRlYW1JZCIsInNvcnRCeSIsInNvcnRPcmRlciIsInNraXAiLCJPUiIsImNvbnRhaW5zIiwibW9kZSIsInNvbWUiLCJ0b3RhbCIsImNvdW50Iiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsInVzZXJzIiwiZmluZE1hbnkiLCJ0YWtlIiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIiwidXNlcnNXaXRoQWN0aXZlU3RhdHVzIiwibWFwIiwic3VjY2VzcyIsInBhZ2luYXRpb24iLCJhc3NpZ25Vc2VyVG9Hcm91cCIsIlByb21pc2UiLCJhbGwiLCJleGlzdGluZ0Fzc2lnbm1lbnQiLCJ1c2VyR3JvdXAiLCJ1c2VySWRfZ3JvdXBJZCIsInJlbW92ZVVzZXJGcm9tR3JvdXAiLCJnZW5lcmF0ZVFSQ29kZSIsInFyQ29kZSIsIkRhdGUiLCJub3ciLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/managers/userManager.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/authMiddleware.ts":
/*!******************************************!*\
  !*** ./src/middleware/authMiddleware.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/logger */ \"(api)/./src/utils/logger.ts\");\n/* harmony import */ var _utils_roleUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/roleUtils */ \"(api)/./src/utils/roleUtils.ts\");\n\n\n// Helper function to determine effective role based on OIDC groups\nfunction getEffectiveRole(userRole, authentikGroups) {\n    // If user has tech-team group, elevate to admin regardless of base role\n    if (authentikGroups.includes(\"tech-team\")) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"User has tech-team group, elevating to admin role\", {\n            originalRole: userRole,\n            authentikGroups\n        });\n        return \"ADMIN\";\n    }\n    // Get the effective system role, ensuring it's not a class rank role\n    return (0,_utils_roleUtils__WEBPACK_IMPORTED_MODULE_1__.getEffectiveSystemRole)(userRole);\n}\nfunction withAuth(handler) {\n    return async (req, res)=>{\n        try {\n            // Get the authorization header\n            const authHeader = req.headers.authorization;\n            if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"Missing or invalid authorization header\"\n                });\n            }\n            // Extract the token\n            const token = authHeader.substring(7);\n            // Verify the JWT token\n            const decoded = verifyJWT(token);\n            if (!decoded || !decoded.id) {\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"Invalid token\"\n                });\n            }\n            // Get user from database\n            const user = await getUserById(decoded.id);\n            if (!user) {\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"User not found\"\n                });\n            }\n            // Determine effective role based on OIDC groups and system role\n            const effectiveRole = getEffectiveRole(user.role, user.authentikGroups || []);\n            // Add user info to request\n            req.user = {\n                id: user.id,\n                email: user.email,\n                firstName: user.firstName,\n                lastName: user.lastName,\n                role: effectiveRole,\n                groups: user.authentikGroups || []\n            };\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"User authenticated successfully\", {\n                userId: user.id,\n                email: user.email,\n                originalRole: user.role,\n                effectiveRole,\n                authentikGroups: user.authentikGroups\n            });\n            // Call the original handler\n            await handler(req, res);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Authentication error:\", error);\n            return res.status(401).json({\n                error: \"Unauthorized\",\n                message: \"Authentication failed\"\n            });\n        }\n    };\n}\n// Helper function to verify JWT token\nfunction verifyJWT(token) {\n    try {\n        const jwt = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n        const secret = process.env.JWT_SECRET;\n        if (!secret) {\n            throw new Error(\"JWT_SECRET not configured\");\n        }\n        return jwt.verify(token, secret);\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"JWT verification failed:\", error);\n        return null;\n    }\n}\n// Helper function to get user by ID\nasync function getUserById(userId) {\n    try {\n        const { prisma } = __webpack_require__(/*! @/models/prismaClient */ \"(api)/./src/models/prismaClient.ts\");\n        const user = await prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            select: {\n                id: true,\n                email: true,\n                firstName: true,\n                lastName: true,\n                role: true,\n                authentikId: true\n            }\n        });\n        if (!user) {\n            return null;\n        }\n        // For now, we'll assume authentikGroups is empty\n        // This would need to be populated from the OIDC provider\n        user.authentikGroups = [];\n        return user;\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Error getting user by ID:\", error);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TztJQUNUO0FBQ0Y7QUFFQSxvQ0FBb0M7QUFDcEMsZUFBZVEsWUFBWU8sTUFBYztJQUN2QyxJQUFJO1FBQ0YsTUFBTSxFQUFFUyxNQUFNLEVBQUUsR0FBR1AsbUJBQU9BLENBQUM7UUFFM0IsTUFBTVYsT0FBTyxNQUFNaUIsT0FBT2pCLElBQUksQ0FBQ2tCLFVBQVUsQ0FBQztZQUN4Q0MsT0FBTztnQkFBRXBCLElBQUlTO1lBQU87WUFDcEJZLFFBQVE7Z0JBQ05yQixJQUFJO2dCQUNKSyxPQUFPO2dCQUNQQyxXQUFXO2dCQUNYQyxVQUFVO2dCQUNWSCxNQUFNO2dCQUNOa0IsYUFBYTtZQUNmO1FBQ0Y7UUFFQSxJQUFJLENBQUNyQixNQUFNO1lBQ1QsT0FBTztRQUNUO1FBRUEsaURBQWlEO1FBQ2pELHlEQUF5RDtRQUN6REEsS0FBS3JCLGVBQWUsR0FBRyxFQUFFO1FBRXpCLE9BQU9xQjtJQUNULEVBQUUsT0FBT1AsT0FBTztRQUNkbEIsaURBQU1BLENBQUNrQixLQUFLLENBQUMsNkJBQTZCQTtRQUMxQyxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21ybTM2MC1iYWNrZW5kLy4vc3JjL21pZGRsZXdhcmUvYXV0aE1pZGRsZXdhcmUudHM/Mjg0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL3V0aWxzL2xvZ2dlcic7XG5pbXBvcnQgeyBnZXRFZmZlY3RpdmVTeXN0ZW1Sb2xlIH0gZnJvbSAnQC91dGlscy9yb2xlVXRpbHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhlbnRpY2F0ZWRSZXF1ZXN0IGV4dGVuZHMgTmV4dEFwaVJlcXVlc3Qge1xuICB1c2VyOiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBlbWFpbDogc3RyaW5nO1xuICAgIGZpcnN0TmFtZTogc3RyaW5nO1xuICAgIGxhc3ROYW1lOiBzdHJpbmc7XG4gICAgcm9sZTogc3RyaW5nO1xuICAgIGdyb3Vwczogc3RyaW5nW107XG4gIH07XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZWZmZWN0aXZlIHJvbGUgYmFzZWQgb24gT0lEQyBncm91cHNcbmZ1bmN0aW9uIGdldEVmZmVjdGl2ZVJvbGUodXNlclJvbGU6IHN0cmluZywgYXV0aGVudGlrR3JvdXBzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gIC8vIElmIHVzZXIgaGFzIHRlY2gtdGVhbSBncm91cCwgZWxldmF0ZSB0byBhZG1pbiByZWdhcmRsZXNzIG9mIGJhc2Ugcm9sZVxuICBpZiAoYXV0aGVudGlrR3JvdXBzLmluY2x1ZGVzKCd0ZWNoLXRlYW0nKSkge1xuICAgIGxvZ2dlci5pbmZvKCdVc2VyIGhhcyB0ZWNoLXRlYW0gZ3JvdXAsIGVsZXZhdGluZyB0byBhZG1pbiByb2xlJywge1xuICAgICAgb3JpZ2luYWxSb2xlOiB1c2VyUm9sZSxcbiAgICAgIGF1dGhlbnRpa0dyb3Vwc1xuICAgIH0pO1xuICAgIHJldHVybiAnQURNSU4nO1xuICB9XG4gIFxuICAvLyBHZXQgdGhlIGVmZmVjdGl2ZSBzeXN0ZW0gcm9sZSwgZW5zdXJpbmcgaXQncyBub3QgYSBjbGFzcyByYW5rIHJvbGVcbiAgcmV0dXJuIGdldEVmZmVjdGl2ZVN5c3RlbVJvbGUodXNlclJvbGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2l0aEF1dGgoaGFuZGxlcjogKHJlcTogQXV0aGVudGljYXRlZFJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiBQcm9taXNlPHZvaWQ+KSB7XG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IHRoZSBhdXRob3JpemF0aW9uIGhlYWRlclxuICAgICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb247XG4gICAgICBcbiAgICAgIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgXG4gICAgICAgICAgZXJyb3I6ICdVbmF1dGhvcml6ZWQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdNaXNzaW5nIG9yIGludmFsaWQgYXV0aG9yaXphdGlvbiBoZWFkZXInIFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gRXh0cmFjdCB0aGUgdG9rZW5cbiAgICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zdWJzdHJpbmcoNyk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSB0aGUgSldUIHRva2VuXG4gICAgICBjb25zdCBkZWNvZGVkID0gdmVyaWZ5SldUKHRva2VuKTtcbiAgICAgIFxuICAgICAgaWYgKCFkZWNvZGVkIHx8ICFkZWNvZGVkLmlkKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IFxuICAgICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCB0b2tlbicgXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdXNlciBmcm9tIGRhdGFiYXNlXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlckJ5SWQoZGVjb2RlZC5pZCk7XG4gICAgICBcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBcbiAgICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIERldGVybWluZSBlZmZlY3RpdmUgcm9sZSBiYXNlZCBvbiBPSURDIGdyb3VwcyBhbmQgc3lzdGVtIHJvbGVcbiAgICAgIGNvbnN0IGVmZmVjdGl2ZVJvbGUgPSBnZXRFZmZlY3RpdmVSb2xlKHVzZXIucm9sZSwgdXNlci5hdXRoZW50aWtHcm91cHMgfHwgW10pO1xuXG4gICAgICAvLyBBZGQgdXNlciBpbmZvIHRvIHJlcXVlc3RcbiAgICAgIChyZXEgYXMgQXV0aGVudGljYXRlZFJlcXVlc3QpLnVzZXIgPSB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcbiAgICAgICAgbGFzdE5hbWU6IHVzZXIubGFzdE5hbWUsXG4gICAgICAgIHJvbGU6IGVmZmVjdGl2ZVJvbGUsXG4gICAgICAgIGdyb3VwczogdXNlci5hdXRoZW50aWtHcm91cHMgfHwgW11cbiAgICAgIH07XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdVc2VyIGF1dGhlbnRpY2F0ZWQgc3VjY2Vzc2Z1bGx5Jywge1xuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICBvcmlnaW5hbFJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgZWZmZWN0aXZlUm9sZSxcbiAgICAgICAgYXV0aGVudGlrR3JvdXBzOiB1c2VyLmF1dGhlbnRpa0dyb3Vwc1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENhbGwgdGhlIG9yaWdpbmFsIGhhbmRsZXJcbiAgICAgIGF3YWl0IGhhbmRsZXIocmVxIGFzIEF1dGhlbnRpY2F0ZWRSZXF1ZXN0LCByZXMpO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignQXV0aGVudGljYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgXG4gICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcbiAgICAgICAgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZCcgXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byB2ZXJpZnkgSldUIHRva2VuXG5mdW5jdGlvbiB2ZXJpZnlKV1QodG9rZW46IHN0cmluZyk6IGFueSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG4gICAgY29uc3Qgc2VjcmV0ID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVDtcbiAgICBcbiAgICBpZiAoIXNlY3JldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdKV1RfU0VDUkVUIG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBqd3QudmVyaWZ5KHRva2VuLCBzZWNyZXQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignSldUIHZlcmlmaWNhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgdXNlciBieSBJRFxuYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5SWQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcHJpc21hIH0gPSByZXF1aXJlKCdAL21vZGVscy9wcmlzbWFDbGllbnQnKTtcbiAgICBcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICBzZWxlY3Q6IHtcbiAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICBhdXRoZW50aWtJZDogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBGb3Igbm93LCB3ZSdsbCBhc3N1bWUgYXV0aGVudGlrR3JvdXBzIGlzIGVtcHR5XG4gICAgLy8gVGhpcyB3b3VsZCBuZWVkIHRvIGJlIHBvcHVsYXRlZCBmcm9tIHRoZSBPSURDIHByb3ZpZGVyXG4gICAgdXNlci5hdXRoZW50aWtHcm91cHMgPSBbXTtcblxuICAgIHJldHVybiB1c2VyO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGJ5IElEOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImxvZ2dlciIsImdldEVmZmVjdGl2ZVN5c3RlbVJvbGUiLCJnZXRFZmZlY3RpdmVSb2xlIiwidXNlclJvbGUiLCJhdXRoZW50aWtHcm91cHMiLCJpbmNsdWRlcyIsImluZm8iLCJvcmlnaW5hbFJvbGUiLCJ3aXRoQXV0aCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGFydHNXaXRoIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwibWVzc2FnZSIsInRva2VuIiwic3Vic3RyaW5nIiwiZGVjb2RlZCIsInZlcmlmeUpXVCIsImlkIiwidXNlciIsImdldFVzZXJCeUlkIiwiZWZmZWN0aXZlUm9sZSIsInJvbGUiLCJlbWFpbCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZ3JvdXBzIiwidXNlcklkIiwiand0IiwicmVxdWlyZSIsInNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiRXJyb3IiLCJ2ZXJpZnkiLCJwcmlzbWEiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJzZWxlY3QiLCJhdXRoZW50aWtJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/middleware/authMiddleware.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/corsMiddleware.ts":
/*!******************************************!*\
  !*** ./src/middleware/corsMiddleware.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withCORS: () => (/* binding */ withCORS)\n/* harmony export */ });\nfunction withCORS(handler) {\n    return async (req, res)=>{\n        // Set CORS headers\n        const allowedOrigin = process.env.FRONTEND_URL || \"http://localhost:3011\";\n        res.setHeader(\"Access-Control-Allow-Credentials\", \"true\");\n        res.setHeader(\"Access-Control-Allow-Origin\", allowedOrigin);\n        res.setHeader(\"Access-Control-Allow-Methods\", \"GET,OPTIONS,PATCH,DELETE,POST,PUT\");\n        res.setHeader(\"Access-Control-Allow-Headers\", \"X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Authorization\");\n        // Handle preflight request\n        if (req.method === \"OPTIONS\") {\n            res.status(200).end();\n            return;\n        }\n        // Call the original handler\n        await handler(req, res);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbWlkZGxld2FyZS9jb3JzTWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sU0FBU0EsU0FBU0MsT0FBcUU7SUFDNUYsT0FBTyxPQUFPQyxLQUFxQkM7UUFDakMsbUJBQW1CO1FBQ25CLE1BQU1DLGdCQUFnQkMsUUFBUUMsR0FBRyxDQUFDQyxZQUFZLElBQUk7UUFFbERKLElBQUlLLFNBQVMsQ0FBQyxvQ0FBb0M7UUFDbERMLElBQUlLLFNBQVMsQ0FBQywrQkFBK0JKO1FBQzdDRCxJQUFJSyxTQUFTLENBQUMsZ0NBQWdDO1FBQzlDTCxJQUFJSyxTQUFTLENBQUMsZ0NBQWdDO1FBRTlDLDJCQUEyQjtRQUMzQixJQUFJTixJQUFJTyxNQUFNLEtBQUssV0FBVztZQUM1Qk4sSUFBSU8sTUFBTSxDQUFDLEtBQUtDLEdBQUc7WUFDbkI7UUFDRjtRQUVBLDRCQUE0QjtRQUM1QixNQUFNVixRQUFRQyxLQUFLQztJQUNyQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvLi9zcmMvbWlkZGxld2FyZS9jb3JzTWlkZGxld2FyZS50cz8zYjljIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhDT1JTKGhhbmRsZXI6IChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4gUHJvbWlzZTx2b2lkPikge1xuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XG4gICAgLy8gU2V0IENPUlMgaGVhZGVyc1xuICAgIGNvbnN0IGFsbG93ZWRPcmlnaW4gPSBwcm9jZXNzLmVudi5GUk9OVEVORF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAxMSc7XG4gICAgXG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsIGFsbG93ZWRPcmlnaW4pO1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULE9QVElPTlMsUEFUQ0gsREVMRVRFLFBPU1QsUFVUJyk7XG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdYLUNTUkYtVG9rZW4sIFgtUmVxdWVzdGVkLVdpdGgsIEFjY2VwdCwgQWNjZXB0LVZlcnNpb24sIENvbnRlbnQtTGVuZ3RoLCBDb250ZW50LU1ENSwgQ29udGVudC1UeXBlLCBEYXRlLCBYLUFwaS1WZXJzaW9uLCBBdXRob3JpemF0aW9uJyk7XG5cbiAgICAvLyBIYW5kbGUgcHJlZmxpZ2h0IHJlcXVlc3RcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuZW5kKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgaGFuZGxlclxuICAgIGF3YWl0IGhhbmRsZXIocmVxLCByZXMpO1xuICB9O1xufVxuIl0sIm5hbWVzIjpbIndpdGhDT1JTIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImFsbG93ZWRPcmlnaW4iLCJwcm9jZXNzIiwiZW52IiwiRlJPTlRFTkRfVVJMIiwic2V0SGVhZGVyIiwibWV0aG9kIiwic3RhdHVzIiwiZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/middleware/corsMiddleware.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/errorHandler.ts":
/*!****************************************!*\
  !*** ./src/middleware/errorHandler.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Errors: () => (/* binding */ Errors),\n/* harmony export */   createError: () => (/* binding */ createError),\n/* harmony export */   handleApiError: () => (/* binding */ handleApiError),\n/* harmony export */   withErrorHandler: () => (/* binding */ withErrorHandler)\n/* harmony export */ });\nfunction createError(message, statusCode = 500, code) {\n    const error = new Error(message);\n    error.statusCode = statusCode;\n    error.code = code;\n    return error;\n}\nfunction handleApiError(error, req, res) {\n    console.error(\"API Error:\", {\n        error,\n        url: req.url,\n        method: req.method,\n        timestamp: new Date().toISOString()\n    });\n    if (error instanceof Error) {\n        const apiError = error;\n        if (apiError.statusCode) {\n            return res.status(apiError.statusCode).json({\n                success: false,\n                error: apiError.message,\n                code: apiError.code\n            });\n        }\n    }\n    // Default error response\n    return res.status(500).json({\n        success: false,\n        error: \"Internal server error\"\n    });\n}\nfunction withErrorHandler(handler) {\n    return async (req, res)=>{\n        try {\n            await handler(req, res);\n        } catch (error) {\n            handleApiError(error, req, res);\n        }\n    };\n}\n// Common error types\nconst Errors = {\n    NOT_FOUND: (resource)=>createError(`${resource} not found`, 404, \"NOT_FOUND\"),\n    UNAUTHORIZED: ()=>createError(\"Unauthorized\", 401, \"UNAUTHORIZED\"),\n    FORBIDDEN: ()=>createError(\"Forbidden\", 403, \"FORBIDDEN\"),\n    BAD_REQUEST: (message)=>createError(message, 400, \"BAD_REQUEST\"),\n    VALIDATION_ERROR: (message)=>createError(message, 400, \"VALIDATION_ERROR\"),\n    CONFLICT: (message)=>createError(message, 409, \"CONFLICT\"),\n    INTERNAL_ERROR: ()=>createError(\"Internal server error\", 500, \"INTERNAL_ERROR\")\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbWlkZGxld2FyZS9lcnJvckhhbmRsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQU9PLFNBQVNBLFlBQVlDLE9BQWUsRUFBRUMsYUFBcUIsR0FBRyxFQUFFQyxJQUFhO0lBQ2xGLE1BQU1DLFFBQVEsSUFBSUMsTUFBTUo7SUFDeEJHLE1BQU1GLFVBQVUsR0FBR0E7SUFDbkJFLE1BQU1ELElBQUksR0FBR0E7SUFDYixPQUFPQztBQUNUO0FBRU8sU0FBU0UsZUFDZEYsS0FBYyxFQUNkRyxHQUFtQixFQUNuQkMsR0FBb0I7SUFFcEJDLFFBQVFMLEtBQUssQ0FBQyxjQUFjO1FBQzFCQTtRQUNBTSxLQUFLSCxJQUFJRyxHQUFHO1FBQ1pDLFFBQVFKLElBQUlJLE1BQU07UUFDbEJDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztJQUNuQztJQUVBLElBQUlWLGlCQUFpQkMsT0FBTztRQUMxQixNQUFNVSxXQUFXWDtRQUVqQixJQUFJVyxTQUFTYixVQUFVLEVBQUU7WUFDdkIsT0FBT00sSUFBSVEsTUFBTSxDQUFDRCxTQUFTYixVQUFVLEVBQUVlLElBQUksQ0FBQztnQkFDMUNDLFNBQVM7Z0JBQ1RkLE9BQU9XLFNBQVNkLE9BQU87Z0JBQ3ZCRSxNQUFNWSxTQUFTWixJQUFJO1lBQ3JCO1FBQ0Y7SUFDRjtJQUVBLHlCQUF5QjtJQUN6QixPQUFPSyxJQUFJUSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1FBQzFCQyxTQUFTO1FBQ1RkLE9BQU87SUFDVDtBQUNGO0FBRU8sU0FBU2UsaUJBQ2RDLE9BQXFFO0lBRXJFLE9BQU8sT0FBT2IsS0FBcUJDO1FBQ2pDLElBQUk7WUFDRixNQUFNWSxRQUFRYixLQUFLQztRQUNyQixFQUFFLE9BQU9KLE9BQU87WUFDZEUsZUFBZUYsT0FBT0csS0FBS0M7UUFDN0I7SUFDRjtBQUNGO0FBRUEscUJBQXFCO0FBQ2QsTUFBTWEsU0FBUztJQUNwQkMsV0FBVyxDQUFDQyxXQUFxQnZCLFlBQVksQ0FBQyxFQUFFdUIsU0FBUyxVQUFVLENBQUMsRUFBRSxLQUFLO0lBQzNFQyxjQUFjLElBQU14QixZQUFZLGdCQUFnQixLQUFLO0lBQ3JEeUIsV0FBVyxJQUFNekIsWUFBWSxhQUFhLEtBQUs7SUFDL0MwQixhQUFhLENBQUN6QixVQUFvQkQsWUFBWUMsU0FBUyxLQUFLO0lBQzVEMEIsa0JBQWtCLENBQUMxQixVQUFvQkQsWUFBWUMsU0FBUyxLQUFLO0lBQ2pFMkIsVUFBVSxDQUFDM0IsVUFBb0JELFlBQVlDLFNBQVMsS0FBSztJQUN6RDRCLGdCQUFnQixJQUFNN0IsWUFBWSx5QkFBeUIsS0FBSztBQUNsRSxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvLi9zcmMvbWlkZGxld2FyZS9lcnJvckhhbmRsZXIudHM/N2E4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFwaUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gIHN0YXR1c0NvZGU/OiBudW1iZXI7XHJcbiAgY29kZT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1lc3NhZ2U6IHN0cmluZywgc3RhdHVzQ29kZTogbnVtYmVyID0gNTAwLCBjb2RlPzogc3RyaW5nKTogQXBpRXJyb3Ige1xyXG4gIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpIGFzIEFwaUVycm9yO1xyXG4gIGVycm9yLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xyXG4gIGVycm9yLmNvZGUgPSBjb2RlO1xyXG4gIHJldHVybiBlcnJvcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUFwaUVycm9yKFxyXG4gIGVycm9yOiB1bmtub3duLFxyXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXHJcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2VcclxuKSB7XHJcbiAgY29uc29sZS5lcnJvcignQVBJIEVycm9yOicsIHtcclxuICAgIGVycm9yLFxyXG4gICAgdXJsOiByZXEudXJsLFxyXG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxyXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICB9KTtcclxuXHJcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgIGNvbnN0IGFwaUVycm9yID0gZXJyb3IgYXMgQXBpRXJyb3I7XHJcbiAgICBcclxuICAgIGlmIChhcGlFcnJvci5zdGF0dXNDb2RlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKGFwaUVycm9yLnN0YXR1c0NvZGUpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBhcGlFcnJvci5tZXNzYWdlLFxyXG4gICAgICAgIGNvZGU6IGFwaUVycm9yLmNvZGVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBEZWZhdWx0IGVycm9yIHJlc3BvbnNlXHJcbiAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoRXJyb3JIYW5kbGVyKFxyXG4gIGhhbmRsZXI6IChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4gUHJvbWlzZTx2b2lkPlxyXG4pIHtcclxuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGhhbmRsZUFwaUVycm9yKGVycm9yLCByZXEsIHJlcyk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5cclxuLy8gQ29tbW9uIGVycm9yIHR5cGVzXHJcbmV4cG9ydCBjb25zdCBFcnJvcnMgPSB7XHJcbiAgTk9UX0ZPVU5EOiAocmVzb3VyY2U6IHN0cmluZykgPT4gY3JlYXRlRXJyb3IoYCR7cmVzb3VyY2V9IG5vdCBmb3VuZGAsIDQwNCwgJ05PVF9GT1VORCcpLFxyXG4gIFVOQVVUSE9SSVpFRDogKCkgPT4gY3JlYXRlRXJyb3IoJ1VuYXV0aG9yaXplZCcsIDQwMSwgJ1VOQVVUSE9SSVpFRCcpLFxyXG4gIEZPUkJJRERFTjogKCkgPT4gY3JlYXRlRXJyb3IoJ0ZvcmJpZGRlbicsIDQwMywgJ0ZPUkJJRERFTicpLFxyXG4gIEJBRF9SRVFVRVNUOiAobWVzc2FnZTogc3RyaW5nKSA9PiBjcmVhdGVFcnJvcihtZXNzYWdlLCA0MDAsICdCQURfUkVRVUVTVCcpLFxyXG4gIFZBTElEQVRJT05fRVJST1I6IChtZXNzYWdlOiBzdHJpbmcpID0+IGNyZWF0ZUVycm9yKG1lc3NhZ2UsIDQwMCwgJ1ZBTElEQVRJT05fRVJST1InKSxcclxuICBDT05GTElDVDogKG1lc3NhZ2U6IHN0cmluZykgPT4gY3JlYXRlRXJyb3IobWVzc2FnZSwgNDA5LCAnQ09ORkxJQ1QnKSxcclxuICBJTlRFUk5BTF9FUlJPUjogKCkgPT4gY3JlYXRlRXJyb3IoJ0ludGVybmFsIHNlcnZlciBlcnJvcicsIDUwMCwgJ0lOVEVSTkFMX0VSUk9SJylcclxufTtcclxuIl0sIm5hbWVzIjpbImNyZWF0ZUVycm9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJjb2RlIiwiZXJyb3IiLCJFcnJvciIsImhhbmRsZUFwaUVycm9yIiwicmVxIiwicmVzIiwiY29uc29sZSIsInVybCIsIm1ldGhvZCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImFwaUVycm9yIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJ3aXRoRXJyb3JIYW5kbGVyIiwiaGFuZGxlciIsIkVycm9ycyIsIk5PVF9GT1VORCIsInJlc291cmNlIiwiVU5BVVRIT1JJWkVEIiwiRk9SQklEREVOIiwiQkFEX1JFUVVFU1QiLCJWQUxJREFUSU9OX0VSUk9SIiwiQ09ORkxJQ1QiLCJJTlRFUk5BTF9FUlJPUiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/middleware/errorHandler.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/permissionMiddleware.ts":
/*!************************************************!*\
  !*** ./src/middleware/permissionMiddleware.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withPermissions: () => (/* binding */ withPermissions)\n/* harmony export */ });\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/logger */ \"(api)/./src/utils/logger.ts\");\n/* harmony import */ var _utils_roleUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/roleUtils */ \"(api)/./src/utils/roleUtils.ts\");\n\n\nfunction withPermissions(handler, requiredPermissions) {\n    return async (req, res)=>{\n        try {\n            // Get the required permissions\n            const permissions = typeof requiredPermissions === \"function\" ? requiredPermissions(req) : requiredPermissions;\n            // Get user from request (should be set by auth middleware)\n            const user = req.user;\n            if (!user) {\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"User not authenticated\"\n                });\n            }\n            // Check permissions\n            const hasPermission = await checkPermissions(user, permissions);\n            if (!hasPermission) {\n                return res.status(403).json({\n                    error: \"Forbidden\",\n                    message: \"Permission check failed\"\n                });\n            }\n            // Call the handler\n            await handler(req, res);\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Permission middleware error:\", error);\n            return res.status(500).json({\n                error: \"Internal server error\",\n                message: \"Permission check failed\"\n            });\n        }\n    };\n}\nasync function checkPermissions(user, requiredPermissions) {\n    // For now, implement a simple role-based permission system\n    // This can be enhanced later with a more sophisticated permission system\n    const rolePermissions = {\n        \"ADMIN\": [\n            \"users:read\",\n            \"users:create\",\n            \"users:update\",\n            \"users:delete\",\n            \"groups:read\",\n            \"groups:create\",\n            \"groups:update\",\n            \"groups:delete\",\n            \"events:read\",\n            \"events:create\",\n            \"events:update\",\n            \"events:delete\",\n            \"teams:read\",\n            \"teams:write\",\n            \"teams:create\",\n            \"teams:update\",\n            \"teams:delete\",\n            \"tasks:read\",\n            \"tasks:create\",\n            \"tasks:update\",\n            \"tasks:delete\",\n            \"tasks:enqueue\"\n        ],\n        \"EXEC_BOARD\": [\n            \"users:read\",\n            \"users:create\",\n            \"users:update\",\n            \"groups:read\",\n            \"groups:create\",\n            \"groups:update\",\n            \"events:read\",\n            \"events:create\",\n            \"events:update\",\n            \"teams:read\",\n            \"teams:write\",\n            \"teams:create\",\n            \"teams:update\",\n            \"tasks:read\",\n            \"tasks:create\",\n            \"tasks:update\"\n        ],\n        \"MEMBER\": [\n            \"users:read\",\n            \"groups:read\",\n            \"events:read\",\n            \"teams:read\",\n            \"tasks:read\"\n        ]\n    };\n    // Check if user has tech-team group in authentikGroups (OIDC groups)\n    // If they do, give them admin permissions regardless of their role\n    let effectiveRole = (0,_utils_roleUtils__WEBPACK_IMPORTED_MODULE_1__.getEffectiveSystemRole)(user.role);\n    if (user.authentikGroups && Array.isArray(user.authentikGroups)) {\n        if (user.authentikGroups.includes(\"tech-team\")) {\n            effectiveRole = \"ADMIN\";\n            _utils_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"User has tech-team group, elevating to admin permissions\", {\n                userId: user.id,\n                originalRole: user.role,\n                effectiveRole,\n                authentikGroups: user.authentikGroups\n            });\n        }\n    }\n    const userPermissions = rolePermissions[effectiveRole] || [];\n    // Check if user has all required permissions\n    return requiredPermissions.every((permission)=>userPermissions.includes(permission));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbWlkZGxld2FyZS9wZXJtaXNzaW9uTWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDd0M7QUFDbUI7QUFhcEQsU0FBU0UsZ0JBQ2RDLE9BQXdFLEVBQ3hFQyxtQkFBbUU7SUFFbkUsT0FBTyxPQUFPQyxLQUFxQkM7UUFDakMsSUFBSTtZQUNGLCtCQUErQjtZQUMvQixNQUFNQyxjQUFjLE9BQU9ILHdCQUF3QixhQUMvQ0Esb0JBQW9CQyxPQUNwQkQ7WUFFSiwyREFBMkQ7WUFDM0QsTUFBTUksT0FBTyxJQUFhQSxJQUFJO1lBRTlCLElBQUksQ0FBQ0EsTUFBTTtnQkFDVCxPQUFPRixJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUMxQkMsT0FBTztvQkFDUEMsU0FBUztnQkFDWDtZQUNGO1lBRUEsb0JBQW9CO1lBQ3BCLE1BQU1DLGdCQUFnQixNQUFNQyxpQkFBaUJOLE1BQU1EO1lBRW5ELElBQUksQ0FBQ00sZUFBZTtnQkFDbEIsT0FBT1AsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFDMUJDLE9BQU87b0JBQ1BDLFNBQVM7Z0JBQ1g7WUFDRjtZQUVBLG1CQUFtQjtZQUNuQixNQUFNVCxRQUFRRSxLQUEwQkM7UUFFMUMsRUFBRSxPQUFPSyxPQUFPO1lBQ2RYLGlEQUFNQSxDQUFDVyxLQUFLLENBQUMsZ0NBQWdDQTtZQUM3QyxPQUFPTCxJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUMxQkMsT0FBTztnQkFDUEMsU0FBUztZQUNYO1FBQ0Y7SUFDRjtBQUNGO0FBRUEsZUFBZUUsaUJBQWlCTixJQUFTLEVBQUVKLG1CQUE2QjtJQUN0RSwyREFBMkQ7SUFDM0QseUVBQXlFO0lBRXpFLE1BQU1XLGtCQUE0QztRQUNoRCxTQUFTO1lBQ1A7WUFBYztZQUFnQjtZQUFnQjtZQUM5QztZQUFlO1lBQWlCO1lBQWlCO1lBQ2pEO1lBQWU7WUFBaUI7WUFBaUI7WUFDakQ7WUFBYztZQUFlO1lBQWdCO1lBQWdCO1lBQzdEO1lBQWM7WUFBZ0I7WUFBZ0I7WUFBZ0I7U0FDL0Q7UUFDRCxjQUFjO1lBQ1o7WUFBYztZQUFnQjtZQUM5QjtZQUFlO1lBQWlCO1lBQ2hDO1lBQWU7WUFBaUI7WUFDaEM7WUFBYztZQUFlO1lBQWdCO1lBQzdDO1lBQWM7WUFBZ0I7U0FDL0I7UUFDRCxVQUFVO1lBQ1I7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO0lBQ0g7SUFFQSxxRUFBcUU7SUFDckUsbUVBQW1FO0lBQ25FLElBQUlDLGdCQUFnQmYsd0VBQXNCQSxDQUFDTyxLQUFLUyxJQUFJO0lBQ3BELElBQUlULEtBQUtVLGVBQWUsSUFBSUMsTUFBTUMsT0FBTyxDQUFDWixLQUFLVSxlQUFlLEdBQUc7UUFDL0QsSUFBSVYsS0FBS1UsZUFBZSxDQUFDRyxRQUFRLENBQUMsY0FBYztZQUM5Q0wsZ0JBQWdCO1lBQ2hCaEIsaURBQU1BLENBQUNzQixJQUFJLENBQUMsNERBQTREO2dCQUN0RUMsUUFBUWYsS0FBS2dCLEVBQUU7Z0JBQ2ZDLGNBQWNqQixLQUFLUyxJQUFJO2dCQUN2QkQ7Z0JBQ0FFLGlCQUFpQlYsS0FBS1UsZUFBZTtZQUN2QztRQUNGO0lBQ0Y7SUFFQSxNQUFNUSxrQkFBa0JYLGVBQWUsQ0FBQ0MsY0FBYyxJQUFJLEVBQUU7SUFFNUQsNkNBQTZDO0lBQzdDLE9BQU9aLG9CQUFvQnVCLEtBQUssQ0FBQ0MsQ0FBQUEsYUFBY0YsZ0JBQWdCTCxRQUFRLENBQUNPO0FBQzFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXJtMzYwLWJhY2tlbmQvLi9zcmMvbWlkZGxld2FyZS9wZXJtaXNzaW9uTWlkZGxld2FyZS50cz9mODE0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvbG9nZ2VyJztcbmltcG9ydCB7IGdldEVmZmVjdGl2ZVN5c3RlbVJvbGUgfSBmcm9tICdAL3V0aWxzL3JvbGVVdGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVybWlzc2lvblJlcXVlc3QgZXh0ZW5kcyBOZXh0QXBpUmVxdWVzdCB7XG4gIHVzZXI6IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gICAgZmlyc3ROYW1lOiBzdHJpbmc7XG4gICAgbGFzdE5hbWU6IHN0cmluZztcbiAgICByb2xlOiBzdHJpbmc7XG4gICAgZ3JvdXBzOiBzdHJpbmdbXTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhQZXJtaXNzaW9ucyhcbiAgaGFuZGxlcjogKHJlcTogUGVybWlzc2lvblJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiBQcm9taXNlPHZvaWQ+LFxuICByZXF1aXJlZFBlcm1pc3Npb25zOiBzdHJpbmdbXSB8ICgocmVxOiBOZXh0QXBpUmVxdWVzdCkgPT4gc3RyaW5nW10pXG4pIHtcbiAgcmV0dXJuIGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdGhlIHJlcXVpcmVkIHBlcm1pc3Npb25zXG4gICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IHR5cGVvZiByZXF1aXJlZFBlcm1pc3Npb25zID09PSAnZnVuY3Rpb24nIFxuICAgICAgICA/IHJlcXVpcmVkUGVybWlzc2lvbnMocmVxKSBcbiAgICAgICAgOiByZXF1aXJlZFBlcm1pc3Npb25zO1xuXG4gICAgICAvLyBHZXQgdXNlciBmcm9tIHJlcXVlc3QgKHNob3VsZCBiZSBzZXQgYnkgYXV0aCBtaWRkbGV3YXJlKVxuICAgICAgY29uc3QgdXNlciA9IChyZXEgYXMgYW55KS51c2VyO1xuICAgICAgXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgXG4gICAgICAgICAgZXJyb3I6ICdVbmF1dGhvcml6ZWQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIG5vdCBhdXRoZW50aWNhdGVkJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIHBlcm1pc3Npb25zXG4gICAgICBjb25zdCBoYXNQZXJtaXNzaW9uID0gYXdhaXQgY2hlY2tQZXJtaXNzaW9ucyh1c2VyLCBwZXJtaXNzaW9ucyk7XG4gICAgICBcbiAgICAgIGlmICghaGFzUGVybWlzc2lvbikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBcbiAgICAgICAgICBlcnJvcjogJ0ZvcmJpZGRlbicsXG4gICAgICAgICAgbWVzc2FnZTogJ1Blcm1pc3Npb24gY2hlY2sgZmFpbGVkJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENhbGwgdGhlIGhhbmRsZXJcbiAgICAgIGF3YWl0IGhhbmRsZXIocmVxIGFzIFBlcm1pc3Npb25SZXF1ZXN0LCByZXMpO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignUGVybWlzc2lvbiBtaWRkbGV3YXJlIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxuICAgICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXG4gICAgICAgIG1lc3NhZ2U6ICdQZXJtaXNzaW9uIGNoZWNrIGZhaWxlZCcgXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrUGVybWlzc2lvbnModXNlcjogYW55LCByZXF1aXJlZFBlcm1pc3Npb25zOiBzdHJpbmdbXSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAvLyBGb3Igbm93LCBpbXBsZW1lbnQgYSBzaW1wbGUgcm9sZS1iYXNlZCBwZXJtaXNzaW9uIHN5c3RlbVxuICAvLyBUaGlzIGNhbiBiZSBlbmhhbmNlZCBsYXRlciB3aXRoIGEgbW9yZSBzb3BoaXN0aWNhdGVkIHBlcm1pc3Npb24gc3lzdGVtXG4gIFxuICBjb25zdCByb2xlUGVybWlzc2lvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcbiAgICAnQURNSU4nOiBbXG4gICAgICAndXNlcnM6cmVhZCcsICd1c2VyczpjcmVhdGUnLCAndXNlcnM6dXBkYXRlJywgJ3VzZXJzOmRlbGV0ZScsXG4gICAgICAnZ3JvdXBzOnJlYWQnLCAnZ3JvdXBzOmNyZWF0ZScsICdncm91cHM6dXBkYXRlJywgJ2dyb3VwczpkZWxldGUnLFxuICAgICAgJ2V2ZW50czpyZWFkJywgJ2V2ZW50czpjcmVhdGUnLCAnZXZlbnRzOnVwZGF0ZScsICdldmVudHM6ZGVsZXRlJyxcbiAgICAgICd0ZWFtczpyZWFkJywgJ3RlYW1zOndyaXRlJywgJ3RlYW1zOmNyZWF0ZScsICd0ZWFtczp1cGRhdGUnLCAndGVhbXM6ZGVsZXRlJyxcbiAgICAgICd0YXNrczpyZWFkJywgJ3Rhc2tzOmNyZWF0ZScsICd0YXNrczp1cGRhdGUnLCAndGFza3M6ZGVsZXRlJywgJ3Rhc2tzOmVucXVldWUnXG4gICAgXSxcbiAgICAnRVhFQ19CT0FSRCc6IFtcbiAgICAgICd1c2VyczpyZWFkJywgJ3VzZXJzOmNyZWF0ZScsICd1c2Vyczp1cGRhdGUnLFxuICAgICAgJ2dyb3VwczpyZWFkJywgJ2dyb3VwczpjcmVhdGUnLCAnZ3JvdXBzOnVwZGF0ZScsXG4gICAgICAnZXZlbnRzOnJlYWQnLCAnZXZlbnRzOmNyZWF0ZScsICdldmVudHM6dXBkYXRlJyxcbiAgICAgICd0ZWFtczpyZWFkJywgJ3RlYW1zOndyaXRlJywgJ3RlYW1zOmNyZWF0ZScsICd0ZWFtczp1cGRhdGUnLFxuICAgICAgJ3Rhc2tzOnJlYWQnLCAndGFza3M6Y3JlYXRlJywgJ3Rhc2tzOnVwZGF0ZSdcbiAgICBdLFxuICAgICdNRU1CRVInOiBbXG4gICAgICAndXNlcnM6cmVhZCcsXG4gICAgICAnZ3JvdXBzOnJlYWQnLFxuICAgICAgJ2V2ZW50czpyZWFkJyxcbiAgICAgICd0ZWFtczpyZWFkJyxcbiAgICAgICd0YXNrczpyZWFkJ1xuICAgIF1cbiAgfTtcblxuICAvLyBDaGVjayBpZiB1c2VyIGhhcyB0ZWNoLXRlYW0gZ3JvdXAgaW4gYXV0aGVudGlrR3JvdXBzIChPSURDIGdyb3VwcylcbiAgLy8gSWYgdGhleSBkbywgZ2l2ZSB0aGVtIGFkbWluIHBlcm1pc3Npb25zIHJlZ2FyZGxlc3Mgb2YgdGhlaXIgcm9sZVxuICBsZXQgZWZmZWN0aXZlUm9sZSA9IGdldEVmZmVjdGl2ZVN5c3RlbVJvbGUodXNlci5yb2xlKTtcbiAgaWYgKHVzZXIuYXV0aGVudGlrR3JvdXBzICYmIEFycmF5LmlzQXJyYXkodXNlci5hdXRoZW50aWtHcm91cHMpKSB7XG4gICAgaWYgKHVzZXIuYXV0aGVudGlrR3JvdXBzLmluY2x1ZGVzKCd0ZWNoLXRlYW0nKSkge1xuICAgICAgZWZmZWN0aXZlUm9sZSA9ICdBRE1JTic7XG4gICAgICBsb2dnZXIuaW5mbygnVXNlciBoYXMgdGVjaC10ZWFtIGdyb3VwLCBlbGV2YXRpbmcgdG8gYWRtaW4gcGVybWlzc2lvbnMnLCB7XG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgb3JpZ2luYWxSb2xlOiB1c2VyLnJvbGUsXG4gICAgICAgIGVmZmVjdGl2ZVJvbGUsXG4gICAgICAgIGF1dGhlbnRpa0dyb3VwczogdXNlci5hdXRoZW50aWtHcm91cHNcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHVzZXJQZXJtaXNzaW9ucyA9IHJvbGVQZXJtaXNzaW9uc1tlZmZlY3RpdmVSb2xlXSB8fCBbXTtcbiAgXG4gIC8vIENoZWNrIGlmIHVzZXIgaGFzIGFsbCByZXF1aXJlZCBwZXJtaXNzaW9uc1xuICByZXR1cm4gcmVxdWlyZWRQZXJtaXNzaW9ucy5ldmVyeShwZXJtaXNzaW9uID0+IHVzZXJQZXJtaXNzaW9ucy5pbmNsdWRlcyhwZXJtaXNzaW9uKSk7XG59XG4iXSwibmFtZXMiOlsibG9nZ2VyIiwiZ2V0RWZmZWN0aXZlU3lzdGVtUm9sZSIsIndpdGhQZXJtaXNzaW9ucyIsImhhbmRsZXIiLCJyZXF1aXJlZFBlcm1pc3Npb25zIiwicmVxIiwicmVzIiwicGVybWlzc2lvbnMiLCJ1c2VyIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwibWVzc2FnZSIsImhhc1Blcm1pc3Npb24iLCJjaGVja1Blcm1pc3Npb25zIiwicm9sZVBlcm1pc3Npb25zIiwiZWZmZWN0aXZlUm9sZSIsInJvbGUiLCJhdXRoZW50aWtHcm91cHMiLCJBcnJheSIsImlzQXJyYXkiLCJpbmNsdWRlcyIsImluZm8iLCJ1c2VySWQiLCJpZCIsIm9yaWdpbmFsUm9sZSIsInVzZXJQZXJtaXNzaW9ucyIsImV2ZXJ5IiwicGVybWlzc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/middleware/permissionMiddleware.ts\n");

/***/ }),

/***/ "(api)/./src/models/prismaClient.ts":
/*!************************************!*\
  !*** ./src/models/prismaClient.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = globalThis.__prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) {\n    globalThis.__prisma = prisma;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbW9kZWxzL3ByaXNtYUNsaWVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThDO0FBTXZDLE1BQU1DLFNBQVNDLFdBQVdDLFFBQVEsSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUM1REksS0FBS0MsS0FBeUIsR0FBZ0I7UUFBQztRQUFTO1FBQVM7S0FBTyxHQUFHLENBQVM7QUFDdEYsR0FBRztBQUVILElBQUlBLElBQXlCLEVBQWM7SUFDekNILFdBQVdDLFFBQVEsR0FBR0Y7QUFDeEI7QUFFQSxpRUFBZUEsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21ybTM2MC1iYWNrZW5kLy4vc3JjL21vZGVscy9wcmlzbWFDbGllbnQudHM/N2M1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XHJcblxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgdmFyIF9fcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxUaGlzLl9fcHJpc21hIHx8IG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBbJ3F1ZXJ5JywgJ2Vycm9yJywgJ3dhcm4nXSA6IFsnZXJyb3InXSxcclxufSk7XHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gIGdsb2JhbFRoaXMuX19wcmlzbWEgPSBwcmlzbWE7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHByaXNtYTtcclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsInByaXNtYSIsImdsb2JhbFRoaXMiLCJfX3ByaXNtYSIsImxvZyIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/models/prismaClient.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/users/index.ts":
/*!**************************************!*\
  !*** ./src/pages/api/users/index.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _models_prismaClient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../models/prismaClient */ \"(api)/./src/models/prismaClient.ts\");\n/* harmony import */ var _managers_userManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../managers/userManager */ \"(api)/./src/managers/userManager.ts\");\n/* harmony import */ var _middleware_corsMiddleware__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../middleware/corsMiddleware */ \"(api)/./src/middleware/corsMiddleware.ts\");\n/* harmony import */ var _middleware_authMiddleware__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../middleware/authMiddleware */ \"(api)/./src/middleware/authMiddleware.ts\");\n/* harmony import */ var _middleware_permissionMiddleware__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../middleware/permissionMiddleware */ \"(api)/./src/middleware/permissionMiddleware.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/logger */ \"(api)/./src/utils/logger.ts\");\n/* harmony import */ var _middleware_errorHandler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../middleware/errorHandler */ \"(api)/./src/middleware/errorHandler.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__]);\nzod__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n// Validation schemas\nconst createUserSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    email: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().email(),\n    firstName: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1).max(100),\n    lastName: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1).max(100),\n    displayName: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1).max(100).optional(),\n    role: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n        \"ADMIN\",\n        \"EXEC_BOARD\",\n        \"MEMBER\"\n    ]).optional(),\n    paidStatus: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional()\n});\nconst listUsersSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    page: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().transform((val)=>parseInt(val || \"1\")),\n    limit: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().transform((val)=>parseInt(val || \"20\")),\n    search: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    role: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().transform((val)=>{\n        if (val === \"\") return undefined;\n        if (val === \"ADMIN\" || val === \"EXEC_BOARD\" || val === \"MEMBER\") return val;\n        return undefined;\n    }),\n    paidStatus: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().transform((val)=>{\n        if (val === \"\") return undefined;\n        if (val === \"true\") return true;\n        if (val === \"false\") return false;\n        return undefined;\n    }),\n    groupId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().transform((val)=>{\n        if (val === \"\") return undefined;\n        return val;\n    }),\n    teamId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().transform((val)=>{\n        if (val === \"\") return undefined;\n        return val;\n    }),\n    sortBy: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    sortOrder: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n        \"asc\",\n        \"desc\"\n    ]).optional()\n});\n/**\n * @swagger\n * /api/users:\n *   get:\n *     summary: List users with filtering and pagination\n *     tags: [Users]\n *     security:\n *       - sessionAuth: []\n *     parameters:\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           default: 1\n *         description: Page number for pagination\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           default: 20\n *         description: Number of users per page\n *       - in: query\n *         name: search\n *         schema:\n *           type: string\n *         description: Search term for name or email\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *           enum: [ADMIN, EXEC_BOARD, MEMBER]\n *         description: Filter by user role\n *       - in: query\n *         name: paidStatus\n *         schema:\n *           type: boolean\n *         description: Filter by paid status\n *       - in: query\n *         name: groupId\n *         schema:\n *           type: string\n *         description: Filter by group membership\n *     responses:\n *       200:\n *         description: List of users\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 users:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 pagination:\n *                   type: object\n *                   properties:\n *                     page:\n *                       type: integer\n *                     limit:\n *                       type: integer\n *                     total:\n *                       type: integer\n *                     totalPages:\n *                       type: integer\n *       401:\n *         description: Unauthorized\n *       403:\n *         description: Forbidden - insufficient permissions\n *       500:\n *         description: Internal server error\n *   post:\n *     summary: Create a new user\n *     tags: [Users]\n *     security:\n *       - sessionAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - email\n *               - name\n *             properties:\n *               email:\n *                 type: string\n *                 format: email\n *               name:\n *                 type: string\n *                 minLength: 1\n *                 maxLength: 100\n *               role:\n *                 type: string\n *                 enum: [ADMIN, EXEC_BOARD, MEMBER]\n *               paidStatus:\n *                 type: boolean\n *               groupIds:\n *                 type: array\n *                 items:\n *                   type: string\n *     responses:\n *       201:\n *         description: User created successfully\n *         content:\n *           application/json:\n *             schema:\n *               $ref: '#/components/schemas/User'\n *       400:\n *         description: Bad request - validation error\n *       401:\n *         description: Unauthorized\n *       403:\n *         description: Forbidden - insufficient permissions\n *       500:\n *         description: Internal server error\n */ async function handler(req, res) {\n    const userManager = new _managers_userManager__WEBPACK_IMPORTED_MODULE_2__.UserManager(_models_prismaClient__WEBPACK_IMPORTED_MODULE_1__.prisma);\n    try {\n        if (req.method === \"GET\") {\n            // List users\n            const queryParams = listUsersSchema.parse(req.query);\n            const result = await userManager.getUsers({\n                page: queryParams.page,\n                limit: queryParams.limit,\n                search: queryParams.search,\n                role: queryParams.role,\n                paidStatus: queryParams.paidStatus,\n                groupId: queryParams.groupId\n            });\n            res.status(200).json(result);\n        } else if (req.method === \"POST\") {\n            // Create user\n            const body = createUserSchema.parse(req.body);\n            const user = await userManager.createUser({\n                email: body.email,\n                firstName: body.firstName,\n                lastName: body.lastName,\n                displayName: body.displayName,\n                paidStatus: body.paidStatus,\n                role: body.role\n            });\n            res.status(201).json({\n                success: true,\n                data: user\n            });\n        } else {\n            res.status(405).json({\n                error: \"Method not allowed\"\n            });\n        }\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_0__.z.ZodError) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_6__.logger.warn(\"Validation error in users API\", {\n                errors: error.errors\n            });\n            return res.status(400).json({\n                error: \"Validation error\",\n                details: error.errors\n            });\n        }\n        // Handle custom API errors (like CONFLICT, NOT_FOUND, etc.)\n        if (error instanceof Error && error.statusCode) {\n            return (0,_middleware_errorHandler__WEBPACK_IMPORTED_MODULE_7__.handleApiError)(error, req, res);\n        }\n        _utils_logger__WEBPACK_IMPORTED_MODULE_6__.logger.error(\"Error in users API\", {\n            error,\n            method: req.method\n        });\n        res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n// Apply middleware: CORS, authentication then permissions\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_middleware_corsMiddleware__WEBPACK_IMPORTED_MODULE_3__.withCORS)((0,_middleware_authMiddleware__WEBPACK_IMPORTED_MODULE_4__.withAuth)((0,_middleware_permissionMiddleware__WEBPACK_IMPORTED_MODULE_5__.withPermissions)(handler, [\n    \"users:read\",\n    \"users:create\"\n]))));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzVELElBQUlILGlCQUFpQkssU0FBUyxNQUFvQkMsVUFBVSxFQUFFO1lBQzVELE9BQU9sRCx3RUFBY0EsQ0FBQzRDLE9BQU9oQixLQUFLQztRQUNwQztRQUVBOUIsaURBQU1BLENBQUM2QyxLQUFLLENBQUMsc0JBQXNCO1lBQUVBO1lBQU9iLFFBQVFILElBQUlHLE1BQU07UUFBQztRQUMvREYsSUFBSVEsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFTSxPQUFPO1FBQXdCO0lBQ3hEO0FBQ0Y7QUFFQSwwREFBMEQ7QUFDMUQsaUVBQWVoRCxvRUFBUUEsQ0FDckJDLG9FQUFRQSxDQUNOQyxpRkFBZUEsQ0FDYjZCLFNBQ0E7SUFBQztJQUFjO0NBQWUsS0FHbEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tcm0zNjAtYmFja2VuZC8uL3NyYy9wYWdlcy9hcGkvdXNlcnMvaW5kZXgudHM/MTMwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4uLy4uLy4uL21vZGVscy9wcmlzbWFDbGllbnQnO1xuaW1wb3J0IHsgVXNlck1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy91c2VyTWFuYWdlcic7XG5pbXBvcnQgeyB3aXRoQ09SUyB9IGZyb20gJy4uLy4uLy4uL21pZGRsZXdhcmUvY29yc01pZGRsZXdhcmUnO1xuaW1wb3J0IHsgd2l0aEF1dGggfSBmcm9tICcuLi8uLi8uLi9taWRkbGV3YXJlL2F1dGhNaWRkbGV3YXJlJztcbmltcG9ydCB7IHdpdGhQZXJtaXNzaW9ucyB9IGZyb20gJy4uLy4uLy4uL21pZGRsZXdhcmUvcGVybWlzc2lvbk1pZGRsZXdhcmUnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvbG9nZ2VyJztcbmltcG9ydCB7IGhhbmRsZUFwaUVycm9yLCBBcGlFcnJvciB9IGZyb20gJy4uLy4uLy4uL21pZGRsZXdhcmUvZXJyb3JIYW5kbGVyJztcblxuLy8gVmFsaWRhdGlvbiBzY2hlbWFzXG5jb25zdCBjcmVhdGVVc2VyU2NoZW1hID0gei5vYmplY3Qoe1xuICBlbWFpbDogei5zdHJpbmcoKS5lbWFpbCgpLFxuICBmaXJzdE5hbWU6IHouc3RyaW5nKCkubWluKDEpLm1heCgxMDApLFxuICBsYXN0TmFtZTogei5zdHJpbmcoKS5taW4oMSkubWF4KDEwMCksXG4gIGRpc3BsYXlOYW1lOiB6LnN0cmluZygpLm1pbigxKS5tYXgoMTAwKS5vcHRpb25hbCgpLFxuICByb2xlOiB6LmVudW0oWydBRE1JTicsICdFWEVDX0JPQVJEJywgJ01FTUJFUiddKS5vcHRpb25hbCgpLFxuICBwYWlkU3RhdHVzOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxufSk7XG5cbmNvbnN0IGxpc3RVc2Vyc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgcGFnZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLnRyYW5zZm9ybSh2YWwgPT4gcGFyc2VJbnQodmFsIHx8ICcxJykpLFxuICBsaW1pdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLnRyYW5zZm9ybSh2YWwgPT4gcGFyc2VJbnQodmFsIHx8ICcyMCcpKSxcbiAgc2VhcmNoOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHJvbGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKS50cmFuc2Zvcm0odmFsID0+IHtcbiAgICBpZiAodmFsID09PSAnJykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAodmFsID09PSAnQURNSU4nIHx8IHZhbCA9PT0gJ0VYRUNfQk9BUkQnIHx8IHZhbCA9PT0gJ01FTUJFUicpIHJldHVybiB2YWw7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSksXG4gIHBhaWRTdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKS50cmFuc2Zvcm0odmFsID0+IHtcbiAgICBpZiAodmFsID09PSAnJykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAodmFsID09PSAndHJ1ZScpIHJldHVybiB0cnVlO1xuICAgIGlmICh2YWwgPT09ICdmYWxzZScpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9KSxcbiAgZ3JvdXBJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLnRyYW5zZm9ybSh2YWwgPT4ge1xuICAgIGlmICh2YWwgPT09ICcnKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHJldHVybiB2YWw7XG4gIH0pLFxuICB0ZWFtSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS50cmFuc2Zvcm0odmFsID0+IHtcbiAgICBpZiAodmFsID09PSAnJykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICByZXR1cm4gdmFsO1xuICB9KSxcbiAgc29ydEJ5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHNvcnRPcmRlcjogei5lbnVtKFsnYXNjJywgJ2Rlc2MnXSkub3B0aW9uYWwoKSxcbn0pO1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXBpL3VzZXJzOlxuICogICBnZXQ6XG4gKiAgICAgc3VtbWFyeTogTGlzdCB1c2VycyB3aXRoIGZpbHRlcmluZyBhbmQgcGFnaW5hdGlvblxuICogICAgIHRhZ3M6IFtVc2Vyc11cbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gc2Vzc2lvbkF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IHBhZ2VcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICBkZWZhdWx0OiAxXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBQYWdlIG51bWJlciBmb3IgcGFnaW5hdGlvblxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogbGltaXRcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICBkZWZhdWx0OiAyMFxuICogICAgICAgICBkZXNjcmlwdGlvbjogTnVtYmVyIG9mIHVzZXJzIHBlciBwYWdlXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBzZWFyY2hcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogU2VhcmNoIHRlcm0gZm9yIG5hbWUgb3IgZW1haWxcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IHJvbGVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgIGVudW06IFtBRE1JTiwgRVhFQ19CT0FSRCwgTUVNQkVSXVxuICogICAgICAgICBkZXNjcmlwdGlvbjogRmlsdGVyIGJ5IHVzZXIgcm9sZVxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogcGFpZFN0YXR1c1xuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogYm9vbGVhblxuICogICAgICAgICBkZXNjcmlwdGlvbjogRmlsdGVyIGJ5IHBhaWQgc3RhdHVzXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBncm91cElkXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEZpbHRlciBieSBncm91cCBtZW1iZXJzaGlwXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgMjAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogTGlzdCBvZiB1c2Vyc1xuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICAgIHVzZXJzOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogYXJyYXlcbiAqICAgICAgICAgICAgICAgICAgIGl0ZW1zOlxuICogICAgICAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAqICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICAgICAgICBwYWdlOlxuICogICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgICAgbGltaXQ6XG4gKiAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgICB0b3RhbDpcbiAqICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgICAgICAgICAgIHRvdGFsUGFnZXM6XG4gKiAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgNDAxOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogVW5hdXRob3JpemVkXG4gKiAgICAgICA0MDM6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBGb3JiaWRkZW4gLSBpbnN1ZmZpY2llbnQgcGVybWlzc2lvbnNcbiAqICAgICAgIDUwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEludGVybmFsIHNlcnZlciBlcnJvclxuICogICBwb3N0OlxuICogICAgIHN1bW1hcnk6IENyZWF0ZSBhIG5ldyB1c2VyXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBzZXNzaW9uQXV0aDogW11cbiAqICAgICByZXF1ZXN0Qm9keTpcbiAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICBjb250ZW50OlxuICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgcmVxdWlyZWQ6XG4gKiAgICAgICAgICAgICAgIC0gZW1haWxcbiAqICAgICAgICAgICAgICAgLSBuYW1lXG4gKiAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICBlbWFpbDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IGVtYWlsXG4gKiAgICAgICAgICAgICAgIG5hbWU6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiAxXG4gKiAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoOiAxMDBcbiAqICAgICAgICAgICAgICAgcm9sZTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBlbnVtOiBbQURNSU4sIEVYRUNfQk9BUkQsIE1FTUJFUl1cbiAqICAgICAgICAgICAgICAgcGFpZFN0YXR1czpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBib29sZWFuXG4gKiAgICAgICAgICAgICAgIGdyb3VwSWRzOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IGFycmF5XG4gKiAgICAgICAgICAgICAgICAgaXRlbXM6XG4gKiAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICAyMDE6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gKiAgICAgICA0MDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBCYWQgcmVxdWVzdCAtIHZhbGlkYXRpb24gZXJyb3JcbiAqICAgICAgIDQwMTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVuYXV0aG9yaXplZFxuICogICAgICAgNDAzOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogRm9yYmlkZGVuIC0gaW5zdWZmaWNpZW50IHBlcm1pc3Npb25zXG4gKiAgICAgICA1MDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcbiAqL1xuYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBjb25zdCB1c2VyTWFuYWdlciA9IG5ldyBVc2VyTWFuYWdlcihwcmlzbWEpO1xuXG4gIHRyeSB7XG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgICAvLyBMaXN0IHVzZXJzXG4gICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IGxpc3RVc2Vyc1NjaGVtYS5wYXJzZShyZXEucXVlcnkpO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VyTWFuYWdlci5nZXRVc2Vycyh7XG4gICAgICAgIHBhZ2U6IHF1ZXJ5UGFyYW1zLnBhZ2UsXG4gICAgICAgIGxpbWl0OiBxdWVyeVBhcmFtcy5saW1pdCxcbiAgICAgICAgc2VhcmNoOiBxdWVyeVBhcmFtcy5zZWFyY2gsXG4gICAgICAgIHJvbGU6IHF1ZXJ5UGFyYW1zLnJvbGUsXG4gICAgICAgIHBhaWRTdGF0dXM6IHF1ZXJ5UGFyYW1zLnBhaWRTdGF0dXMsXG4gICAgICAgIGdyb3VwSWQ6IHF1ZXJ5UGFyYW1zLmdyb3VwSWQsXG4gICAgICB9KTtcblxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcbiAgICB9IGVsc2UgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xuICAgICAgLy8gQ3JlYXRlIHVzZXJcbiAgICAgIGNvbnN0IGJvZHkgPSBjcmVhdGVVc2VyU2NoZW1hLnBhcnNlKHJlcS5ib2R5KTtcbiAgICAgIFxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJNYW5hZ2VyLmNyZWF0ZVVzZXIoe1xuICAgICAgICBlbWFpbDogYm9keS5lbWFpbCxcbiAgICAgICAgZmlyc3ROYW1lOiBib2R5LmZpcnN0TmFtZSxcbiAgICAgICAgbGFzdE5hbWU6IGJvZHkubGFzdE5hbWUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiBib2R5LmRpc3BsYXlOYW1lLFxuICAgICAgICBwYWlkU3RhdHVzOiBib2R5LnBhaWRTdGF0dXMsXG4gICAgICAgIHJvbGU6IGJvZHkucm9sZSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHVzZXIgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XG4gICAgICBsb2dnZXIud2FybignVmFsaWRhdGlvbiBlcnJvciBpbiB1c2VycyBBUEknLCB7IGVycm9yczogZXJyb3IuZXJyb3JzIH0pO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdWYWxpZGF0aW9uIGVycm9yJywgZGV0YWlsczogZXJyb3IuZXJyb3JzIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBIYW5kbGUgY3VzdG9tIEFQSSBlcnJvcnMgKGxpa2UgQ09ORkxJQ1QsIE5PVF9GT1VORCwgZXRjLilcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAoZXJyb3IgYXMgQXBpRXJyb3IpLnN0YXR1c0NvZGUpIHtcbiAgICAgIHJldHVybiBoYW5kbGVBcGlFcnJvcihlcnJvciwgcmVxLCByZXMpO1xuICAgIH1cbiAgICBcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIHVzZXJzIEFQSScsIHsgZXJyb3IsIG1ldGhvZDogcmVxLm1ldGhvZCB9KTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgfVxufVxuXG4vLyBBcHBseSBtaWRkbGV3YXJlOiBDT1JTLCBhdXRoZW50aWNhdGlvbiB0aGVuIHBlcm1pc3Npb25zXG5leHBvcnQgZGVmYXVsdCB3aXRoQ09SUyhcbiAgd2l0aEF1dGgoXG4gICAgd2l0aFBlcm1pc3Npb25zKFxuICAgICAgaGFuZGxlcixcbiAgICAgIFsndXNlcnM6cmVhZCcsICd1c2VyczpjcmVhdGUnXVxuICAgIClcbiAgKVxuKTtcbiJdLCJuYW1lcyI6WyJ6IiwicHJpc21hIiwiVXNlck1hbmFnZXIiLCJ3aXRoQ09SUyIsIndpdGhBdXRoIiwid2l0aFBlcm1pc3Npb25zIiwibG9nZ2VyIiwiaGFuZGxlQXBpRXJyb3IiLCJjcmVhdGVVc2VyU2NoZW1hIiwib2JqZWN0IiwiZW1haWwiLCJzdHJpbmciLCJmaXJzdE5hbWUiLCJtaW4iLCJtYXgiLCJsYXN0TmFtZSIsImRpc3BsYXlOYW1lIiwib3B0aW9uYWwiLCJyb2xlIiwiZW51bSIsInBhaWRTdGF0dXMiLCJib29sZWFuIiwibGlzdFVzZXJzU2NoZW1hIiwicGFnZSIsInRyYW5zZm9ybSIsInZhbCIsInBhcnNlSW50IiwibGltaXQiLCJzZWFyY2giLCJ1bmRlZmluZWQiLCJncm91cElkIiwidGVhbUlkIiwic29ydEJ5Iiwic29ydE9yZGVyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsInVzZXJNYW5hZ2VyIiwibWV0aG9kIiwicXVlcnlQYXJhbXMiLCJwYXJzZSIsInF1ZXJ5IiwicmVzdWx0IiwiZ2V0VXNlcnMiLCJzdGF0dXMiLCJqc29uIiwiYm9keSIsInVzZXIiLCJjcmVhdGVVc2VyIiwic3VjY2VzcyIsImRhdGEiLCJlcnJvciIsIlpvZEVycm9yIiwid2FybiIsImVycm9ycyIsImRldGFpbHMiLCJFcnJvciIsInN0YXR1c0NvZGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/users/index.ts\n");

/***/ }),

/***/ "(api)/./src/utils/logger.ts":
/*!*****************************!*\
  !*** ./src/utils/logger.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogLevel: () => (/* binding */ LogLevel),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\nvar LogLevel;\n(function(LogLevel) {\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 1] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 2] = \"WARN\";\n    LogLevel[LogLevel[\"ERROR\"] = 3] = \"ERROR\";\n})(LogLevel || (LogLevel = {}));\nclass Logger {\n    constructor(level = 1){\n        this.level = level;\n    }\n    formatMessage(level, message, meta) {\n        const timestamp = new Date().toISOString();\n        const metaStr = meta ? ` ${JSON.stringify(meta)}` : \"\";\n        return `[${timestamp}] ${level}: ${message}${metaStr}`;\n    }\n    log(level, levelName, message, meta) {\n        if (level >= this.level) {\n            const formattedMessage = this.formatMessage(levelName, message, meta);\n            switch(level){\n                case 3:\n                    console.error(formattedMessage);\n                    break;\n                case 2:\n                    console.warn(formattedMessage);\n                    break;\n                case 1:\n                    console.info(formattedMessage);\n                    break;\n                case 0:\n                    console.debug(formattedMessage);\n                    break;\n            }\n        }\n    }\n    debug(message, meta) {\n        this.log(0, \"DEBUG\", message, meta);\n    }\n    info(message, meta) {\n        this.log(1, \"INFO\", message, meta);\n    }\n    warn(message, meta) {\n        this.log(2, \"WARN\", message, meta);\n    }\n    error(message, meta) {\n        this.log(3, \"ERROR\", message, meta);\n    }\n    setLevel(level) {\n        this.level = level;\n    }\n}\nconst logger = new Logger( true ? 0 : 0);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMvbG9nZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7VUFBWUE7Ozs7O0dBQUFBLGFBQUFBO0FBT1osTUFBTUM7SUFHSkMsWUFBWUMsU0FBK0IsQ0FBRTtRQUMzQyxJQUFJLENBQUNBLEtBQUssR0FBR0E7SUFDZjtJQUVRQyxjQUFjRCxLQUFhLEVBQUVFLE9BQWUsRUFBRUMsSUFBVSxFQUFVO1FBQ3hFLE1BQU1DLFlBQVksSUFBSUMsT0FBT0MsV0FBVztRQUN4QyxNQUFNQyxVQUFVSixPQUFPLENBQUMsQ0FBQyxFQUFFSyxLQUFLQyxTQUFTLENBQUNOLE1BQU0sQ0FBQyxHQUFHO1FBQ3BELE9BQU8sQ0FBQyxDQUFDLEVBQUVDLFVBQVUsRUFBRSxFQUFFSixNQUFNLEVBQUUsRUFBRUUsUUFBUSxFQUFFSyxRQUFRLENBQUM7SUFDeEQ7SUFFUUcsSUFBSVYsS0FBZSxFQUFFVyxTQUFpQixFQUFFVCxPQUFlLEVBQUVDLElBQVUsRUFBRTtRQUMzRSxJQUFJSCxTQUFTLElBQUksQ0FBQ0EsS0FBSyxFQUFFO1lBQ3ZCLE1BQU1ZLG1CQUFtQixJQUFJLENBQUNYLGFBQWEsQ0FBQ1UsV0FBV1QsU0FBU0M7WUFFaEUsT0FBUUg7Z0JBQ047b0JBQ0VhLFFBQVFDLEtBQUssQ0FBQ0Y7b0JBQ2Q7Z0JBQ0Y7b0JBQ0VDLFFBQVFFLElBQUksQ0FBQ0g7b0JBQ2I7Z0JBQ0Y7b0JBQ0VDLFFBQVFHLElBQUksQ0FBQ0o7b0JBQ2I7Z0JBQ0Y7b0JBQ0VDLFFBQVFJLEtBQUssQ0FBQ0w7b0JBQ2Q7WUFDSjtRQUNGO0lBQ0Y7SUFFQUssTUFBTWYsT0FBZSxFQUFFQyxJQUFVLEVBQUU7UUFDakMsSUFBSSxDQUFDTyxHQUFHLElBQWlCLFNBQVNSLFNBQVNDO0lBQzdDO0lBRUFhLEtBQUtkLE9BQWUsRUFBRUMsSUFBVSxFQUFFO1FBQ2hDLElBQUksQ0FBQ08sR0FBRyxJQUFnQixRQUFRUixTQUFTQztJQUMzQztJQUVBWSxLQUFLYixPQUFlLEVBQUVDLElBQVUsRUFBRTtRQUNoQyxJQUFJLENBQUNPLEdBQUcsSUFBZ0IsUUFBUVIsU0FBU0M7SUFDM0M7SUFFQVcsTUFBTVosT0FBZSxFQUFFQyxJQUFVLEVBQUU7UUFDakMsSUFBSSxDQUFDTyxHQUFHLElBQWlCLFNBQVNSLFNBQVNDO0lBQzdDO0lBRUFlLFNBQVNsQixLQUFlLEVBQUU7UUFDeEIsSUFBSSxDQUFDQSxLQUFLLEdBQUdBO0lBQ2Y7QUFDRjtBQUVPLE1BQU1tQixTQUFTLElBQUlyQixPQUN4QnNCLEtBQXlCLFVBQ3pCO0FBRUYsaUVBQWVELE1BQU1BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tcm0zNjAtYmFja2VuZC8uL3NyYy91dGlscy9sb2dnZXIudHM/N2NmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBMb2dMZXZlbCB7XHJcbiAgREVCVUcgPSAwLFxyXG4gIElORk8gPSAxLFxyXG4gIFdBUk4gPSAyLFxyXG4gIEVSUk9SID0gM1xyXG59XHJcblxyXG5jbGFzcyBMb2dnZXIge1xyXG4gIHByaXZhdGUgbGV2ZWw6IExvZ0xldmVsO1xyXG5cclxuICBjb25zdHJ1Y3RvcihsZXZlbDogTG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPKSB7XHJcbiAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGZvcm1hdE1lc3NhZ2UobGV2ZWw6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGFTdHIgPSBtZXRhID8gYCAke0pTT04uc3RyaW5naWZ5KG1ldGEpfWAgOiAnJztcclxuICAgIHJldHVybiBgWyR7dGltZXN0YW1wfV0gJHtsZXZlbH06ICR7bWVzc2FnZX0ke21ldGFTdHJ9YDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbG9nKGxldmVsOiBMb2dMZXZlbCwgbGV2ZWxOYW1lOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgbWV0YT86IGFueSkge1xyXG4gICAgaWYgKGxldmVsID49IHRoaXMubGV2ZWwpIHtcclxuICAgICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZSA9IHRoaXMuZm9ybWF0TWVzc2FnZShsZXZlbE5hbWUsIG1lc3NhZ2UsIG1ldGEpO1xyXG4gICAgICBcclxuICAgICAgc3dpdGNoIChsZXZlbCkge1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuRVJST1I6XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5XQVJOOlxyXG4gICAgICAgICAgY29uc29sZS53YXJuKGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5JTkZPOlxyXG4gICAgICAgICAgY29uc29sZS5pbmZvKGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5ERUJVRzpcclxuICAgICAgICAgIGNvbnNvbGUuZGVidWcoZm9ybWF0dGVkTWVzc2FnZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGVidWcobWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5ERUJVRywgJ0RFQlVHJywgbWVzc2FnZSwgbWV0YSk7XHJcbiAgfVxyXG5cclxuICBpbmZvKG1lc3NhZ2U6IHN0cmluZywgbWV0YT86IGFueSkge1xyXG4gICAgdGhpcy5sb2coTG9nTGV2ZWwuSU5GTywgJ0lORk8nLCBtZXNzYWdlLCBtZXRhKTtcclxuICB9XHJcblxyXG4gIHdhcm4obWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5XQVJOLCAnV0FSTicsIG1lc3NhZ2UsIG1ldGEpO1xyXG4gIH1cclxuXHJcbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5FUlJPUiwgJ0VSUk9SJywgbWVzc2FnZSwgbWV0YSk7XHJcbiAgfVxyXG5cclxuICBzZXRMZXZlbChsZXZlbDogTG9nTGV2ZWwpIHtcclxuICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFxyXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gTG9nTGV2ZWwuREVCVUcgOiBMb2dMZXZlbC5JTkZPXHJcbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XHJcbiJdLCJuYW1lcyI6WyJMb2dMZXZlbCIsIkxvZ2dlciIsImNvbnN0cnVjdG9yIiwibGV2ZWwiLCJmb3JtYXRNZXNzYWdlIiwibWVzc2FnZSIsIm1ldGEiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJtZXRhU3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvZyIsImxldmVsTmFtZSIsImZvcm1hdHRlZE1lc3NhZ2UiLCJjb25zb2xlIiwiZXJyb3IiLCJ3YXJuIiwiaW5mbyIsImRlYnVnIiwic2V0TGV2ZWwiLCJsb2dnZXIiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/utils/logger.ts\n");

/***/ }),

/***/ "(api)/./src/utils/roleUtils.ts":
/*!********************************!*\
  !*** ./src/utils/roleUtils.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CLASS_RANK_ROLES: () => (/* binding */ CLASS_RANK_ROLES),\n/* harmony export */   SYSTEM_ROLES: () => (/* binding */ SYSTEM_ROLES),\n/* harmony export */   getDefaultSystemRole: () => (/* binding */ getDefaultSystemRole),\n/* harmony export */   getEffectiveSystemRole: () => (/* binding */ getEffectiveSystemRole),\n/* harmony export */   isClassRankRole: () => (/* binding */ isClassRankRole),\n/* harmony export */   isSystemRole: () => (/* binding */ isSystemRole),\n/* harmony export */   validateClassRankRole: () => (/* binding */ validateClassRankRole),\n/* harmony export */   validateSystemRole: () => (/* binding */ validateSystemRole)\n/* harmony export */ });\n/**\n * Utility functions for handling user roles and class ranks\n */ // System roles that control permissions and access\nconst SYSTEM_ROLES = [\n    \"ADMIN\",\n    \"EXEC_BOARD\",\n    \"MEMBER\"\n];\n// Class rank roles that are used for Discord role assignment\nconst CLASS_RANK_ROLES = [\n    \"FIRST_YEAR\",\n    \"SECOND_YEAR\",\n    \"THIRD_YEAR\",\n    \"FOURTH_YEAR\",\n    \"ALUMNI_OTHER\"\n];\n/**\n * Check if a role is a system role (ADMIN, EXEC_BOARD, MEMBER)\n */ function isSystemRole(role) {\n    return SYSTEM_ROLES.includes(role);\n}\n/**\n * Check if a role is a class rank role (FIRST_YEAR, SECOND_YEAR, etc.)\n */ function isClassRankRole(role) {\n    return CLASS_RANK_ROLES.includes(role);\n}\n/**\n * Get the default system role for new users\n */ function getDefaultSystemRole() {\n    return \"MEMBER\";\n}\n/**\n * Validate that a role is a valid system role\n * Throws an error if the role is a class rank role\n */ function validateSystemRole(role) {\n    if (isClassRankRole(role)) {\n        throw new Error(`Invalid system role: ${role} is a class rank role, not a system role`);\n    }\n    if (!isSystemRole(role)) {\n        throw new Error(`Invalid system role: ${role}`);\n    }\n    return role;\n}\n/**\n * Validate that a class rank is a valid class rank role\n * Throws an error if the role is a system role\n */ function validateClassRankRole(role) {\n    if (isSystemRole(role)) {\n        throw new Error(`Invalid class rank: ${role} is a system role, not a class rank role`);\n    }\n    if (!isClassRankRole(role)) {\n        throw new Error(`Invalid class rank: ${role}`);\n    }\n    return role;\n}\n/**\n * Get a user's effective system role, ensuring it's not a class rank role\n * If the user has a class rank role, default to MEMBER\n */ function getEffectiveSystemRole(userRole) {\n    if (isSystemRole(userRole)) {\n        return userRole;\n    }\n    // If the user has a class rank role, they should have MEMBER as their system role\n    if (isClassRankRole(userRole)) {\n        return \"MEMBER\";\n    }\n    // Default fallback\n    return \"MEMBER\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMvcm9sZVV0aWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBRUE7O0NBRUMsR0FFRCxtREFBbUQ7QUFDNUMsTUFBTUEsZUFBZTtJQUFDO0lBQVM7SUFBYztDQUFTLENBQVU7QUFHdkUsNkRBQTZEO0FBQ3RELE1BQU1DLG1CQUFtQjtJQUFDO0lBQWM7SUFBZTtJQUFjO0lBQWU7Q0FBZSxDQUFVO0FBR3BIOztDQUVDLEdBQ00sU0FBU0MsYUFBYUMsSUFBWTtJQUN2QyxPQUFPSCxhQUFhSSxRQUFRLENBQUNEO0FBQy9CO0FBRUE7O0NBRUMsR0FDTSxTQUFTRSxnQkFBZ0JGLElBQVk7SUFDMUMsT0FBT0YsaUJBQWlCRyxRQUFRLENBQUNEO0FBQ25DO0FBRUE7O0NBRUMsR0FDTSxTQUFTRztJQUNkLE9BQU87QUFDVDtBQUVBOzs7Q0FHQyxHQUNNLFNBQVNDLG1CQUFtQkosSUFBWTtJQUM3QyxJQUFJRSxnQkFBZ0JGLE9BQU87UUFDekIsTUFBTSxJQUFJSyxNQUFNLENBQUMscUJBQXFCLEVBQUVMLEtBQUssd0NBQXdDLENBQUM7SUFDeEY7SUFFQSxJQUFJLENBQUNELGFBQWFDLE9BQU87UUFDdkIsTUFBTSxJQUFJSyxNQUFNLENBQUMscUJBQXFCLEVBQUVMLEtBQUssQ0FBQztJQUNoRDtJQUVBLE9BQU9BO0FBQ1Q7QUFFQTs7O0NBR0MsR0FDTSxTQUFTTSxzQkFBc0JOLElBQVk7SUFDaEQsSUFBSUQsYUFBYUMsT0FBTztRQUN0QixNQUFNLElBQUlLLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRUwsS0FBSyx3Q0FBd0MsQ0FBQztJQUN2RjtJQUVBLElBQUksQ0FBQ0UsZ0JBQWdCRixPQUFPO1FBQzFCLE1BQU0sSUFBSUssTUFBTSxDQUFDLG9CQUFvQixFQUFFTCxLQUFLLENBQUM7SUFDL0M7SUFFQSxPQUFPQTtBQUNUO0FBRUE7OztDQUdDLEdBQ00sU0FBU08sdUJBQXVCQyxRQUFnQjtJQUNyRCxJQUFJVCxhQUFhUyxXQUFXO1FBQzFCLE9BQU9BO0lBQ1Q7SUFFQSxrRkFBa0Y7SUFDbEYsSUFBSU4sZ0JBQWdCTSxXQUFXO1FBQzdCLE9BQU87SUFDVDtJQUVBLG1CQUFtQjtJQUNuQixPQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tcm0zNjAtYmFja2VuZC8uL3NyYy91dGlscy9yb2xlVXRpbHMudHM/ZDVmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb2xlIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBoYW5kbGluZyB1c2VyIHJvbGVzIGFuZCBjbGFzcyByYW5rc1xuICovXG5cbi8vIFN5c3RlbSByb2xlcyB0aGF0IGNvbnRyb2wgcGVybWlzc2lvbnMgYW5kIGFjY2Vzc1xuZXhwb3J0IGNvbnN0IFNZU1RFTV9ST0xFUyA9IFsnQURNSU4nLCAnRVhFQ19CT0FSRCcsICdNRU1CRVInXSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFN5c3RlbVJvbGUgPSB0eXBlb2YgU1lTVEVNX1JPTEVTW251bWJlcl07XG5cbi8vIENsYXNzIHJhbmsgcm9sZXMgdGhhdCBhcmUgdXNlZCBmb3IgRGlzY29yZCByb2xlIGFzc2lnbm1lbnRcbmV4cG9ydCBjb25zdCBDTEFTU19SQU5LX1JPTEVTID0gWydGSVJTVF9ZRUFSJywgJ1NFQ09ORF9ZRUFSJywgJ1RISVJEX1lFQVInLCAnRk9VUlRIX1lFQVInLCAnQUxVTU5JX09USEVSJ10gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBDbGFzc1JhbmtSb2xlID0gdHlwZW9mIENMQVNTX1JBTktfUk9MRVNbbnVtYmVyXTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIHJvbGUgaXMgYSBzeXN0ZW0gcm9sZSAoQURNSU4sIEVYRUNfQk9BUkQsIE1FTUJFUilcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3lzdGVtUm9sZShyb2xlOiBzdHJpbmcpOiByb2xlIGlzIFN5c3RlbVJvbGUge1xuICByZXR1cm4gU1lTVEVNX1JPTEVTLmluY2x1ZGVzKHJvbGUgYXMgU3lzdGVtUm9sZSk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSByb2xlIGlzIGEgY2xhc3MgcmFuayByb2xlIChGSVJTVF9ZRUFSLCBTRUNPTkRfWUVBUiwgZXRjLilcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ2xhc3NSYW5rUm9sZShyb2xlOiBzdHJpbmcpOiByb2xlIGlzIENsYXNzUmFua1JvbGUge1xuICByZXR1cm4gQ0xBU1NfUkFOS19ST0xFUy5pbmNsdWRlcyhyb2xlIGFzIENsYXNzUmFua1JvbGUpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZGVmYXVsdCBzeXN0ZW0gcm9sZSBmb3IgbmV3IHVzZXJzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0U3lzdGVtUm9sZSgpOiBTeXN0ZW1Sb2xlIHtcbiAgcmV0dXJuICdNRU1CRVInO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIHRoYXQgYSByb2xlIGlzIGEgdmFsaWQgc3lzdGVtIHJvbGVcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcm9sZSBpcyBhIGNsYXNzIHJhbmsgcm9sZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVTeXN0ZW1Sb2xlKHJvbGU6IHN0cmluZyk6IFN5c3RlbVJvbGUge1xuICBpZiAoaXNDbGFzc1JhbmtSb2xlKHJvbGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN5c3RlbSByb2xlOiAke3JvbGV9IGlzIGEgY2xhc3MgcmFuayByb2xlLCBub3QgYSBzeXN0ZW0gcm9sZWApO1xuICB9XG4gIFxuICBpZiAoIWlzU3lzdGVtUm9sZShyb2xlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzeXN0ZW0gcm9sZTogJHtyb2xlfWApO1xuICB9XG4gIFxuICByZXR1cm4gcm9sZTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSB0aGF0IGEgY2xhc3MgcmFuayBpcyBhIHZhbGlkIGNsYXNzIHJhbmsgcm9sZVxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSByb2xlIGlzIGEgc3lzdGVtIHJvbGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQ2xhc3NSYW5rUm9sZShyb2xlOiBzdHJpbmcpOiBDbGFzc1JhbmtSb2xlIHtcbiAgaWYgKGlzU3lzdGVtUm9sZShyb2xlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjbGFzcyByYW5rOiAke3JvbGV9IGlzIGEgc3lzdGVtIHJvbGUsIG5vdCBhIGNsYXNzIHJhbmsgcm9sZWApO1xuICB9XG4gIFxuICBpZiAoIWlzQ2xhc3NSYW5rUm9sZShyb2xlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjbGFzcyByYW5rOiAke3JvbGV9YCk7XG4gIH1cbiAgXG4gIHJldHVybiByb2xlO1xufVxuXG4vKipcbiAqIEdldCBhIHVzZXIncyBlZmZlY3RpdmUgc3lzdGVtIHJvbGUsIGVuc3VyaW5nIGl0J3Mgbm90IGEgY2xhc3MgcmFuayByb2xlXG4gKiBJZiB0aGUgdXNlciBoYXMgYSBjbGFzcyByYW5rIHJvbGUsIGRlZmF1bHQgdG8gTUVNQkVSXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFZmZlY3RpdmVTeXN0ZW1Sb2xlKHVzZXJSb2xlOiBzdHJpbmcpOiBTeXN0ZW1Sb2xlIHtcbiAgaWYgKGlzU3lzdGVtUm9sZSh1c2VyUm9sZSkpIHtcbiAgICByZXR1cm4gdXNlclJvbGU7XG4gIH1cbiAgXG4gIC8vIElmIHRoZSB1c2VyIGhhcyBhIGNsYXNzIHJhbmsgcm9sZSwgdGhleSBzaG91bGQgaGF2ZSBNRU1CRVIgYXMgdGhlaXIgc3lzdGVtIHJvbGVcbiAgaWYgKGlzQ2xhc3NSYW5rUm9sZSh1c2VyUm9sZSkpIHtcbiAgICByZXR1cm4gJ01FTUJFUic7XG4gIH1cbiAgXG4gIC8vIERlZmF1bHQgZmFsbGJhY2tcbiAgcmV0dXJuICdNRU1CRVInO1xufVxuIl0sIm5hbWVzIjpbIlNZU1RFTV9ST0xFUyIsIkNMQVNTX1JBTktfUk9MRVMiLCJpc1N5c3RlbVJvbGUiLCJyb2xlIiwiaW5jbHVkZXMiLCJpc0NsYXNzUmFua1JvbGUiLCJnZXREZWZhdWx0U3lzdGVtUm9sZSIsInZhbGlkYXRlU3lzdGVtUm9sZSIsIkVycm9yIiwidmFsaWRhdGVDbGFzc1JhbmtSb2xlIiwiZ2V0RWZmZWN0aXZlU3lzdGVtUm9sZSIsInVzZXJSb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/utils/roleUtils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fusers&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fusers%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();